(this.webpackJsonpbookshelf=this.webpackJsonpbookshelf||[]).push([[0],{194:function(e,t,a){e.exports=a(334)},199:function(e,t,a){},201:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},202:function(e,t,a){},280:function(e,t){},282:function(e,t){},290:function(e,t){},292:function(e,t){},326:function(e,t){},327:function(e,t){},329:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=329},334:function(e,t,a){"use strict";a.r(t);var o=a(0),s=a.n(o),n=a(20),r=a.n(n),l=(a(199),a(167)),i=a.n(l),c=a(21),d=a(6),g=a(5),m=a(7),u=a(8),p=a(9),h=(a(201),a(202),a(16)),f=a(89),b=a(22),v=function(e){return s.a.createElement(h.a,{icon:b.a})},k=a(58),E=function(e){return s.a.createElement(h.a,{icon:k.a})};var T=function(e){return s.a.createElement("header",{className:"header color-"+e.settingsColor+" font-"+e.settingsFont},s.a.createElement("h1",{className:"logo-area"},s.a.createElement("a",{href:"/bookshelf/"},"Bookshelf")),s.a.createElement("nav",Object(c.a)({className:"nav-primary","aria-label":"Main",id:"bookshelf-nav-primary"},"className","main-menu"),s.a.createElement("ul",{id:"menu-main-menu",className:"menu-main-menu"},s.a.createElement("li",{id:"menu-item-search",className:"menu-item search"},s.a.createElement("a",{href:"#search"},s.a.createElement(h.a,{icon:f.b})," New Books")),s.a.createElement("li",{id:"menu-item-saved",className:"menu-item saved"},s.a.createElement("a",{href:"#saved"},s.a.createElement(v,null)," To Read")),s.a.createElement("li",{id:"menu-item-read",className:"menu-item read"},s.a.createElement("a",{href:"#read"},s.a.createElement(E,null)," Already Read")),s.a.createElement("li",{id:"menu-item-settings",className:"menu-item settings"},s.a.createElement("a",{href:"#settings"},s.a.createElement(h.a,{icon:f.a})," Settings")))))},R=a(12),y=a(88),S=a(32),N=a(27),B=a(24),w=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).createNewBook=function(e){e.preventDefault(),console.log(a.props.book);var t=a.props.book;a.props.addBookToRead(t)},a.state={},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("button",{className:"read-action to-read",title:"Add to your To Read shelf",onClick:this.createNewBook},s.a.createElement(h.a,{icon:b.a}))}}]),t}(s.a.Component),I=(s.a.Component,a(17)),C=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.defaultRating;console.log(e);var t=null;"5"===e&&(t="\u2b50\u2b50\u2b50\u2b50\u2b50 Life-Changing"),"4"===e&&(t="\u2b50\u2b50\u2b50\u2b50 Great"),"3"===e&&(t="\u2b50\u2b50\u2b50 Good"),"2"===e&&(t="\u2b50\u2b50 OK"),"1"===e&&(t="\u2b50 Bad / Didn't Finish");var a={value:e,label:t};null===e&&(a=null);var o=[{value:"5",label:"\u2b50\u2b50\u2b50\u2b50\u2b50 Life-Changing"},{value:"4",label:"\u2b50\u2b50\u2b50\u2b50 Great"},{value:"3",label:"\u2b50\u2b50\u2b50 Good"},{value:"2",label:"\u2b50\u2b50 OK"},{value:"1",label:"\u2b50 Bad / Didn't Finish"}];return e?s.a.createElement(I.a,{placeholder:"Set Rating",options:o,defaultValue:a,isClearable:!0,isSearchable:!0,onChange:this.props.setRating}):s.a.createElement(I.a,{placeholder:"Set Rating",options:o,isClearable:!0,isSearchable:!0,onChange:this.props.setRating})}}]),t}(s.a.Component),F=a(368),O=a(377);s.a.Component;function D(e){var t=s.a.useState(new Date),a=Object(N.a)(t,2),o=(a[0],a[1]),n=0;return n=e.bookshelfTimestamp?new Date(e.bookshelfTimestamp).toISOString().slice(0,10):(new Date).toISOString().slice(0,10),console.log(n),s.a.createElement(O.a,{id:"date",required:!0,label:"Date Completed",type:"date",defaultValue:n,className:"book-date-field",InputLabelProps:{shrink:!0},onChange:function(t){console.log(t.currentTarget.value),o(t.currentTarget.value),e.getCompletedDate(t.currentTarget.value)}})}var A=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).id=a.props.book.id,a.bookshelfRating=a.props.bookshelfRating,a.bookNotes=a.props.bookshelfNote,a.bookshelfTimestamp=a.props.bookshelfTimestamp,a.editThisBook=function(e){e.preventDefault();var t=a.state.book;console.log(t),console.log(a.state.book.bookshelfTimestamp),void 0===a.bookshelfTimestamp&&(a.bookshelfTimestamp=a.state.book.bookshelfTimestamp),void 0===a.bookshelfRating&&(a.bookshelfRating=a.state.book.bookshelfRating),void 0===a.bookNotes&&(a.bookNotes=[]),t.bookshelfRating=a.bookshelfRating,t.bookshelfNote=a.bookNotes,t.bookshelfTimestamp=a.bookshelfTimestamp;var o=t;console.log(o),a.props.editBook(o)},a.setRating=function(e){e?(a.bookshelfRating=e.value,a.setState({bookshelfRating:e.value})):a.setState({bookshelfRating:505})},a.getCompletedDate=function(e){console.log("Completed DATE: "+a.bookshelfTimestamp);var t=parseInt(new Date(e).getTime().toFixed(0));console.log(t),a.bookshelfTimestamp=t},a.state={currentlyEditing:!0,book:a.props.book,bookshelfNote:a.props.bookshelfNote,bookshelfRating:a.props.bookshelfRating},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){console.log("Current book: "+JSON.stringify(this.props.book)),console.log("Current book RATING: "+JSON.stringify(this.props.bookshelfRating));var e=this.props.bookshelfRating,t=this.props.bookshelfTimestamp;return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{className:"edit-book",onSubmit:this.editThisBook},s.a.createElement("div",{className:"top-info-line"},!0!==this.props.hideRating&&s.a.createElement("div",{className:"book-rating-area"},s.a.createElement(C,{setRating:this.setRating,defaultRating:e})),!0!==this.props.hideDate&&s.a.createElement("div",{className:"book-date-area"},s.a.createElement(D,{bookshelfTimestamp:t,getCompletedDate:this.getCompletedDate}))),s.a.createElement("button",{type:"submit",className:"update-this-book"},"Save Changes")))}}]),t}(s.a.Component),j=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).removeThisBook=function(e){e.preventDefault();var t=a.props.book;"removeBookFromAlreadyRead"===a.props.context&&a.props.removeBookFromAlreadyRead(t),"removeBookFromToRead"===a.props.context&&a.props.removeBookFromToRead(t)},a.state={},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("button",{className:"read-action remove-book",title:"Permanently remove this book from your collection",onClick:function(t){return window.confirm("Are you sure you want to delete this book? All of your ratings and notes for this book will also be removed. You cannot undo this action.")&&e.removeThisBook(t)}},s.a.createElement(h.a,{icon:b.d}))}}]),t}(s.a.Component),G=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).createNewBook=function(e){e.preventDefault(),console.log(a.props.book);var t=a.props.book;a.props.moveBooktoAlreadyRead(t)},a.state={},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("button",{className:"read-action already-read",title:"Move this book to your Already Read shelf",onClick:this.createNewBook},s.a.createElement(h.a,{icon:k.a}))}}]),t}(s.a.Component),L=a(170),U=a.n(L),V=a(171),Z=a.n(V).a.initializeApp({apiKey:"AIzaSyDniUweenII-q4xtU2jywgLN_lVEcLNnlM",authDomain:"bookshelf-9d11e.firebaseapp.com",databaseURL:"https://bookshelf-9d11e.firebaseio.com",projectId:"bookshelf-9d11e",storageBucket:"bookshelf-9d11e.appspot.com",messagingSenderId:"16890829596",appId:"1:16890829596:web:44b99ad2e1677bca39f8d9"}),x=U.a.createClass(Z.database()),M=a(172),z=a.n(M),P=(a(47),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChangeUsername=function(e){return a.setState({username:e.target.value})},a.handleUploadStart=function(){return a.setState({isUploading:!0,progress:0})},a.handleProgress=function(e){return a.setState({progress:e})},a.handleUploadError=function(e){a.setState({isUploading:!1}),console.error(e)},a.handleUploadSuccess=function(e){a.setState({bookCover:e,progress:100,isUploading:!1}),Z.storage().ref("images").child(e).getDownloadURL().then((function(e){return a.setState({bookCoverURL:e})}))},a.cancelUpload=function(){a.setState({bookCoverURL:""})},a.setNewCover=function(){console.log(a.state.bookCoverURL),console.log(a.props.bookObj),a.props.updateCoverImg(a.state.bookCoverURL,a.props.bookObj)},a.state={bookCover:"",isUploading:!1,progress:0,bookCoverURL:"",isEditing:!0},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){console.log(this.state.bookCoverURL);var e=null;return""===this.state.bookCoverURL&&(e=s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"button replace-cover",style:{}},s.a.createElement("form",{className:"replace-book-cover"},"Replace Cover",s.a.createElement(z.a,{hidden:!0,accept:"image/*",randomizeFilename:!0,storageRef:Z.storage().ref("images"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress}))))),s.a.createElement("div",null,this.state.isUploading&&s.a.createElement("p",null,"Progress: ",this.state.progress),this.state.bookCoverURL&&s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Updated cover:"),s.a.createElement("div",{className:"updated-cover-thumbnail"},s.a.createElement("img",{src:this.state.bookCoverURL}))),e,this.state.bookCoverURL&&s.a.createElement("button",{className:"finalize-new-cover-button",onClick:this.setNewCover},"Save New Cover"),this.state.bookCoverURL&&s.a.createElement("button",{className:"cancel-new-cover",onClick:this.cancelUpload},"Cancel"))}}]),t}(o.Component));var H=function(e){var t=parseInt(e.bookshelfRating),a=null;return a=5===t?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50")):4===t?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50")):3===t?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50")):2===t?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"star-icon"},"\u2b50"),s.a.createElement("span",{className:"star-icon"},"\u2b50")):1===t?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"star-icon"},"\u2b50")):null,s.a.createElement("div",{className:"star-rating-area"},a)};a(376);var Y=a(59),W=a(91),q=a(48),_=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleCreateLabel=function(e,t){return console.log("handleCreateLabel"),'Create new genre: "'+e+'"'},a.state={},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.genres,t=this.props.defaultGenre,a=[];if(e.forEach((function(e){return a.push({value:e,label:e})})),null!==t){var o={value:t,label:t};return s.a.createElement(q.a,{placeholder:"Genre",options:a,defaultValue:o,isClearable:!0,isSearchable:!0,formatCreateLabel:this.handleCreateLabel,onChange:this.props.setGenre})}return s.a.createElement(q.a,{placeholder:"Genre",options:a,isClearable:!0,isSearchable:!0,value:null,formatCreateLabel:this.handleCreateLabel,onChange:this.props.setGenre})}}]),t}(s.a.Component),J=(a(47),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleCreateLabel=function(e,t){return console.log("handleCreateLabel"),'Create new tag: "'+e+'"'},a.addTagToState=function(e){console.log(e),a.setState({tags:e,madeChange:!0})},a.handleTagsSubmit=function(e){e.preventDefault(),console.log("HANDLE SUBMIT TAGS"),console.log(a.state.tags);var t=a.state.tags,o=[];t.length>0&&null!==t&&(o=t.map((function(e){return e.value}))),console.log(o),a.props.addNewTag(o),a.props.setBookTags(o,a.props.book)},a.state={tags:a.props.defaultTags,madeChange:!1},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.allTags,t=(this.state.tags,this.props.defaultTags);console.log(t);var a=[];if(void 0!==e&&e.map((function(e,t){return a.push({value:e,label:e})})),void 0!==t){console.log(t);for(var o=[],n=0;n<t.length;n++)o.push({value:t[n],label:t[n]});return s.a.createElement("form",{id:"select-tags-form",onSubmit:this.handleTagsSubmit},s.a.createElement(q.a,{isMulti:!0,placeholder:"Select Tags",defaultValue:o,options:a,isClearable:!0,isSearchable:!0,formatCreateLabel:this.handleCreateLabel,onChange:this.addTagToState}),!0===this.state.madeChange&&s.a.createElement("button",{className:"add-tags"},"Update Tags"))}return s.a.createElement("form",{id:"select-tags-form",onSubmit:this.handleTagsSubmit},s.a.createElement(q.a,{isMulti:!0,placeholder:"Select Tags",options:a,isClearable:!0,isSearchable:!0,formatCreateLabel:this.handleCreateLabel,onChange:this.addTagToState}),s.a.createElement("button",{className:"add-tags"},"Update Tags"))}}]),t}(s.a.Component)),K=(a(333),a(237),a(174)),Q=a.n(K),$=function(e){function t(){var e,a;Object(d.a)(this,t);for(var o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={date:new Date,madeChange:!1},a.onChange=function(e){a.setState({date:e,madeChange:!0})},a.handleDateSubmit=function(e){e.preventDefault(),console.log("HANDLE DATE SUBMIT"),console.log(a.state.date);var t=Date.parse(a.state.date);console.log(t),a.setState({madeChange:!1}),a.props.setBookTimestamp(t,a.props.book)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{id:"new-date-form",onSubmit:this.handleDateSubmit},s.a.createElement(Q.a,{locale:"en-US",maxDate:new Date,required:!0,onChange:this.onChange,value:this.state.date}),!0===this.state.madeChange&&s.a.createElement("button",{className:"save-date"},"Save Date")))}}]),t}(o.Component),X=a(47),ee=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).customToggle=function(){console.log("Custom Toggle")},a.currentlyEditingRating=function(){console.log("currentlyEditingRating"),a.setState({currentlyEditingRating:!0})},a.setRating=function(e){e&&(console.log(e),a.props.setBookRating(e,a.props.book),a.setState({bookshelfRating:e.value,currentlyEditingRating:!1}))},a.resetRating=function(){console.log("resetRating"),a.props.resetRatingToZero(a.props.book)},a.resetTimestamp=function(){console.log("resetRating"),a.props.resetTimestampToZero(a.props.book)},a.resetGenre=function(){console.log("resetGenre"),a.setState({genre:""}),a.props.resetGenreToZero(a.props.book)},a.resetTags=function(){console.log("resetTags"),a.setState({tags:[]}),a.props.resetAllTags(a.props.book)},a.currentlyEditingTags=function(){console.log("currentlyEditingTags"),console.log("POSSIBLE TAGS"),console.log(a.props.tags),a.setState({currentlyEditingTags:!0})},a.currentlyEditingGenre=function(){console.log("currentlyEditingGenre"),a.setState({currentlyEditingGenre:!0})},a.currentlyEditingDate=function(){console.log("currentlyEditingDate"),a.setState({currentlyEditingDate:!0})},a.setGenre=function(e){e&&(console.log(e),a.props.setBookGenre(e,a.props.book),a.props.addNewGenre(e.value),a.setState({genre:e.value,currentlyEditingGenre:!1}))},a.setTags=function(e){e&&console.log(e)},a.selectedDate=new Date,a.handleDateChange=function(e,t){console.log(e),console.log(t);var o=new Date(t),s=o.getTime();console.log(o),a.props.setBookTimestamp(s,a.props.book),a.setState({currentlyEditingDate:!1})},a.customToggle=function(){a.setState((function(e){return{viewDescription:!e.viewDescription}}))},a.state={currentlyEditingRating:!1,bookshelfRating:a.props.bookshelfRating,currentlyEditingDate:!1,currentlyEditingGenre:!1,currentlyEditingTags:!1,viewDescription:!1,genre:a.props.book.genre,tags:a.props.book.tags},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.description,t=s.a.createElement("div",{className:"rating-area"},"Rating: ",s.a.createElement(H,{bookshelfRating:this.state.bookshelfRating})," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingRating,title:"Edit Rating"},s.a.createElement(h.a,{icon:b.b}))," ",s.a.createElement("span",{className:"edit-icon remove",onClick:this.resetRating,title:"Remove Rating"},s.a.createElement(h.a,{icon:b.c})));!0===this.state.currentlyEditingRating&&(t=s.a.createElement("div",{className:"rating-area"},s.a.createElement(C,{setRating:this.setRating,defaultRating:this.state.bookshelfRating}))),!1===this.state.currentlyEditingRating&&0===this.state.bookshelfRating&&(t=s.a.createElement("div",{className:"rating-area"},s.a.createElement("span",{className:"edit-book-subtle-link",onClick:this.currentlyEditingRating},"Set Rating")," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingRating},s.a.createElement(h.a,{icon:b.b})))),console.log(this.props.book);var a=s.a.createElement("div",{className:"date-area"},"Date Completed: ",this.props.dateCompleted," ",s.a.createElement("span",{className:"edit-icon",title:"Edit Date",onClick:this.currentlyEditingDate},s.a.createElement(h.a,{icon:b.b}))," ",s.a.createElement("span",{className:"edit-icon remove",onClick:this.resetTimestamp,title:"Remove Date"},s.a.createElement(h.a,{icon:b.c})));0===this.props.book.bookshelfTimestamp&&(a=s.a.createElement("div",{className:"date-area"},s.a.createElement("span",{className:"edit-book-subtle-link",onClick:this.currentlyEditingDate},"Set Date")," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingDate},s.a.createElement(h.a,{icon:b.b})))),!0===this.state.currentlyEditingDate&&(a=s.a.createElement("div",{id:"date-picker-area",className:"date-area"},s.a.createElement($,{setBookTimestamp:this.props.setBookTimestamp,book:this.props.book})));var o=s.a.createElement("div",{className:"genre-area"},"Genre: ",this.state.genre," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingGenre,title:"Edit Genre"},s.a.createElement(h.a,{icon:b.b}))," ",s.a.createElement("span",{className:"edit-icon remove",onClick:this.resetGenre,title:"Remove Genre"},s.a.createElement(h.a,{icon:b.c})));null!==this.state.genre&&void 0!==this.state.genre&&""!==this.state.genre||(o=s.a.createElement("div",{className:"genre-area"},s.a.createElement("span",{className:"edit-book-subtle-link",onClick:this.currentlyEditingGenre},"Set Genre")," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingGenre},s.a.createElement(h.a,{icon:b.b})))),!0===this.state.currentlyEditingGenre&&(o=s.a.createElement("div",{className:"genre-area"},s.a.createElement(_,{genres:this.props.genres,setGenre:this.setGenre,defaultGenre:this.state.genre})));var n=null;void 0!==this.state.tags&&""!==this.state.tags&&(console.log(this.state.tags),n=this.state.tags.map((function(e){return s.a.createElement("span",{className:"single-tag",key:X.generate()},e)})));var r=s.a.createElement("div",{className:"tag-area"},"Tags: ",n," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingTags,title:"Edit Tags"},s.a.createElement(h.a,{icon:b.b}))," ",s.a.createElement("span",{className:"edit-icon remove",onClick:this.resetTags,title:"Remove All Tags"},s.a.createElement(h.a,{icon:b.c})));return null!==this.state.tags&&void 0!==this.state.tags&&""!==this.state.tags&&this.state.tags!==[]||(r=s.a.createElement("div",{className:"tag-area"},s.a.createElement("span",{className:"edit-book-subtle-link",onClick:this.currentlyEditingTags},"Add Tags")," ",s.a.createElement("span",{className:"edit-icon",title:"Add Tags Now",onClick:this.currentlyEditingTags},s.a.createElement(h.a,{icon:b.b})))),!0===this.state.currentlyEditingTags&&(r=s.a.createElement("div",{className:"tag-area"},s.a.createElement(J,{allTags:this.props.tags,setTags:this.setTags,defaultTags:this.state.tags,setBookTags:this.props.setBookTags,book:this.props.book,addNewTag:this.props.addNewTag}))),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"modal-info-line modal-summary-rating-area"},t),s.a.createElement("div",{className:"modal-info-line modal-summary-date-finished-area"},a),this.props.useGenres&&s.a.createElement("div",{className:"modal-info-line modal-summary-genre-area"},o),this.props.useTags&&s.a.createElement("div",{className:"modal-info-line modal-summary-tag-area"},r),s.a.createElement(Y.a,null,s.a.createElement(Y.a.Toggle,{onClick:this.customToggle,as:W.a,variant:"link",eventKey:"0",className:"already-read-description-toggle"},!0===this.state.viewDescription&&s.a.createElement("h3",null,"View Description \u2013"),!1===this.state.viewDescription&&s.a.createElement("h3",null,"View Description +")),s.a.createElement(Y.a.Collapse,{eventKey:"0"},s.a.createElement("div",{className:"book-description",dangerouslySetInnerHTML:{__html:e}}))))}}]),t}(s.a.Component),te=a(47),ae=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).book=a.props.book,a.id=a.book.id,a.bookshelfRating=a.book.bookshelfRating,a.defaultDate=a.props.defaultDate,a.bookshelfGenre=a.book.genre,a.bookshelfTags=a.book.tags,a.editThisBook=function(e){e.preventDefault();var t=a.props.book;console.log("editThisBook -----------------------------------"),console.log(t),console.log("Rating: "+a.bookshelfRating),console.log("Timestamp: "+a.bookshelfTimestamp),console.log("Genre: "+a.bookshelfGenre),console.log("Tags: "+a.bookshelfTags),t.bookshelfRating=a.bookshelfRating,t.bookshelfTimestamp=a.state.bookshelfTimestamp,void 0!==a.bookshelfRating?t.bookshelfRating=a.bookshelfRating:t.bookshelfRating=0,void 0!==a.bookshelfTimestamp?t.bookshelfTimestamp=a.bookshelfTimestamp:t.bookshelfTimestamp=0,void 0!==a.bookshelfGenre?t.genre=a.bookshelfGenre:t.genre="",void 0!==a.bookshelfTags?t.tags=a.bookshelfTags:t.tags="";var o=a.props.currentView;if(console.log(a.props.currentView),"searchResults"===a.props.currentView&&a.state.tags){var s=a.state.tags,n=[];s.length>0&&null!==s&&(n=s.map((function(e){return e.value}))),t.tags=n,console.log(t.tags)}a.props.newImprovedEditBook(t,o),a.props.closeModal()},a.setRating=function(e){e?(a.bookshelfRating=e.value,a.setState({bookshelfRating:e.value})):a.setState({bookshelfRating:""})},a.setGenre=function(e){e?(a.bookshelfGenre=e.value,a.setState({genre:e.value})):(a.bookshelfGenre=void 0,a.setState({genre:""}))},a.getCompletedDate=function(e){console.log("Completed DATE: "+a.bookshelfTimestamp);var t=parseInt(new Date(e).getTime().toFixed(0));console.log(t),a.bookshelfTimestamp=t},a.removeDate=function(){console.log("removeDate"),a.bookshelfTimestamp=0,a.setState({dateRemoved:!0,showDatePicker:!1})},a.showDate=function(){a.bookshelfTimestamp=parseInt((new Date).getTime().toFixed(0)),a.setState({dateRemoved:!1,showDatePicker:!0})},a.currentlyEditingTags=function(){console.log("currentlyEditingTags"),console.log("POSSIBLE TAGS"),console.log(a.props.tags),a.setState({currentlyEditingTags:!0})},a.currentlyEditingGenre=function(){console.log("currentlyEditingGenre"),a.setState({currentlyEditingGenre:!0})},a.customToggle=function(){a.setState((function(e){return{viewDescription:!e.viewDescription}}))},a.handleCreateLabel=function(e,t){return console.log("handleCreateLabel"),'Create new tag: "'+e+'"'},a.addTagToState=function(e){console.log(e),a.setState({tags:e,madeChange:!0})},a.handleTagsSubmit=function(e){e.preventDefault(),console.log("HANDLE SUBMIT TAGS"),console.log(a.state.tags);var t=a.state.tags,o=[];t.length>0&&null!==t&&(o=t.map((function(e){return e.value}))),console.log(o),a.props.addNewTag(o)},a.state={currentlyEditing:!0,book:a.props.book,currentlyEditingGenre:!1,currentlyEditingTags:!1,genre:a.props.book.genre,tags:a.props.book.tags,dateRemoved:!1,showDatePicker:!0,viewDescription:!1,madeTagChange:!1,bookshelfTimestamp:0},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){"No Date Set"===this.props.defaultDate?this.setState({showDatePicker:!1,bookshelfTimestamp:0}):this.setState({bookshelfTimestamp:parseInt((new Date).getTime().toFixed(0))})}},{key:"render",value:function(){console.log("NEW BOOK FORM, Current book: "+JSON.stringify(this.props.book)),console.log(this.props.genres),console.log(this.props.currentView);var e=this.bookshelfRating,t=this.bookshelfTimestamp,a=this.props.book.description,o=s.a.createElement("div",{className:"genre-area"},"Genre: ",this.state.genre," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingGenre,title:"Edit Genre"},s.a.createElement(h.a,{icon:b.b}))," ",s.a.createElement("span",{className:"edit-icon remove",onClick:this.resetGenre,title:"Remove Genre"},s.a.createElement(h.a,{icon:b.c})));null!==this.state.genre&&void 0!==this.state.genre&&""!==this.state.genre||(o=s.a.createElement("div",{className:"genre-area"},s.a.createElement("span",{className:"edit-book-subtle-link",onClick:this.currentlyEditingGenre},"Set Genre")," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingGenre},s.a.createElement(h.a,{icon:b.b})))),!0===this.state.currentlyEditingGenre&&(o=s.a.createElement("div",{className:"genre-area"},s.a.createElement(_,{genres:this.props.genres,setGenre:this.setGenre,defaultGenre:this.state.genre})));var n=this.props.tags,r=this.state.tags;this.props.defaultTags;console.log(n);var l=[];void 0!==n&&n.map((function(e,t){return l.push({value:e,label:e})})),void 0!==this.state.tags&&""!==this.state.tags&&(r=this.state.tags.map((function(e){return s.a.createElement("span",{className:"single-tag",key:te.generate()},e)})));var i=s.a.createElement("div",{className:"tag-area"},"Tags: ",r," ",s.a.createElement("span",{className:"edit-icon",onClick:this.currentlyEditingTags,title:"Edit Tags"},s.a.createElement(h.a,{icon:b.b}))," ",s.a.createElement("span",{className:"edit-icon remove",onClick:this.resetTags,title:"Remove All Tags"},s.a.createElement(h.a,{icon:b.c})));return null!==this.state.tags&&void 0!==this.state.tags&&""!==this.state.tags&&this.state.tags!==[]||(i=s.a.createElement("div",{className:"tag-area"},s.a.createElement("span",{className:"edit-book-subtle-link",onClick:this.currentlyEditingTags},"Add Tags")," ",s.a.createElement("span",{className:"edit-icon",title:"Add Tags Now",onClick:this.currentlyEditingTags},s.a.createElement(h.a,{icon:b.b})))),!0===this.state.currentlyEditingTags&&(i=s.a.createElement("div",{className:"tag-area"},s.a.createElement(q.a,{isMulti:!0,placeholder:"Select Tags",options:l,isClearable:!0,isSearchable:!0,formatCreateLabel:this.handleCreateLabel,onChange:this.addTagToState}),!0===this.state.madeChange&&s.a.createElement("button",{className:"add-tags",onClick:this.handleTagsSubmit},"Update Tags"))),console.log(this.props.book),"searchResults"===this.props.currentView&&(console.log("searchResults"),a=this.props.book.volumeInfo.description,console.log(a)),s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{className:"edit-book clb-updated",onSubmit:this.editThisBook},s.a.createElement("div",{className:"book-rating-area"},s.a.createElement(C,{setRating:this.setRating,defaultRating:e})),s.a.createElement("div",{className:"book-date-area"},!0===this.state.showDatePicker&&s.a.createElement(s.a.Fragment,null,s.a.createElement(D,{bookshelfTimestamp:t,getCompletedDate:this.getCompletedDate}),s.a.createElement("span",{className:"edit-icon remove",onClick:this.removeDate,title:"Remove Date"},s.a.createElement(h.a,{icon:b.c}))),!1===this.state.showDatePicker&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"edit-book-subtle-link",onClick:this.showDate},"Set Date")," ",s.a.createElement("span",{className:"edit-icon",onClick:this.showDate}," ",s.a.createElement(h.a,{icon:b.b})))),this.props.useGenres&&s.a.createElement("div",{className:"modal-info-line modal-summary-genre-area"},o),this.props.useTags&&s.a.createElement("div",{className:"modal-info-line modal-summary-tag-area"},i),s.a.createElement("button",{type:"submit",className:"update-this-book"},"Save Book Info & Add to Your Already Read Shelf")),s.a.createElement(Y.a,null,s.a.createElement(Y.a.Toggle,{onClick:this.customToggle,as:W.a,variant:"link",eventKey:"0",className:"already-read-description-toggle"},!0===this.state.viewDescription&&s.a.createElement("h3",null,"View Description \u2013"),!1===this.state.viewDescription&&s.a.createElement("h3",null,"View Description +")),s.a.createElement(Y.a.Collapse,{eventKey:"0"},s.a.createElement("div",{className:"book-description",dangerouslySetInnerHTML:{__html:a}}))))}}]),t}(s.a.Component);function oe(e){var t=s.a.useState(!1),a=Object(N.a)(t,2),o=a[0],n=a[1],r=function(){return n(!1)},l=function(){return n(!0)},i=!1,c=e.book,d=e.bookCoverModal,g=e.bookTitleModal,m=e.newBookForm,u=null,p=null,f=null,b=!1,v=null,E=null,T=null,R=null,y=null,S=null,w=null,I=null,C=null,F=null,O=e.defaultDate;if(void 0!==e.searchResult&&(""!==e.description&&void 0!==e.description?F=s.a.createElement("div",{className:"saved-for-later-description-area"},s.a.createElement("h3",{className:"saved-for-later-description-headline"},"Description"),s.a.createElement("div",{className:"saved-for-later-text"},e.description)):e.book.description),!0!==e.searchResult){if(p=c.title,void 0!==c.subtitle&&(b=!0,E=" has-subtitle",f=s.a.createElement("h3",{className:"book-subtitle"},c.subtitle)),void 0!==c.authors&&(v=c.authors),c.categories,y=c.publishedDate,S=c.pageCount,c.bookshelfRating,w=c.bookshelfTimestamp,0,"Today"===O&&(I=new Date(w).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"})),void 0!==(C=c.genre)&&null!==C||(C="Not Assigned"),u=void 0==c.coverImg||null==c.coverImg?"https://firebasestorage.googleapis.com/v0/b/bookshelf-9d11e.appspot.com/o/images%2F400px%20x%20600px-r01BookNotPictured.jpg?alt=media&token=772367ce-e89a-400d-95fe-f76e9ea65385":c.coverImg,void 0!==c.authors){if(1===v.length&&(T="By "+v),2===v.length&&(T="By "+v.join(" & ")),v.length>2&&(T="By "+v.join(", ")),y){y.toString();R=" ("+y.substring(0,4)+")"}T=b?s.a.createElement("div",{className:"authors"+E},T,", ",S," pages ",R):s.a.createElement("div",{className:"authors"},T,", ",S," pages ",R)}if(y)R="Date: "+y.toString()}else if(void 0!==c.volumeInfo){if(u=e.coverImageURL,p=c.volumeInfo.title,void 0!==c.volumeInfo.subtitle&&(b=!0,E=" has-subtitle",f=s.a.createElement("h3",{className:"book-subtitle"},c.volumeInfo.subtitle)),void 0!==c.volumeInfo.authors&&(v=c.volumeInfo.authors),void 0!==c.volumeInfo.description&&(!1===i?"+":!0===i&&"\u2013"),c.volumeInfo.categories,y=c.publishedDate,S=c.volumeInfo.pageCount,y){y.toString();R=" ("+y.substring(0,4)+")"}void 0!==c.volumeInfo.authors&&(1===v.length&&(T="By "+v),2===v.length&&(T="By "+v.join(" & ")),v.length>2&&(T="By "+v.join(", ")),T=b?s.a.createElement("div",{className:"authors"+E},T,", ",S," pages ",R):s.a.createElement("div",{className:"authors"},T,", ",S," pages ",R))}if(!0!==e.searchResult&&(!0!==e.alreadyRead?s.a.createElement(A,{book:c,hideRating:!0,hideDate:!0,bookshelfRating:e.bookshelfRating,bookshelfNote:e.bookshelfNote,bookshelfTimestamp:e.bookshelfTimestamp,editBook:e.editBook}):e.alreadyRead&&s.a.createElement(A,{book:c,bookshelfRating:e.bookshelfRating,bookshelfNote:e.bookshelfNote,bookshelfTimestamp:e.bookshelfTimestamp,editBook:e.editBook})),g)return!1===i?"+":!0===i&&"\u2013",null!==u&&u.startsWith("http://")&&(u=u.replace("http://","https://")),s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{onClick:l,className:"card-book-title"},s.a.createElement("h2",{className:"book-title"},p)),s.a.createElement(B.a,{show:o,onHide:r,className:"single-book-modal font-"+e.settingsFont+" color-"+e.settingsColor},s.a.createElement(B.a.Header,{closeButton:!0},s.a.createElement(B.a.Title,{className:"single-book-title"},p)),s.a.createElement(B.a.Body,null,s.a.createElement("div",{className:"small-thumbnail-area"},s.a.createElement("img",{src:u}),!0!==e.searchResult&&s.a.createElement(P,{bookObj:c,updateCoverImg:e.updateCoverImg})),f,T,e.alreadyRead&&s.a.createElement(ee,{book:c,bookshelfRating:e.bookshelfRating,genre:C,dateCompleted:I,useGenres:e.useGenres,useTags:e.useTags,description:e.book.description,setBookRating:e.setBookRating,resetRatingToZero:e.resetRatingToZero,resetTimestampToZero:e.resetTimestampToZero,setBookGenre:e.setBookGenre,genres:e.genres,resetGenreToZero:e.resetGenreToZero,addNewGenre:e.addNewGenre,addNewTag:e.addNewTag,setBookTags:e.setBookTags,tags:e.tags,resetAllTags:e.resetAllTags,setBookTimestamp:e.setBookTimestamp,defaultDate:e.defaultDate}),e.savedForLater&&s.a.createElement("div",{className:"saved-for-later-description-area"},s.a.createElement("h3",{className:"saved-for-later-description-headline"},"Description"),s.a.createElement("div",{className:"saved-for-later-text"},e.book.description)),e.searchResult&&s.a.createElement(s.a.Fragment,null,F)),s.a.createElement(B.a.Footer,null,s.a.createElement("div",{className:"book-meta button-area"},e.alreadyRead&&s.a.createElement(j,{book:c,context:"removeBookFromAlreadyRead",removeBookFromAlreadyRead:e.removeBookFromAlreadyRead}),e.savedForLater&&s.a.createElement(s.a.Fragment,null,s.a.createElement(j,{book:c,removeBook:e.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:e.removeBookFromToRead}),s.a.createElement(G,{book:e.book,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead})),e.searchResult&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"book-meta button-area closearea"},s.a.createElement("button",{onClick:r},"Close")))))));if(d){null!==u&&u.startsWith("http://")&&(u=u.replace("http://","https://"));var D=null;return!0===e.savedForLater&&(D=" saved-for-later"),!0===e.alreadyRead&&(D=" already-read"),!0===e.searchResult&&(D=" search-result"),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"cover-image-area"},s.a.createElement("button",{onClick:l,className:"card-book-cover"},s.a.createElement("img",{src:u,className:"cover-image"}))),s.a.createElement(B.a,{show:o,onHide:r,className:"single-book-modal font-"+e.settingsFont+" color-"+e.settingsColor+D},s.a.createElement(B.a.Header,{closeButton:!0},s.a.createElement(B.a.Title,{className:"single-book-title"},p)),s.a.createElement(B.a.Body,null,s.a.createElement("div",{className:"small-thumbnail-area"},s.a.createElement("img",{src:u}),!0!==e.searchResult&&s.a.createElement(P,{bookObj:c,updateCoverImg:e.updateCoverImg})),f,T,e.alreadyRead&&s.a.createElement(ee,{book:c,bookshelfRating:e.bookshelfRating,genre:C,dateCompleted:I,useGenres:e.useGenres,useTags:e.useTags,description:e.book.description,setBookRating:e.setBookRating,resetRatingToZero:e.resetRatingToZero,resetTimestampToZero:e.resetTimestampToZero,setBookGenre:e.setBookGenre,genres:e.genres,resetGenreToZero:e.resetGenreToZero,addNewGenre:e.addNewGenre,addNewTag:e.addNewTag,setBookTags:e.setBookTags,tags:e.tags,resetAllTags:e.resetAllTags,setBookTimestamp:e.setBookTimestamp,defaultDate:e.defaultDate}),e.searchResult&&s.a.createElement(s.a.Fragment,null,F),e.savedForLater&&s.a.createElement(ae,{book:c,useGenres:e.useGenres,useTags:e.useTags,genres:e.genres,description:e.book.description,resetGenreToZero:e.resetGenreToZero,addNewGenre:e.addNewGenre,addNewTag:e.addNewTag,setBookTags:e.setBookTags,tags:e.tags,resetAllTags:e.resetAllTags,newImprovedEditBook:e.newImprovedEditBook,alreadyRead:e.alreadyRead,currentView:"savedForLater",searchResult:e.searchResult,defaultDate:e.defaultDate})),s.a.createElement(B.a.Footer,null,s.a.createElement("div",{className:"book-meta button-area"},e.alreadyRead&&s.a.createElement(j,{book:c,context:"removeBookFromAlreadyRead",removeBookFromAlreadyRead:e.removeBookFromAlreadyRead}),e.savedForLater&&s.a.createElement(s.a.Fragment,null,s.a.createElement(j,{book:c,removeBook:e.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:e.removeBookFromToRead}),s.a.createElement("div",{className:"book-meta button-area close-without-saving-area"},s.a.createElement("button",{onClick:r},"Close without Saving")),s.a.createElement(B.a,{show:o,onHide:r,className:"single-book-modal font-"+e.settingsFont+" color-"+e.settingsColor+D},s.a.createElement(B.a.Header,{closeButton:!0},s.a.createElement(B.a.Title,{className:"single-book-title"},p)),s.a.createElement(B.a.Body,null,s.a.createElement("div",{className:"small-thumbnail-area"},s.a.createElement("img",{src:u}),!0!==e.searchResult&&s.a.createElement(P,{bookObj:c,updateCoverImg:e.updateCoverImg})),f,T,s.a.createElement(ae,{book:c,useGenres:e.useGenres,useTags:e.useTags,genres:e.genres,resetGenreToZero:e.resetGenreToZero,addNewGenre:e.addNewGenre,addNewTag:e.addNewTag,setBookTags:e.setBookTags,tags:e.tags,resetAllTags:e.resetAllTags,newImprovedEditBook:e.newImprovedEditBook,currentView:"savedForLater",defaultDate:e.defaultDate})),s.a.createElement(B.a.Footer,null,s.a.createElement("div",{className:"book-meta button-area close-without-saving-area"},s.a.createElement("button",{onClick:r},"Close without Saving"))))),e.searchResult&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"book-meta button-area closearea"},s.a.createElement("button",{onClick:r},"Close")))))))}if(m){null!==u&&u.startsWith("http://")&&(u=u.replace("http://","https://"));var L=null;return e.searchResult?L="searchResults":e.savedForLater&&(L="savedForLater"),s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{onClick:l,className:"read-action already-read",title:"Add to your Already Read shelf"},s.a.createElement(h.a,{icon:k.a})),s.a.createElement(B.a,{show:o,onHide:r,className:"single-book-modal font-"+e.settingsFont+" color-"+e.settingsColor+" new-book-form"},s.a.createElement(B.a.Header,{closeButton:!0},s.a.createElement(B.a.Title,{className:"single-book-title"},p)),s.a.createElement(B.a.Body,null,s.a.createElement("div",{className:"small-thumbnail-area"},s.a.createElement("img",{src:u}),!0!==e.searchResult&&s.a.createElement(P,{bookObj:c,updateCoverImg:e.updateCoverImg})),f,T,s.a.createElement(ae,{book:c,useGenres:e.useGenres,useTags:e.useTags,genres:e.genres,resetGenreToZero:e.resetGenreToZero,addNewGenre:e.addNewGenre,addNewTag:e.addNewTag,setBookTags:e.setBookTags,tags:e.tags,resetAllTags:e.resetAllTags,newImprovedEditBook:e.newImprovedEditBook,currentView:L,description:e.book.description,closeModal:r,defaultDate:e.defaultDate})),s.a.createElement(B.a.Footer,null,s.a.createElement("div",{className:"book-meta button-area close-without-saving-area"},s.a.createElement("button",{onClick:r},"Close without Saving")))))}}var se=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).clickRemoveBookSuggested=function(e){e.preventDefault();var t=a.props.book;console.log(t),a.props.removeBookFromSuggestions(t)},a.state={},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"read-action remove-book",title:"Don't Suggest this Book Again",onClick:this.clickRemoveBookSuggested},s.a.createElement(h.a,{icon:b.d})))}}]),t}(s.a.Component),ne=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).showNewBookForm=function(){a.setState({newBookForm:!0})},a.slugify=function(e){return e.toString().toLowerCase().normalize("NFD").trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")},a.state={originalBookJSON:null,connected:!1,newBookForm:!1},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state.originalBookJSON;JSON.stringify(e);if(!1===this.state.connected&&(e=this.props.book),null!==e){var t=null,a=null,o=null,n=null;if(e.title,void 0!==e.subtitle&&e.subtitle,void 0!==e.authors&&(t=e.authors),e.categories,o=e.publishedDate,void 0!==e.authors&&(1===t.length&&(a="By "+t),2===t.length&&(a="By "+t.join(" & ")),t.length>2&&(a="By "+t.join(", "))),o)"Date: "+o.toString();var r=this.props.book.bookshelfRating,l=this.props.book.bookshelfNote,i=this.props.book.bookshelfTimestamp,c=null;this.props.searchResult&&(n=e.volumeInfo.description,void 0!==e.volumeInfo&&(void 0!==e.volumeInfo.imageLinks&&(c=e.volumeInfo.imageLinks.thumbnail,c=e.volumeInfo.imageLinks.large,void 0!==e.volumeInfo.imageLinks.large&&""!==e.volumeInfo.imageLinks.large||(c=e.volumeInfo.imageLinks.medium),void 0!==e.volumeInfo.imageLinks.medium&&""!==e.volumeInfo.imageLinks.medium||(c=e.volumeInfo.imageLinks.small),void 0!==e.volumeInfo.imageLinks.small&&""!==e.volumeInfo.imageLinks.small||(c=e.volumeInfo.imageLinks.smallThumbnail),void 0===e.volumeInfo.imageLinks.smallThumbnail&&(c=e.volumeInfo.imageLinks.thumbnail)),void 0!==e.volumeInfo.authors&&(1===(t=e.volumeInfo.authors).length&&(a="By "+t),2===t.length&&(a="By "+t.join(" & ")),t.length>2&&(a="By "+t.join(", ")))));var d=null;return void 0!==e.genre&&""!==e.genre&&(d=this.slugify(e.genre)),s.a.createElement("div",{className:"book-card",id:e.id,"data-rating":e.bookshelfRating,"data-genre":d},s.a.createElement(oe,{settingsFont:this.props.settingsFont,settingsColor:this.props.settingsColor,bookCoverModal:!0,book:e,alreadyRead:this.props.alreadyRead,savedForLater:this.props.savedForLater,coverImageURL:c,addBookToRead:this.props.addBookToRead,addBookAlreadyRead:this.props.addBookAlreadyRead,editBook:this.props.editBook,bookshelfRating:r,bookshelfNote:l,bookshelfTimestamp:i,removeBookFromAlreadyRead:this.props.removeBookFromAlreadyRead,removeBookFromToRead:this.props.removeBookFromToRead,searchResult:this.props.searchResult,moveBooktoAlreadyRead:this.props.moveBooktoAlreadyRead,updateCoverImg:this.props.updateCoverImg,useGenres:this.props.useGenres,useTags:this.props.useTags,setBookRating:this.props.setBookRating,resetRatingToZero:this.props.resetRatingToZero,resetTimestampToZero:this.props.resetTimestampToZero,setBookGenre:this.props.setBookGenre,genres:this.props.genres,resetGenreToZero:this.props.resetGenreToZero,addNewGenre:this.props.addNewGenre,addNewTag:this.props.addNewTag,setBookTags:this.props.setBookTags,tags:this.props.tags,resetAllTags:this.props.resetAllTags,setBookTimestamp:this.props.setBookTimestamp,description:n,defaultDate:this.props.defaultDate,createNotification:this.props.createNotification,newImprovedEditBook:this.props.newImprovedEditBook}),s.a.createElement(oe,{settingsFont:this.props.settingsFont,settingsColor:this.props.settingsColor,bookTitleModal:!0,book:e,alreadyRead:this.props.alreadyRead,savedForLater:this.props.savedForLater,coverImageURL:c,addBookToRead:this.props.addBookToRead,addBookAlreadyRead:this.props.addBookAlreadyRead,editBook:this.props.editBook,bookshelfRating:r,bookshelfNote:l,bookshelfTimestamp:i,removeBookFromAlreadyRead:this.props.removeBookFromAlreadyRead,removeBookFromToRead:this.props.removeBookFromToRead,searchResult:this.props.searchResult,moveBooktoAlreadyRead:this.props.moveBooktoAlreadyRead,updateCoverImg:this.props.updateCoverImg,useGenres:this.props.useGenres,useTags:this.props.useTags,setBookRating:this.props.setBookRating,resetRatingToZero:this.props.resetRatingToZero,resetTimestampToZero:this.props.resetTimestampToZero,setBookGenre:this.props.setBookGenre,genres:this.props.genres,resetGenreToZero:this.props.resetGenreToZero,addNewGenre:this.props.addNewGenre,addNewTag:this.props.addNewTag,setBookTags:this.props.setBookTags,tags:this.props.tags,resetAllTags:this.props.resetAllTags,setBookTimestamp:this.props.setBookTimestamp,description:n,defaultDate:this.props.defaultDate,createNotification:this.props.createNotification,newImprovedEditBook:this.props.newImprovedEditBook}),s.a.createElement("div",{className:"book-meta-area"},s.a.createElement("div",{className:"book-meta author"},a),s.a.createElement("div",{className:"book-meta button-area"},!0===this.props.alreadyRead&&s.a.createElement(s.a.Fragment,null,s.a.createElement(H,{bookshelfRating:r})),!0===this.props.toRead&&s.a.createElement(s.a.Fragment,null,s.a.createElement(j,{book:this.props.book,removeBook:this.props.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:this.props.removeBookFromToRead}),s.a.createElement(oe,{settingsFont:this.props.settingsFont,settingsColor:this.props.settingsColor,bookTitleModal:!1,book:e,alreadyRead:this.props.alreadyRead,savedForLater:this.props.savedForLater,coverImageURL:c,addBookToRead:this.props.addBookToRead,addBookAlreadyRead:this.props.addBookAlreadyRead,editBook:this.props.editBook,bookshelfRating:r,bookshelfNote:l,bookshelfTimestamp:i,removeBookFromAlreadyRead:this.props.removeBookFromAlreadyRead,removeBookFromToRead:this.props.removeBookFromToRead,searchResult:this.props.searchResult,moveBooktoAlreadyRead:this.props.moveBooktoAlreadyRead,updateCoverImg:this.props.updateCoverImg,useGenres:this.props.useGenres,useTags:this.props.useTags,setBookRating:this.props.setBookRating,resetRatingToZero:this.props.resetRatingToZero,resetTimestampToZero:this.props.resetTimestampToZero,setBookGenre:this.props.setBookGenre,genres:this.props.genres,resetGenreToZero:this.props.resetGenreToZero,addNewGenre:this.props.addNewGenre,addNewTag:this.props.addNewTag,setBookTags:this.props.setBookTags,tags:this.props.tags,resetAllTags:this.props.resetAllTags,setBookTimestamp:this.props.setBookTimestamp,description:n,createNotification:this.props.createNotification,defaultDate:this.props.defaultDate,newBookForm:!0,newImprovedEditBook:this.props.newImprovedEditBook})),!0===this.props.searchResult&&s.a.createElement(s.a.Fragment,null,this.props.removeBookFromSuggestions&&s.a.createElement(se,{book:this.props.book,removeBookFromSuggestions:this.props.removeBookFromSuggestions}),s.a.createElement(w,{book:this.props.book,addBookToRead:this.props.addBookToRead}),s.a.createElement(oe,{settingsFont:this.props.settingsFont,settingsColor:this.props.settingsColor,bookTitleModal:!1,book:e,alreadyRead:this.props.alreadyRead,savedForLater:this.props.savedForLater,coverImageURL:c,addBookToRead:this.props.addBookToRead,addBookAlreadyRead:this.props.addBookAlreadyRead,editBook:this.props.editBook,bookshelfRating:r,bookshelfNote:l,bookshelfTimestamp:i,removeBookFromAlreadyRead:this.props.removeBookFromAlreadyRead,removeBookFromToRead:this.props.removeBookFromToRead,searchResult:this.props.searchResult,moveBooktoAlreadyRead:this.props.moveBooktoAlreadyRead,updateCoverImg:this.props.updateCoverImg,useGenres:this.props.useGenres,useTags:this.props.useTags,setBookRating:this.props.setBookRating,resetRatingToZero:this.props.resetRatingToZero,resetTimestampToZero:this.props.resetTimestampToZero,setBookGenre:this.props.setBookGenre,genres:this.props.genres,resetGenreToZero:this.props.resetGenreToZero,addNewGenre:this.props.addNewGenre,addNewTag:this.props.addNewTag,setBookTags:this.props.setBookTags,tags:this.props.tags,resetAllTags:this.props.resetAllTags,setBookTimestamp:this.props.setBookTimestamp,description:n,createNotification:this.props.createNotification,newBookForm:!0,defaultDate:this.props.defaultDate,newImprovedEditBook:this.props.newImprovedEditBook})))))}return"NOT WORKING"}}]),t}(s.a.Component);var re=function(e){var t=e.booksToRead;if(void 0!==t&&0!==t.length){var a=Object(R.a)(t).sort((function(e,t){return e.bookshelfTimestamp>t.bookshelfTimestamp?-1:e.bookshelfTimestamp<t.bookshelfTimestamp?1:e.title>t.title?1:e.title<t.title?-1:void 0})).slice(0,4);return s.a.createElement("div",{className:"recently-added-to-read-area"},s.a.createElement("h2",{className:"section-title"},"Up Next"),s.a.createElement("div",{className:"landing-explainer"},"Recently added to your ",s.a.createElement("strong",null,"To Read")," shelf"),s.a.createElement("div",{className:"results-grid four-col"},a.map((function(t,a){return s.a.createElement(ne,{key:t.id,book:t,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromToRead:e.removeBookFromToRead,addNewImagesToRead:e.addNewImagesToRead,savedForLater:!0,toRead:!0,settingsFont:e.settingsFont,settingsColor:e.settingsColor,updateCoverImg:e.updateCoverImg,useGenres:e.useGenres,useTags:e.useTags,genres:e.genres,tags:e.tags,defaultDate:e.defaultDate,newImprovedEditBook:e.newImprovedEditBook})}))))}return s.a.createElement("div",{className:"recently-added-to-read-area nothing-yet"},s.a.createElement("p",null,"Time to ",s.a.createElement("a",{href:"/bookshelf/#search"},"add more books")," to your shelf!"))};var le=function(e){var t=e.booksAlreadyRead;if(void 0!==t&&0!==t.length){var a=Object(R.a)(t).sort((function(e,t){return e.bookshelfTimestamp>t.bookshelfTimestamp?-1:e.bookshelfTimestamp<t.bookshelfTimestamp?1:e.title>t.title?1:e.title<t.title?-1:void 0})).slice(0,4);return s.a.createElement("div",{className:"recently-added-already-read-area"},s.a.createElement("h2",{className:"section-title"},"Just Finished"),s.a.createElement("div",{className:"landing-explainer"},"Recently added to your ",s.a.createElement("strong",null,"Already Read")," shelf"),s.a.createElement("div",{className:"results-grid four-col"},a.map((function(t,a){return s.a.createElement(ne,{key:t.id,book:t,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromAlreadyRead:e.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.addNewImagesAlreadyRead,alreadyRead:!0,settingsFont:e.settingsFont,settingsColor:e.settingsColor,updateCoverImg:e.updateCoverImg,setBookRating:e.setBookRating,resetRatingToZero:e.resetRatingToZero,resetTimestampToZero:e.resetTimestampToZero,setBookTimestamp:e.setBookTimestamp})}))))}return s.a.createElement("div",{className:"recently-added-already-read-area nothing-yet"})};var ie=function(e){return s.a.createElement("div",{className:"landing-page-area single-page"},e.notification&&s.a.createElement("div",{className:"notification-area"},e.notification),s.a.createElement(re,{booksToRead:e.booksToRead,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromToRead:e.removeBookFromToRead,addNewImagesToRead:e.addNewImagesToRead,settingsFont:e.settingsFont,settingsColor:e.settingsColor,updateCoverImg:e.updateCoverImg,useGenres:e.useGenres,useTags:e.useTags,genres:e.genres,tags:e.tags,defaultDate:e.defaultDate,newImprovedEditBook:e.newImprovedEditBook}),s.a.createElement(le,{booksAlreadyRead:e.booksAlreadyRead,editBook:e.editBook,removeBookFromAlreadyRead:e.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.addNewImagesAlreadyRead,settingsFont:e.settingsFont,settingsColor:e.settingsColor,updateCoverImg:e.updateCoverImg,setBookRating:e.setBookRating,resetRatingToZero:e.resetRatingToZero,resetTimestampToZero:e.resetTimestampToZero,setBookTimestamp:e.setBookTimestamp}))},ce=function(e){return s.a.createElement("div",{className:"form-group"},s.a.createElement("input",Object.assign({className:"form-control"},e)))},de=a(94),ge=a.n(de),me=function(e){return ge.a.get("https://www.googleapis.com/books/v1/volumes?q="+e+"&maxResults=36&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU")},ue=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={books:[],noResults:!1,notification:a.props.notification},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.data;e&&e.results.length>0?this.setState({books:e.results.filter((function(e,t){return t<40}))}):this.setState({noResults:!0})}},{key:"render",value:function(){var e=this,t=null;if(!0!==this.state.noResults&&this.props.notification){var a=Date.now();this.props.notificationTimestamp>a-1e3&&(t=s.a.createElement("div",{className:"notification-area"},this.props.notification))}return s.a.createElement("div",{className:"results-page-area single-page"},t,s.a.createElement("h1",null,"Search Results"),s.a.createElement("div",{className:"results-grid"},this.state.books.map((function(t,a){return s.a.createElement(ne,{key:t.id,book:t,searchResult:!0,addBookAlreadyRead:e.props.addBookAlreadyRead,addBookToRead:e.props.addBookToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,updateCoverImg:e.props.updateCoverImg,useGenres:e.props.useGenres,useTags:e.props.useTags,genres:e.props.genres,tags:e.props.tags,addNewTag:e.props.addNewTag,setBookTags:e.props.setBookTags,defaultDate:e.props.defaultDate,newImprovedEditBook:e.props.newImprovedEditBook,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead})}))))}}]),t}(s.a.Component),pe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,o=t.name,s=t.value;a.setState(Object(c.a)({},o,s))},a.handleFormSubmit=function(e){if(e.preventDefault(),a.state.title){var t=a.state.title.trim();console.log(t),me(t).then((function(e){console.log(e.data.items),a.setState({toResults:!0,results:e.data.items})})).catch((function(e){return console.log(e)}))}},a.state={title:"",toResults:!1,results:[]},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){console.log("Search mounted")}},{key:"render",value:function(){return console.log(this.state.title),this.state.toResults?s.a.createElement(S.a,{to:{pathname:"/results",data:{results:this.state.results}}}):s.a.createElement("div",{className:"search-page-area single-page"},s.a.createElement("h1",null,"Search for Books"),s.a.createElement("form",{id:"book-title-search"},s.a.createElement(ce,{value:this.state.title,onChange:this.handleInputChange,name:"title",label:"Book Title",placeholder:"Search for a book title or author..."}),s.a.createElement("button",{onClick:this.handleFormSubmit,className:"btn btn-info"},"Find It")),s.a.createElement("div",{className:"recommended-section"},s.a.createElement("button",{id:"show-recommended"},s.a.createElement("a",{href:"#/recommended"},"Get Ideas Based on Your Bookshelf"))))}}]),t}(s.a.Component),he=a(30),fe=(a(47),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={authors:a.props.authors,results:[],searching:!0},a.forceUpdateHandler=a.forceUpdateHandler.bind(Object(he.a)(a)),a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.authors;console.log("RecommendationsSection mounted"),console.log(t);var a=t.map((function(e){return e.name}));this.setState({authors:a}),console.log(a),a&&a.forEach((function(t){console.log(t),e.setState({searching:!0}),me(t).then((function(t){e.setState({results:[].concat(Object(R.a)(e.state.results),Object(R.a)(t.data.items)),searching:!1})})).catch((function(e){return console.log(e)}))}))}},{key:"forceUpdateHandler",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this;console.log(this.props.authors),console.log(this.props.removedFromSuggestions);var t=this.state.results,a=this.state.authors,o=this.props.removedFromSuggestions,n=t.filter((function(e){return void 0!==e.volumeInfo.authors?e.volumeInfo.authors.some((function(e){return a.indexOf(e)>=0})):null})),r=this.props.books.map((function(e){return e.id})),l=n.filter((function(e){return!r.includes(e.id)}));console.log(l);var i=l.filter((function(e){return!o.includes(e.id)}));console.log(i);var c=i.filter((function(e){var t="";return e.hasOwnProperty("volumeInfo")&&e.volumeInfo.hasOwnProperty("language")&&(console.log("Test Remove Languages"),console.log(e.volumeInfo.language),t=e.volumeInfo.language),"en"===t}));console.log("removedForeign"),console.log(c),console.log(n),console.log(l),console.log(t),console.log(n);var d=Array.from(new Set(c.map((function(e){return e.id})))).map((function(e){return c.find((function(t){return t.id===e}))}));console.log(d);var g=[];if(console.log(d.length),d.length>24)for(;g.length<24;){var m=Math.floor(Math.random()*d.length);g.includes(m)||g.push(m)}console.log(g);var u=g.map((function(e,t){return d[e]}));return console.log(u),console.log("removedFromSuggestions"+this.props.removedFromSuggestions),s.a.createElement("div",{className:"recommendations-page-area single-page"},s.a.createElement("p",null,"More books by authors that you've liked:"),s.a.createElement("div",{className:"results-grid"},u.map((function(t,a){return s.a.createElement(ne,{key:t.id,book:t,searchResult:!0,addBookAlreadyRead:e.props.addBookAlreadyRead,addBookToRead:e.props.addBookToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,removeBookFromSuggestions:e.props.removeBookFromSuggestions})}))),this.state.results&&s.a.createElement("button",{id:"more-ideas-refresh",onClick:this.forceUpdateHandler},"Get More Ideas"))}}]),t}(s.a.Component)),be=a(47),ve=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={authors:[],calculating:!0},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"removeDuplicates",value:function(e){e.splice.apply(e,[0,e.length].concat(Object(R.a)(new Set(e))))}},{key:"getAverageRating",value:function(e){var t=[];if(void 0===t)return null;for(var a=0;a<e.length;a++)e[a].bookshelfRating>0&&t.push(parseInt(e[a].bookshelfRating));if(0===t.length)return null;var o=t.reduce((function(e,t){return t+e}))/t.length;o.toFixed(2);return o}},{key:"componentDidMount",value:function(){var e=this;console.log("RECOMMENDED MOUNTED");var t=this.props.books;console.log(t);var a=t.map((function(e,t){return e.authors})).flat();this.removeDuplicates(a);console.log(a);var o=a.map((function(a,o){console.log(a);var s=t.filter((function(e){return e.authors.includes(a)&&!0===e.alreadyRead}));console.log(s);var n=e.getAverageRating(s);return{name:a,id:be.generate(),books:s,avgRating:n}}));console.log(o);var s=Object(R.a)(o).filter((function(e){return e.books.length>0&&e.avgRating>2})).sort((function(e,t){return e.avgRating>t.avgRating?-1:e.avgRating<t.avgRating?1:e.name>t.name?1:e.name<t.name?-1:void 0}));console.log(s),this.setState({authors:s,calculating:!1})}},{key:"render",value:function(){var e=this.props.books;return console.log(this.state.authors),s.a.createElement("div",{className:"search-page-area single-page"},s.a.createElement("h1",null,"Ideas for You"),!1===this.state.calculating&&s.a.createElement(fe,{authors:this.state.authors,books:e,removedFromSuggestions:this.props.removedFromSuggestions,removeBookFromSuggestions:this.props.removeBookFromSuggestions,addBookAlreadyRead:this.props.addBookAlreadyRead,addBookToRead:this.props.addBookToRead}))}}]),t}(s.a.Component),ke=function(e){return s.a.createElement("button",{type:"submit",onClick:e.logOutUser,className:"settings-button"},"Log Out")},Ee=function(e){return s.a.createElement("button",{type:"submit",onClick:e.resetPassword,className:"settings-button"},"Change Password via Email Link")},Te=function(e){return s.a.createElement("button",{className:"settings-button delete-account",type:"submit",onClick:function(t){return window.confirm("Are you sure you want to permanelty delete your account? All of your information will be removed. You cannot undo this action.")&&void e.deleteAccount()}},"Delete My Account")},Re=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setColor=function(e){e&&a.props.changeSettingsColor(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.settingsColor;console.log(e);var t=null;"default"===e&&(t="Default (Dark Blue)"),"gray"===e&&(t="Gray"),"green"===e&&(t="Green"),"orange"===e&&(t="Orange"),"purple"===e&&(t="Purple");var a={value:e,label:t};null===e&&(a=null);var o=[{value:"default",label:"Default (Dark Blue)"},{value:"gray",label:"Gray"},{value:"green",label:"Green"},{value:"orange",label:"Orange"},{value:"purple",label:"Purple"}];return a?s.a.createElement(I.a,{placeholder:"Select Color Theme",options:o,defaultValue:a,isSearchable:!0,onChange:this.setColor}):s.a.createElement(I.a,{placeholder:"Select Color Theme",options:o,isSearchable:!0,onChange:this.setColor})}}]),t}(s.a.Component),ye=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setFont=function(e){e&&a.props.changeSettingsFont(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.settingsFont;console.log(e);var t=null;"default"===e&&(t="Default"),"handwritten"===e&&(t="Handwritten"),"typewriter"===e&&(t="Typewriter"),"sans"===e&&(t="Sans Serif"),"serif"===e&&(t="Serif");var a={value:e,label:t};null===e&&(a=null);var o=[{value:"default",label:"Default"},{value:"handwritten",label:"Handwritten"},{value:"typewriter",label:"Typewriter"},{value:"sans",label:"Sans Serif"},{value:"serif",label:"Serif"}];return a?s.a.createElement(I.a,{placeholder:"Select Font",options:o,defaultValue:a,isSearchable:!0,onChange:this.setFont}):s.a.createElement(I.a,{placeholder:"Select Font",options:o,isSearchable:!0,onChange:this.setFont})}}]),t}(s.a.Component),Se=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setBookSize=function(e){e&&a.props.changeSettingsBookSize(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.bookSize;console.log(e);var t=null;"default"===e&&(t="Default (Medium)"),"large"===e&&(t="Large"),"small"===e&&(t="Small");var a={value:e,label:t};null===e&&(a=null);var o=[{value:"default",label:"Default (Medium)"},{value:"large",label:"Large"},{value:"small",label:"Small"}];return a?s.a.createElement(I.a,{placeholder:"Select Cover Size",options:o,defaultValue:a,isSearchable:!0,onChange:this.setBookSize}):s.a.createElement(I.a,{placeholder:"Select Cover Size",options:o,isSearchable:!0,onChange:this.setBookSize})}}]),t}(s.a.Component),Ne=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setUseGenres=function(e){e&&a.props.changeSettingsUseGenres(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.useGenres;console.log(e);var t=null;!0===e&&(t="Yes"),!1===e&&(t="No");var a={value:e,label:t};null===e&&(a=null);var o=[{value:!0,label:"Yes"},{value:!1,label:"No"}];return a?s.a.createElement(I.a,{placeholder:"Select One",options:o,defaultValue:a,isSearchable:!0,onChange:this.setUseGenres}):s.a.createElement(I.a,{placeholder:"Select One",options:o,isSearchable:!0,onChange:this.setUseGenres})}}]),t}(s.a.Component),Be=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setUseTags=function(e){e&&a.props.changeSettingsUseTags(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.useTags;console.log(e);var t=null;!0===e&&(t="Yes"),!1===e&&(t="No");var a={value:e,label:t};null===e&&(a=null);var o=[{value:!0,label:"Yes"},{value:!1,label:"No"}];return a?s.a.createElement(I.a,{placeholder:"Select One",options:o,defaultValue:a,isSearchable:!0,onChange:this.setUseTags}):s.a.createElement(I.a,{placeholder:"Select One",options:o,isSearchable:!0,onChange:this.setUseTags})}}]),t}(s.a.Component),we=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setDefaultDate=function(e){e&&a.props.changeDefaultDate(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.defaultDateSetting;console.log(e);var t={value:e,label:e},a=[{value:"Today",label:"Today"},{value:"No Date Set",label:"No Date Set"}];return e?s.a.createElement(I.a,{placeholder:"Select One",options:a,defaultValue:t,isSearchable:!0,onChange:this.setDefaultDate}):s.a.createElement(I.a,{placeholder:"Select One",options:a,isSearchable:!0,onChange:this.setDefaultDate})}}]),t}(s.a.Component),Ie=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).resetPassword=function(){var e=Z.auth(),t=a.props.loggedInEmail;e.sendPasswordResetEmail(t).then((function(){console.log("Reset password email sent")})).catch((function(e){console.log("ERROR: could not send reset password email")})),a.setState({emailedResetLink:!0})},a.deleteAccount=function(){var e=Z.auth().currentUser;e.delete().then((function(){console.log("Current User PERMANENTLY DELETED")})).catch((function(e){console.log("ERROR: could not delete current user")})),a.props.permanentlyDeleteUserAndInfo(e)},a.state={emailedResetLink:!1},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return console.log(this.props.defaultDate),s.a.createElement("div",{className:"settings-page-area single-page"},s.a.createElement("h1",null,"Settings"),s.a.createElement("div",{className:"color-font-area"},s.a.createElement("div",{className:"select-color-area"},s.a.createElement("h4",null,"Select Color"),s.a.createElement(Re,{settingsColor:this.props.settingsColor,changeSettingsColor:this.props.changeSettingsColor})),s.a.createElement("div",{className:"select-font-area"},s.a.createElement("h4",null,"Select Font"),s.a.createElement(ye,{settingsFont:this.props.settingsFont,changeSettingsFont:this.props.changeSettingsFont}))),s.a.createElement("div",{className:"color-font-area"},s.a.createElement("div",{className:"select-color-area"},s.a.createElement("h4",null,"Book Cover Size"),s.a.createElement(Se,{changeSettingsBookSize:this.props.changeSettingsBookSize,bookSize:this.props.bookSize})),s.a.createElement("div",{className:"select-font-area"},s.a.createElement("h4",null,"View Genres?"),s.a.createElement(Ne,{changeSettingsUseGenres:this.props.changeSettingsUseGenres,useGenres:this.props.useGenres}))),s.a.createElement("div",{className:"color-font-area"},s.a.createElement("div",{className:"select-color-area"},s.a.createElement("h4",null,"View Tags?"),s.a.createElement(Be,{changeSettingsUseTags:this.props.changeSettingsUseTags,useTags:this.props.useTags})),s.a.createElement("div",{className:"select-color-area"},s.a.createElement("h4",null,"Date Default"),s.a.createElement(we,{changeDefaultDate:this.props.changeDefaultDate,defaultDateSetting:this.props.defaultDate}))),s.a.createElement("p",null,"Currently logged in as: ",this.props.loggedInEmail),s.a.createElement("div",{className:"settings-action-buttons-area"},s.a.createElement(ke,{logOutUser:this.props.logOutUser}),s.a.createElement(Ee,{resetPassword:this.resetPassword}),s.a.createElement(Te,{deleteAccount:this.deleteAccount})))}}]),t}(s.a.Component);var Ce=function(){return s.a.createElement("div",{className:"settings-page-area"},s.a.createElement("h1",null,"Not Found - please go back to the homepage."))},Fe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setView=function(e){e&&a.props.changeToReadView(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.defaultView;console.log(e);var t=null;"date"===e&&(t="Date (Recently Added)"),"alphabetical"===e&&(t="Alphabetical");var a={value:e,label:t};null===e&&(a=null);var o=[{value:"alphabetical",label:"Alphabetical"},{value:"date",label:"Date (Recently Added)"}];return e?s.a.createElement(I.a,{placeholder:"Alphabetical",options:o,defaultValue:a,isClearable:!0,isSearchable:!0,onChange:this.setView}):s.a.createElement(I.a,{placeholder:"Alphabetical",options:o,isClearable:!0,isSearchable:!0,onChange:this.setView})}}]),t}(s.a.Component),Oe=(a(47),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={booksToRead:[],booksToReadView:""},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.booksToRead;console.log(this.props),console.log(t);var a=t;return"alphabetical"===this.props.booksToReadView&&(a=Object(R.a)(t).sort((function(e,t){return e.titleForSorting>t.titleForSorting?1:-1}))),"date"===this.props.booksToReadView&&(a=Object(R.a)(t).sort((function(e,t){return e.bookshelfTimestamp>t.bookshelfTimestamp?-1:e.bookshelfTimestamp<t.bookshelfTimestamp?1:e.titleForSorting>t.titleForSorting?1:e.titleForSorting<t.titleForSorting?-1:void 0}))),"rating"===this.props.booksToReadView&&(a=Object(R.a)(t).sort((function(e,t){return e.bookshelfRating>t.bookshelfRating?-1:e.bookshelfRating<t.bookshelfRating?1:e.titleForSorting>t.titleForSorting?1:e.titleForSorting<t.titleForSorting?-1:void 0}))),void 0===t||0===t.length?s.a.createElement("div",{className:"saved-for-later-area single-page"},s.a.createElement("h1",null,"To Read"),s.a.createElement("p",{className:"no-books-yet-message"},"You don't have any books saved for later. But you can ",s.a.createElement("a",{href:"/search"},"run a search")," and start adding books!"),s.a.createElement("div",null,this.props.loggedInEmail)):s.a.createElement("div",{className:"saved-for-later-area single-page"},s.a.createElement("h1",null,"To Read"),this.props.notification&&s.a.createElement("div",{className:"notification-area"},this.props.notification),s.a.createElement("div",{className:"view-type"},s.a.createElement("div",{className:"viewer-label"},"View Your Books by: "),s.a.createElement("div",{className:"viewer-selector-area"},s.a.createElement(Fe,{defaultView:this.props.booksToReadView,changeToReadView:this.props.changeToReadView}))),s.a.createElement("div",{className:"results-grid "+this.props.bookSize},a.map((function(t,a){return s.a.createElement(ne,{key:t.id,book:t,editBook:e.props.editBook,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,savedForLater:!0,toRead:!0,addNewImagesToRead:e.props.addNewImagesToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,useGenres:e.props.useGenres,updateCoverImg:e.props.updateCoverImg,createNotification:e.createNotification,genres:e.props.genres,resetGenreToZero:e.props.resetGenreToZero,addNewGenre:e.props.addNewGenre,useTags:e.props.useTags,addNewTag:e.props.addNewTag,setBookTags:e.props.setBookTags,tags:e.props.tags,resetAllTags:e.props.resetAllTags,newImprovedEditBook:e.props.newImprovedEditBook})}))))}}]),t}(s.a.Component)),De=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).setView=function(e){e&&a.props.changeAlreadyReadView(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.defaultView;console.log(e);var t=null;"alphabetical"===e&&(t="Alphabetical"),"rating"===e&&(t="Rating (High to Low)"),"date"===e&&(t="Date (Recently Completed)");var a={value:e,label:t};null===e&&(a=null);var o=[{value:"alphabetical",label:"Alphabetical"},{value:"rating",label:"Rating (High to Low)"},{value:"date",label:"Date (Recently Completed)"}];return e?s.a.createElement(I.a,{placeholder:"Rating",options:o,defaultValue:a,isClearable:!0,isSearchable:!0,onChange:this.setView}):s.a.createElement(I.a,{placeholder:"Rating",options:o,isClearable:!0,isSearchable:!0,onChange:this.setView})}}]),t}(s.a.Component),Ae=a(47);function je(e){function t(e){for(var t=0,a=0;a<e.length;a++)null!==e[a].pageCount&&void 0!==e[a].pageCount&&e[a].pageCount>0&&(t+=e[a].pageCount);return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function a(e){for(var t=[],a=0;a<e.length;a++)e[a].bookshelfRating>0&&t.push(parseInt(e[a].bookshelfRating));return 0===t.length?s.a.createElement("span",{className:"no-ratings-assigned-message"},"No ratings assigned"):(t.reduce((function(e,t){return t+e}))/t.length).toFixed(2)}for(var o=e.books,n=[],r=0;r<o.length;r++)o[r].pageCount,o[r].bookshelfRating>0&&n.push(parseInt(o[r].bookshelfRating));var l="No ratings assigned";n.length>0&&(l=(n.reduce((function(e,t){return t+e}))/n.length).toFixed(2));var i=o.filter((function(e){return 0===e.bookshelfTimestamp})),c=o.filter((function(e){return e.bookshelfTimestamp>0}));console.log(c),console.log(c.length);var d=[];if(c.length>0){c.sort((function(e,t){return e.bookshelfTimestamp<t.bookshelfTimestamp?1:-1})),console.log(c);for(var g=new Date(c[0].bookshelfTimestamp).getFullYear(),m=[],u=function(e){var n=new Date(c[e].bookshelfTimestamp).getFullYear();console.log("currentBookYear: "+n),0!==e&&n===g||(m=o.filter((function(e){return function(e){return new Date(e.bookshelfTimestamp).getFullYear()}(e)===n})),console.log(n),console.log(g),console.log(e),d.push(s.a.createElement("div",{className:"yearly-chart-area"},s.a.createElement("h3",{className:"yearly-summary"},n),s.a.createElement("div",{className:"number-of-books"},"Books read: ",m.length),s.a.createElement("div",{className:"pages"},"Approx. pages: ",t(m)),s.a.createElement("div",{className:"average-rating"},"Average rating: ",a(m)))),g=n),n!==g&&(m=[]),console.log(d)},p=0;p<c.length;p++)u(p)}return o.filter((function(e){return 0===e.bookshelfTimestamp})).length>0&&d.push(s.a.createElement("div",{className:"yearly-chart-area"},s.a.createElement("h3",{className:"yearly-summary"},"No date assigned"),s.a.createElement("div",{className:"number-of-books"},"Books read: ",i.length),s.a.createElement("div",{className:"pages"},"Approx. pages: ",t(i)),s.a.createElement("div",{className:"average-rating"},"Average rating: ",a(i)))),s.a.createElement("div",{className:"advanced-stats-area"},s.a.createElement("h2",null,"Your Reading, by the Numbers"),s.a.createElement("div",{className:"stat-item total-books-read"},"Total books read: ",o.length),s.a.createElement("div",{className:"stat-item total-pages-read"},"Approx. total pages read: ",t(o)),s.a.createElement("div",{className:"stat-item alltime-avg-stars"},"All-time average rating: ",l),s.a.createElement("div",{className:"stat-item chart-area-all-years"},d.map((function(e){return s.a.createElement("div",{key:Ae.generate(),className:"single-year"},e)}))))}var Ge=a(47),Le=(s.a.Component,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).selectRating=function(e){e?(console.log(e),a.props.setRatingFilter(e.value),a.setState({selectRating:e.value})):a.props.clearRatingFilter()},a.selectAuthor=function(e){e?(console.log(e),a.props.setAuthorFilter(e.value),a.setState({selectRating:e.value})):a.props.clearAuthorFilter()},a.selectGenre=function(e){e?(console.log(e),a.props.setGenreFilter(e.value)):a.props.clearGenreFilter()},a.selectTag=function(e){e?(console.log(e),a.props.setTagFilter(e.value)):a.props.clearTagFilter()},a.state={selectRating:a.props.currentSelection},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"removeDuplicates",value:function(e){return e.filter((function(t,a){return e.indexOf(t)===a}))}},{key:"render",value:function(){var e=this.props.books,t=[],a="";if("rating"===this.props.type){a="Rating",console.log("CURRENT RATING SELECTION: "+this.state.selectRating),console.log("CURRENT PROPS SELECTION: "+this.props.currentSelection),t=[{value:"5",label:"\u2b50\u2b50\u2b50\u2b50\u2b50 Life-Changing"},{value:"4",label:"\u2b50\u2b50\u2b50\u2b50 Great +"},{value:"3",label:"\u2b50\u2b50\u2b50 Good +"},{value:"2",label:"\u2b50\u2b50 OK +"}];var o=null,n=this.state.selectRating;n>0&&("5"===n&&(o="\u2b50\u2b50\u2b50\u2b50\u2b50 Life-Changing"),"4"===n&&(o="\u2b50\u2b50\u2b50\u2b50 Great"),"3"===n&&(o="\u2b50\u2b50\u2b50 Good"),"2"===n&&(o="\u2b50\u2b50 OK"),"1"===n&&(o="\u2b50 Bad / Didn't Finish"));var r={value:n,label:o};return n>0&&this.props.currentSelection>0?(console.log("Returning option 1"),s.a.createElement(I.a,{placeholder:"Rating",options:t,defaultValue:r,isClearable:!0,isSearchable:!0,onChange:this.selectRating})):(console.log("Returning option 2"),s.a.createElement(I.a,{placeholder:"Rating",defaultValue:"",value:null,options:t,isClearable:!0,isSearchable:!0,onChange:this.selectRating}))}if("author"===this.props.type){var l=this.props.books.map((function(e,t){return e.authors})).flat();l.splice.apply(l,[0,l.length].concat(Object(R.a)(new Set(l)))),console.log(l),l.sort((function(e,t){return e.split(" ")[1]>t.split(" ")[1]?1:e.split(" ")[1]<t.split(" ")[1]?-1:0})),console.log(l);for(var i=[],c=0;c<l.length;c++)i.push({value:l[c],label:l[c]});return a="Author",""===this.props.currentSelection?s.a.createElement(I.a,{placeholder:a,options:i,value:null,isClearable:!0,isSearchable:!0,onChange:this.selectAuthor}):s.a.createElement(I.a,{placeholder:a,options:i,isClearable:!0,isSearchable:!0,onChange:this.selectAuthor})}if("genres"===this.props.type){var d=e.map((function(e){return e.genre})).filter(Boolean);(d=this.removeDuplicates(d)).sort();for(var g=[],m=0;m<d.length;m++)g.push({value:d[m],label:d[m]});return a="Genre",""===this.props.currentSelection?s.a.createElement(I.a,{placeholder:a,options:g,value:null,isClearable:!0,isSearchable:!0,onChange:this.selectGenre}):s.a.createElement(I.a,{placeholder:a,options:g,isClearable:!0,isSearchable:!0,onChange:this.selectGenre})}if("tags"===this.props.type){a="Tag";var u=e.map((function(e){return e.tags})).filter(Boolean).flat();u=this.removeDuplicates(u),console.log(u),u.sort((function(e,t){return e.toString().localeCompare(t,"fr",{ignorePunctuation:!0})}));for(var p=[],h=0;h<u.length;h++)p.push({value:u[h],label:u[h]});return a="Tags",""===this.props.currentSelection?s.a.createElement(I.a,{placeholder:a,options:p,value:null,isClearable:!0,isSearchable:!0,onChange:this.selectTag}):s.a.createElement(I.a,{placeholder:a,options:p,isClearable:!0,isSearchable:!0,onChange:this.selectTag})}}}]),t}(s.a.Component)),Ue=a(379),Ve=a(375),Ze=(a(47),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).orderBooks=function(e,t){console.log(e),console.log(t);var o=null;return"alphabetical"===e&&(o=Object(R.a)(t).sort((function(e,t){return e.titleForSorting>t.titleForSorting?1:-1}))),"date"===a.props.booksAlreadyReadView&&(o=Object(R.a)(t).sort((function(e,t){return e.bookshelfTimestamp>t.bookshelfTimestamp?-1:e.bookshelfTimestamp<t.bookshelfTimestamp?1:e.title>t.title?1:e.title<t.title?-1:void 0}))),"rating"===a.props.booksAlreadyReadView&&(o=Object(R.a)(t).sort((function(e,t){return e.bookshelfRating>t.bookshelfRating?-1:e.bookshelfRating<t.bookshelfRating?1:e.titleForSorting>t.titleForSorting?1:e.titleForSorting<t.titleForSorting?-1:void 0}))),o},a.setGenreFilter=function(e){console.log("setGenreFilter = "+e),a.setState({genreFilter:e})},a.clearGenreFilter=function(){console.log("resetGenreFilter"),a.setState({genreFilter:""})},a.setAuthorFilter=function(e){console.log("setAuthorFilter = "+e),a.setState({authorFilter:e})},a.clearAuthorFilter=function(){console.log("clearAuthorFilter"),a.setState({authorFilter:""})},a.setTagFilter=function(e){console.log("setTagFilter = "+e),a.setState({tagFilter:e})},a.clearTagFilter=function(){console.log("resetTagFilter"),a.setState({tagFilter:""})},a.setRatingFilter=function(e){console.log("setRatingFilter = "+e),a.setState({ratingFilter:e})},a.clearRatingFilter=function(){console.log("resetRatingFilter"),a.setState({ratingFilter:0})},a.clearAllFilters=function(e){e.preventDefault();var t=a.orderBooks(a.props.booksAlreadyReadView,a.props.booksAlreadyRead);a.setState({tagFilter:"",genreFilter:"",authorFilter:"",ratingFilter:0,displayedBooks:t})},a.showHideStats=function(e){console.log("showHideStats"),a.setState((function(e){return{showStats:!e.showStats}}))},a.showHideFilters=function(e){console.log("showHideFilters"),a.setState((function(e){return{showFilters:!e.showFilters}}))},a.state={bookOrder:a.props.booksAlreadyReadView,authorFilter:"",genreFilter:"",tagFilter:"",ratingFilter:0,displayedBooks:a.props.booksAlreadyRead,showStats:!1,showFilters:!1},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){console.log("MOUNTED");var e=this.orderBooks(this.props.booksAlreadyReadView,this.props.booksAlreadyRead);this.setState({displayedBooks:e})}},{key:"render",value:function(){var e=this,t=this.props.booksAlreadyRead,a=this.state.displayedBooks;console.log("Rating filter: "+this.state.ratingFilter),console.log("Author filter: "+this.state.authorFilter),console.log("Genre filter: "+this.state.genreFilter),console.log("Tag filter: "+this.state.tagFilter);var o=this.state.genreFilter,n=null;""!==o&&(n=a.filter((function(e){return e.genre===o})),a=this.orderBooks(this.props.booksAlreadyReadView,n));var r=this.state.authorFilter;n=null,""!==r&&(n=a.filter((function(e){return e.authors.includes(r)})),a=this.orderBooks(this.props.booksAlreadyReadView,n));var l=this.state.tagFilter;""!==l&&void 0!==l&&(n=a.filter((function(e){var t=e.tags;return void 0===t&&(console.log("UNDEF"),t=""),console.log(t),void 0===e.tags&&(e.tags=""),t.includes(l)})),a=this.orderBooks(this.props.booksAlreadyReadView,n));var i=this.state.ratingFilter;0!==i&&(n=a.filter((function(e){return e.bookshelfRating>=i})),a=this.orderBooks(this.props.booksAlreadyReadView,n));var c=null;return""===this.state.genreFilter&&""===this.state.authorFilter&&""===this.state.tagFilter&&0===this.state.ratingFilter||(c=s.a.createElement("div",{className:"viewer-selector-area clear"},s.a.createElement("button",{id:"clear-all-filters",className:"clear-all-filters",onClick:this.clearAllFilters},"Clear All Filters"))),void 0===t||0===t.length?s.a.createElement("div",{className:"previously-read-area single-page"},s.a.createElement("h1",null,"Already Read"),s.a.createElement("p",{className:"no-books-yet-message"},"You haven't recorded any books yet. But you can ",s.a.createElement("a",{href:"/search"},"run a search")," and start adding books!"),s.a.createElement("div",null,this.props.loggedInEmail)):s.a.createElement("div",{className:"previously-read-area single-page"},s.a.createElement("h1",null,"Already Read"),s.a.createElement("div",{className:"switch-area"},s.a.createElement("div",{className:"single-switch stats"},s.a.createElement(Ve.a,{control:s.a.createElement(Ue.a,{checked:this.state.showStats,onChange:this.showHideStats,label:"Show Advanced Reading Stats",inputProps:{"aria-label":"show stats"}}),label:"Show Stats"})),s.a.createElement("div",{className:"single-switch filters"},s.a.createElement(Ve.a,{control:s.a.createElement(Ue.a,{checked:this.state.showFilters,onChange:this.showHideFilters,label:"Use Filters",inputProps:{"aria-label":"show filters"}}),label:"Use Filters"}))),this.state.showStats&&s.a.createElement(je,{books:t}),s.a.createElement("div",{className:"prev-views"},s.a.createElement("div",{className:"view-type orderby-area"},s.a.createElement("div",{className:"viewer-label"},"Order by: "),s.a.createElement("div",{className:"viewer-selector-area"},s.a.createElement(De,{defaultView:this.props.booksAlreadyReadView,changeAlreadyReadView:this.props.changeAlreadyReadView}))),this.state.showFilters&&s.a.createElement("div",{className:"view-type filters-area"},s.a.createElement("div",{className:"viewer-label"},"Filter by: "),s.a.createElement("div",{className:"viewer-selector-area filter"},s.a.createElement(Le,{books:a,type:"rating",currentSelection:this.state.ratingFilter,setRatingFilter:this.setRatingFilter,clearRatingFilter:this.clearRatingFilter})),s.a.createElement("div",{className:"viewer-selector-area filter"},s.a.createElement(Le,{books:a,type:"author",currentSelection:this.state.authorFilter,setAuthorFilter:this.setAuthorFilter,clearAuthorFilter:this.clearAuthorFilter})),this.props.useGenres&&s.a.createElement("div",{className:"viewer-selector-area filter"},s.a.createElement(Le,{books:a,type:"genres",currentSelection:this.state.genreFilter,setGenreFilter:this.setGenreFilter,clearGenreFilter:this.clearGenreFilter})),this.props.useTags&&s.a.createElement("div",{className:"viewer-selector-area filter"},s.a.createElement(Le,{books:a,type:"tags",currentSelection:this.state.tagFilter,setTagFilter:this.setTagFilter,clearTagFilter:this.clearTagFilter})),c)),s.a.createElement("div",{className:"results-grid "+this.props.bookSize},a.map((function(t,a){return s.a.createElement(ne,{key:t.id,book:t,editBook:e.props.editBook,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,alreadyRead:!0,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,useGenres:e.props.useGenres,useTags:e.props.useTags,setBookRating:e.props.setBookRating,resetRatingToZero:e.props.resetRatingToZero,resetTimestampToZero:e.props.resetTimestampToZero,setBookGenre:e.props.setBookGenre,genres:e.props.genres,resetGenreToZero:e.props.resetGenreToZero,addNewGenre:e.props.addNewGenre,addNewTag:e.props.addNewTag,setBookTags:e.props.setBookTags,tags:e.props.tags,resetAllTags:e.props.resetAllTags,setBookTimestamp:e.props.setBookTimestamp,updateCoverImg:e.props.updateCoverImg})}))))}}]),t}(s.a.Component)),xe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value)),console.log(e.target.value)},a.handleSubmit=function(e){e.preventDefault(),console.log("Registration submitted");var t=a.state,o=t.email,s=t.password;console.log(a.state),Z.auth().createUserWithEmailAndPassword(o,s).then((function(e){a.props.registerNewUser(e)})).catch((function(e){a.setState({error:e})}))},a.state={email:"",password:"",error:null},console.log(a.props),a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state,t=(e.email,e.password,e.error);return s.a.createElement("div",{className:"login-form-area"},s.a.createElement("p",null,"Enter your information below to register for your free Bookshelf:"),t?s.a.createElement("div",null,t.message):null,s.a.createElement("form",{id:"registration-form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"registration-area"},s.a.createElement("input",{type:"text",id:"login-form-email",name:"email",label:"Email",required:!0,value:this.email,onChange:this.handleInputChange})),s.a.createElement("div",{className:"registration-area"},s.a.createElement("input",{type:"text",id:"login-form-password",name:"password",label:"Password",required:!0,placeholder:"Password",value:this.password,onChange:this.handleInputChange})),s.a.createElement("button",{type:"submit"},"Register Now")))}}]),t}(s.a.Component),Me=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props),console.log(this.props.books),s.a.createElement("div",{className:"clb-grail-body color-"+this.props.settingsColor+" font-"+this.props.settingsFont},s.a.createElement(y.a,{basename:"/"},s.a.createElement(S.d,null,s.a.createElement(S.b,{exact:!0,path:"/",component:function(){return s.a.createElement(ie,{booksToRead:e.props.booksToRead,booksAlreadyRead:e.props.booksAlreadyRead,editBook:e.props.editBook,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,addNewImagesToRead:e.props.addNewImagesToRead,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,notification:e.props.notification,notificationTimestamp:e.props.notificationTimestamp,updateCoverImg:e.props.updateCoverImg,useGenres:e.props.useGenres,useTags:e.props.useTags,setBookRating:e.props.setBookRating,resetRatingToZero:e.props.resetRatingToZero,resetTimestampToZero:e.props.resetTimestampToZero,setBookTimestamp:e.props.setBookTimestamp,genres:e.props.genres,tags:e.props.tags,defaultDate:e.props.defaultDate,newImprovedEditBook:e.props.newImprovedEditBook})}}),s.a.createElement(S.b,{exact:!0,path:"/search",component:pe}),s.a.createElement(S.b,{exact:!0,path:"/results",render:function(t){return s.a.createElement(ue,Object.assign({},t,{addBookAlreadyRead:e.props.addBookAlreadyRead,addBookToRead:e.props.addBookToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,notification:e.props.notification,notificationTimestamp:e.props.notificationTimestamp,updateCoverImg:e.props.updateCoverImg,useGenres:e.props.useGenres,useTags:e.props.useTags,genres:e.props.genres,tags:e.props.tags,addNewTag:e.props.addNewTag,setBookTags:e.props.setBookTags,newImprovedEditBook:e.props.newImprovedEditBook,defaultDate:e.props.defaultDate,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead}))}}),s.a.createElement(S.b,{exact:!0,path:"/recommended",render:function(t){return s.a.createElement(ve,Object.assign({},t,{books:e.props.books,addBookAlreadyRead:e.props.addBookAlreadyRead,addBookToRead:e.props.addBookToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,notification:e.props.notification,notificationTimestamp:e.props.notificationTimestamp,removedFromSuggestions:e.props.removedFromSuggestions,removeBookFromSuggestions:e.props.removeBookFromSuggestions}))}}),s.a.createElement(S.b,{exact:!0,path:"/saved",component:function(){return s.a.createElement(Oe,{booksToRead:e.props.booksToRead,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,editBook:e.props.editBookToRead,booksToReadView:e.props.booksToReadView,changeToReadView:e.props.changeToReadView,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,addNewImagesToRead:e.props.addNewImagesToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,notification:e.props.notification,updateCoverImg:e.props.updateCoverImg,bookSize:e.props.bookSize,useGenres:e.props.useGenres,genres:e.props.genres,resetGenreToZero:e.props.resetGenreToZero,addNewGenre:e.props.addNewGenre,useTags:e.props.useTags,addNewTag:e.props.addNewTag,setBookTags:e.props.setBookTags,tags:e.props.tags,resetAllTags:e.props.resetAllTags,defaultDate:e.props.defaultDate,newImprovedEditBook:e.props.newImprovedEditBook})}}),s.a.createElement(S.b,{exact:!0,path:"/read",component:function(){return s.a.createElement(Ze,{booksAlreadyRead:e.props.booksAlreadyRead,booksAlreadyReadView:e.props.booksAlreadyReadView,changeAlreadyReadView:e.props.changeAlreadyReadView,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,editBook:e.props.editBook,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,updateCoverImg:e.props.updateCoverImg,bookSize:e.props.bookSize,useGenres:e.props.useGenres,useTags:e.props.useTags,setBookRating:e.props.setBookRating,resetRatingToZero:e.props.resetRatingToZero,resetTimestampToZero:e.props.resetTimestampToZero,setBookGenre:e.props.setBookGenre,genres:e.props.genres,resetGenreToZero:e.props.resetGenreToZero,addNewGenre:e.props.addNewGenre,addNewTag:e.props.addNewTag,setBookTags:e.props.setBookTags,tags:e.props.tags,resetAllTags:e.props.resetAllTags,setBookTimestamp:e.props.setBookTimestamp})}}),s.a.createElement(S.b,{exact:!0,path:"/settings",component:function(){return s.a.createElement(Ie,{logOutUser:e.props.logOutUser,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,resetPassword:e.props.resetPassword,permanentlyDeleteUserAndInfo:e.props.permanentlyDeleteUserAndInfo,settingsColor:e.props.settingsColor,changeSettingsColor:e.props.changeSettingsColor,settingsFont:e.props.settingsFont,changeSettingsFont:e.props.changeSettingsFont,changeSettingsBookSize:e.props.changeSettingsBookSize,bookSize:e.props.bookSize,changeSettingsUseGenres:e.props.changeSettingsUseGenres,changeSettingsUseTags:e.props.changeSettingsUseTags,useGenres:e.props.useGenres,useTags:e.props.useTags,defaultDate:e.props.defaultDate,changeDefaultDate:e.props.changeDefaultDate})}}),s.a.createElement(S.b,{exact:!0,path:"/register",component:function(){return s.a.createElement(xe,{logOutUser:e.props.logOutUser,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail})}}),s.a.createElement(S.b,{component:Ce}))))}}]),t}(s.a.Component),ze=(a(47),a(268),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).addBookAlreadyRead=function(e){var t={};a.fetchCoverImage(e);var o=e.volumeInfo.subtitle;void 0===o&&(o=null);var s=e.volumeInfo.description;void 0===s&&(s=null);var n=e.volumeInfo.publisher;void 0===n&&(n=null);var r=e.volumeInfo.pageCount;void 0===r&&(r=null),t.id=e.id,t.title=e.volumeInfo.title,t.titleForSorting=a.createAlphabeticalSortingTitle(e.volumeInfo.title),t.subtitle=o,t.authors=e.volumeInfo.authors,t.bookshelfTimestamp=Date.now(),t.bookshelfRating=0,t.notes=[],t.coverImg=null,t.alreadyRead=!0,t.googleLink=e.selfLink,t.description=s,t.publisher=n,t.publishedDate=e.volumeInfo.publishedDate,t.pageCount=r,t.genre=null,t.tags=[],console.log(t);var l=e.volumeInfo.title;a.setState((function(e){return{books:[].concat(Object(R.a)(e.books),[t]),notification:"You added "+l+" to your ALREADY READ shelf",notificationTimestamp:Date.now()}})),a.startNotificationTimer()},a.fetchCoverImage=function(e){console.log("FETCH COVER IMAGE"),console.log(e);var t=e.selfLink;void 0===t&&(t=e.googleLink),console.log(t);var o=null;void 0!==e.volumeInfo&&void 0!==e.volumeInfo.imageLinks&&(o=e.volumeInfo.imageLinks.smallThumbnail),fetch(t).then((function(e){return e.json()})).then((function(s){console.log("fetchCoverImage CONNECTED"),console.log(s),void 0!==s.volumeInfo.imageLinks&&(console.log(s.volumeInfo.imageLinks),void 0!==s.volumeInfo.imageLinks.thumbnail&&(o=s.volumeInfo.imageLinks.thumbnail+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),void 0!==s.volumeInfo.imageLinks.small&&(o=s.volumeInfo.imageLinks.small+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),void 0!==s.volumeInfo.imageLinks.medium&&(o=s.volumeInfo.imageLinks.medium+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),void 0!==s.volumeInfo.imageLinks.large&&(o=s.volumeInfo.imageLinks.large+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),void 0!==s.volumeInfo.imageLinks.extraLarge&&(o=s.volumeInfo.imageLinks.extraLarge+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU")),console.log(t),console.log("FINAL IMAGE: "+o);var n=e.id,r=Object(R.a)(a.state.books),l=r.filter((function(e){return e.id===n}))[0];console.log(l),l.coverImg=o,console.log(l);var i=r.map((function(e){return e.id})).indexOf(n);r.splice(i,1),a.setState({books:r}),a.setState((function(e){return{books:[].concat(Object(R.a)(e.books),[l])}}))}))},a.addBookToRead=function(e){var t={};a.fetchCoverImage(e),console.log("addBookToRead");var o=e.volumeInfo.subtitle;void 0===o&&(o=null);var s=e.volumeInfo.description;void 0===s&&(s=null);var n=e.volumeInfo.publisher;void 0===n&&(n=null);var r=e.volumeInfo.pageCount;void 0===r&&(r=null),t.id=e.id,t.title=e.volumeInfo.title,t.titleForSorting=a.createAlphabeticalSortingTitle(e.volumeInfo.title),t.subtitle=o,t.authors=e.volumeInfo.authors,t.bookshelfTimestamp=Date.now(),t.bookshelfRating=0,t.notes=[],t.coverImg=null,t.alreadyRead=!1,t.googleLink=e.selfLink,t.description=s,t.publisher=n,t.publishedDate=e.volumeInfo.publishedDate,t.pageCount=r,t.genre=null,console.log(t),a.setState((function(e){return{books:[].concat(Object(R.a)(e.books),[t]),notification:"You added "+t.title+" to your TO READ shelf",notificationTimestamp:Date.now()}})),a.startNotificationTimer()},a.moveBooktoAlreadyRead=function(e){console.log(e);var t=e.id,o=(e.title,Object(R.a)(a.state.books)),s=o.filter((function(e){return e.id===t}));console.log(s);var n=o.findIndex((function(e){return e.id===t}));console.log(n),o[n].alreadyRead=!0,o[n].bookshelfTimestamp=Date.now(),a.setState({books:a.state.books})},a.removeBookFromAlreadyRead=function(e){console.log("Removed: "+JSON.stringify(e));var t=e.id,o=Object(R.a)(a.state.books),s=(o.filter((function(e){return e.id===t})),o.map((function(e){return e.id})).indexOf(t));o.splice(s,1),a.setState({books:o})},a.removeBookFromToRead=function(e){console.log("Removed: "+JSON.stringify(e));var t=e.id,o=Object(R.a)(a.state.books),s=(o.filter((function(e){return e.id===t})),o.map((function(e){return e.id})).indexOf(t));o.splice(s,1),a.setState({books:o})},a.editBook=function(e){console.log("Editing this book: "+JSON.stringify(e));var t=e.id,o=Object(R.a)(a.state.books),s=(o.filter((function(e){return e.id===t})),o.map((function(e){return e.id})).indexOf(t)),n=Object(R.a)(a.state.books);n[s]=e,console.log(n[s]),a.setState({books:n})},a.newImprovedEditBook=function(e,t){if(console.log("newImprovedEditBook 12pm"),console.log(t),"savedForLater"===t){console.log("newImprovedEditBook via TO READ"),e.alreadyRead=!0,console.log("NEW & IMPROVED --\x3e Editing this book: "+JSON.stringify(e));var o=e.id,s=Object(R.a)(a.state.books),n=(s.filter((function(e){return e.id===o})),s.map((function(e){return e.id})).indexOf(o)),r=Object(R.a)(a.state.books);r[n]=e,console.log(r[n]),a.setState({books:r})}else if("searchResults"===t){console.log(e),console.log("newImprovedEditBook via searchResults");var l={alreadyRead:!0};l.authors=e.volumeInfo.authors,l.bookshelfRating=e.bookshelfRating,l.bookshelfTimestamp=e.bookshelfTimestamp,l.coverImg=e.volumeInfo.imageLinks.smallThumbnail,l.description=e.volumeInfo.description,l.genre=e.genre,l.googleLink=e.selfLink,l.id=e.id,l.pageCount=e.volumeInfo.pageCount,l.publishedDate=e.volumeInfo.publishedDate,l.publisher=e.volumeInfo.publisher,l.tags=e.tags,l.title=e.volumeInfo.title,l.titleForSorting=a.createAlphabeticalSortingTitle(e.volumeInfo.title),console.log(l);var i=l.id,c=Object(R.a)(a.state.books),d=(c.filter((function(e){return e.id===i})),c.map((function(e){return e.id})).indexOf(i)),g=Object(R.a)(a.state.books);g[d]=l,console.log(g[d]),a.setState((function(e){return{books:g,notification:"You added "+l.title+" to your ALREADY READ shelf",notificationTimestamp:Date.now()}})),a.startNotificationTimer(),a.fetchCoverImage(l)}},a.updateCoverImg=function(e,t){console.log(t),console.log(e);var o=t.id,s=(t.title,Object(R.a)(a.state.books)),n=s.filter((function(e){return e.id===o}));console.log("getBookObjInState"),console.log(n),n.coverImg=e;var r=s.findIndex((function(e){return e.id===o}));console.log(r),s[r].coverImg=e,a.setState({books:a.state.books})},a.editBookToRead=function(e){console.log("Editing this book: "+JSON.stringify(e));var t=e.id,o=Object(R.a)(a.state.booksToRead),s=(o.filter((function(e){return e.id===t})),o.map((function(e){return e.id})).indexOf(t)),n=Object(R.a)(a.state.booksToRead);n[s]=e,console.log(n[s]),a.setState({booksToRead:n})},a.addNewImagesAlreadyRead=function(e){console.log("Editing this book: "+JSON.stringify(e));var t=e.id,o=Object(R.a)(a.state.books),s=(o.filter((function(e){return e.id===t})),o.map((function(e){return e.id})).indexOf(t)),n=Object(R.a)(a.state.books);e.volumeInfo.imageLinks.large?n[s].volumeInfo.imageLinks.large=e.volumeInfo.imageLinks.large:n[s].volumeInfo.imageLinks.large="",e.volumeInfo.imageLinks.medium?n[s].volumeInfo.imageLinks.medium=e.volumeInfo.imageLinks.medium:n[s].volumeInfo.imageLinks.medium="",e.volumeInfo.imageLinks.small?n[s].volumeInfo.imageLinks.small=e.volumeInfo.imageLinks.small:n[s].volumeInfo.imageLinks.small="",e.volumeInfo.imageLinks.smallThumbnail?n[s].volumeInfo.imageLinks.smallThumbnail=e.volumeInfo.imageLinks.smallThumbnail:n[s].volumeInfo.imageLinks.smallThumbnail="",e.volumeInfo.imageLinks.thumbnail?n[s].volumeInfo.imageLinks.thumbnail=e.volumeInfo.imageLinks.thumbnail:n[s].volumeInfo.imageLinks.thumbnail="",console.log(n[s]),a.setState({booksAlreadyRead:n})},a.addNewImagesToRead=function(e){},a.setBookRating=function(e,t){console.log("Update BOOK RATING in DB"),console.log(e),console.log(t);var o=t.id,s=Object(R.a)(a.state.books),n=(s.filter((function(e){return e.id===o})),s.findIndex((function(e){return e.id===o})));console.log(n),s[n].bookshelfRating=e.value,a.setState({books:a.state.books})},a.setBookGenre=function(e,t){console.log("Update BOOK GENRE in DB"),console.log(e),console.log(t);var o=t.id,s=Object(R.a)(a.state.books),n=(s.filter((function(e){return e.id===o})),s.findIndex((function(e){return e.id===o})));console.log(n),s[n].genre=e.value,a.setState({books:a.state.books})},a.setBookTimestamp=function(e,t){console.log("Update BOOK Timestamp in DB"),console.log(e),console.log(t);var o=t.id,s=Object(R.a)(a.state.books),n=(s.filter((function(e){return e.id===o})),s.findIndex((function(e){return e.id===o})));console.log(n),s[n].bookshelfTimestamp=e,a.setState({books:a.state.books})},a.addNewTag=function(e){console.log(e);var t=a.state.settings.tags;void 0===t&&(t=[]),console.log(t),console.log(t.filter(Boolean));var o=e.filter((function(e){return!t.includes(e)}));console.log("DIFFERENCE"),console.log(o);var s=t.concat(o);a.setState({settings:{tags:s}})},a.setBookTags=function(e,t){console.log("Update TAGS in DB"),console.log(e),console.log(t);var o=t.id,s=Object(R.a)(a.state.books),n=(s.filter((function(e){return e.id===o})),s.findIndex((function(e){return e.id===o})));console.log(n),s[n].tags=e,a.setState({books:a.state.books})},a.resetRatingToZero=function(e){var t=e.id,o=Object(R.a)(a.state.books),s=(o.filter((function(e){return e.id===t})),o.findIndex((function(e){return e.id===t})));console.log(s),o[s].bookshelfRating=0,a.setState({books:a.state.books})},a.resetTimestampToZero=function(e){var t=e.id,o=Object(R.a)(a.state.books),s=(o.filter((function(e){return e.id===t})),o.findIndex((function(e){return e.id===t})));console.log(s),o[s].bookshelfTimestamp=0,a.setState({books:a.state.books})},a.resetGenreToZero=function(e){var t=e.id,o=Object(R.a)(a.state.books),s=(o.filter((function(e){return e.id===t})),o.findIndex((function(e){return e.id===t})));console.log(s),o[s].genre="",a.setState({books:a.state.books})},a.resetAllTags=function(e){var t=e.id,o=Object(R.a)(a.state.books),s=(o.filter((function(e){return e.id===t})),o.findIndex((function(e){return e.id===t})));console.log(s),o[s].tags=[],a.setState({books:a.state.books})},a.addNewGenre=function(e){console.log(e);var t=Object(R.a)(a.state.settings.genres);console.log(t);var o=t.includes(e);if(console.log(o),!1===o){var s=[].concat(Object(R.a)(t),[e]),n=Object(R.a)(s).sort();n=n.filter(Boolean),console.log(n),a.setState({settings:{genres:n}})}},a.changeAlreadyReadView=function(e){console.log("CHANGE sortViewAlreadyRead"),console.log(e);var t="alphabetical";e&&("rating"===e.value&&(t="rating"),"date"===e.value&&(t="date")),a.setState({settings:{sortViewAlreadyRead:t}})},a.changeToReadView=function(e){var t="alphabetical";e&&"date"===e.value&&(t="date"),a.setState({settings:{sortViewToRead:t}})},a.changeSettingsBookSize=function(e){console.log("changeSettingsBookSize");var t="default";e&&(t=e.value),a.setState({settings:{bookSize:t}})},a.changeSettingsUseGenres=function(e){console.log("changeSettingsUseGenres");var t=!1;e&&(t=e.value),a.setState({settings:{useGenres:t}})},a.changeSettingsUseTags=function(e){console.log("changeSettingsUseTags");var t=!1;e&&(t=e.value),a.setState({settings:{useTags:t}})},a.changeSettingsColor=function(e){var t="default";e&&(t=e.value),a.setState({settings:{color:t}});var o="bookshelf."+a.props.loggedInID+".settings.color";localStorage.setItem(o,t)},a.changeSettingsFont=function(e){var t="default";e&&(t=e.value),a.setState({settings:{font:t}});var o="bookshelf."+a.props.loggedInID+".settings.font";localStorage.setItem(o,t)},a.changeDefaultDate=function(e){console.log("changeDefaultDate: "+e.value);var t="Today";e&&(t=e.value),a.setState({settings:{defaultDate:t}})},a.resetNotification=function(){a.setState({notification:null,notificationTimestamp:null})},a.startNotificationTimer=function(){a.timerId||(a.timerId=setTimeout((function(){a.resetNotification(),console.log("startNotificationTimer - tick"),console.log(a.timerId)}),6e3))},a.createAlphabeticalSortingTitle=function(e){var t=e;return console.log("createAlphabeticalSortingTitle"),e.startsWith("The ")?t=e.substr(4)+", The":e.startsWith("A ")?t=e.substr(2)+", A":e.startsWith("An ")&&(t=e.substr(3)+", An"),console.log(t),t},a.removeBookFromSuggestions=function(e){console.log("removeBookFromSuggestions: "+e.id);var t=[];void 0!==a.state.settings.removedFromSuggestions&&(t=Object(R.a)(a.state.settings.removedFromSuggestions));var o=[].concat(Object(R.a)(t),[e.id]);a.setState({settings:{removedFromSuggestions:o}})},a.state={books:[],settings:{color:"default",font:"default",sortViewToRead:"alphabetical",sortViewAlreadyRead:"alphabetical",bookSize:"default",genres:["Fiction","Nonfiction","Memoir","Children","Cooking","Historical Fiction","Mystery","Science Fiction","Young Adult"],tags:[],useGenres:!1,useTags:!1,defaultDate:"Today",customFields:[],removedFromSuggestions:[]},notification:null,notificationTimestamp:null},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){console.log("componentDidMount");var e=this.props.loggedInID;console.log("loggedInID:"+e),x.syncState("".concat(e,"/books"),{context:this,state:"books",asArray:!0}),x.syncState("".concat(e,"/settings"),{context:this,state:"settings",asArray:!1});var t="bookshelf."+this.props.loggedInID+".settings.color",a=localStorage.getItem(t);x.fetch("".concat(e,"/settings/color"),{context:this,asArray:!1,then:function(e){a!==e&&(console.log("Setting updated color into localStorage: "+e),localStorage.setItem(t,e))}});var o="bookshelf."+this.props.loggedInID+".settings.font",s=localStorage.getItem(o);x.fetch("".concat(e,"/settings/font"),{context:this,asArray:!1,then:function(e){s!==e&&(console.log("Setting updated font into localStorage: "+e),localStorage.setItem(o,e))}})}},{key:"render",value:function(){var e=this.state.books,t="bookshelf."+this.props.loggedInID+".settings.color",a=localStorage.getItem(t),o="bookshelf."+this.props.loggedInID+".settings.font",n=localStorage.getItem(o),r=e.filter((function(e){return!1===e.alreadyRead})),l=e.filter((function(e){return!0===e.alreadyRead}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(T,{settingsColor:a,settingsFont:n}),s.a.createElement(Me,{books:this.state.books,logOutUser:this.props.logOutUser,loggedInID:this.props.loggedInID,loggedInEmail:this.props.loggedInEmail,permanentlyDeleteUserAndInfo:this.props.permanentlyDeleteUserAndInfo,booksAlreadyRead:l,booksAlreadyReadView:this.state.settings.sortViewAlreadyRead,booksToReadView:this.state.settings.sortViewToRead,changeAlreadyReadView:this.changeAlreadyReadView,changeToReadView:this.changeToReadView,settingsColor:a,changeSettingsColor:this.changeSettingsColor,settingsFont:n,changeSettingsFont:this.changeSettingsFont,booksToRead:r,editBook:this.editBook,editBookToRead:this.editBookToRead,addBookAlreadyRead:this.addBookAlreadyRead,addBookToRead:this.addBookToRead,moveBooktoAlreadyRead:this.moveBooktoAlreadyRead,removeBookFromAlreadyRead:this.removeBookFromAlreadyRead,removeBookFromToRead:this.removeBookFromToRead,addNewImagesAlreadyRead:this.addNewImagesAlreadyRead,addNewImagesToRead:this.addNewImagesToRead,notification:this.state.notification,notificationTimestamp:this.state.notificationTimestamp,updateCoverImg:this.updateCoverImg,changeSettingsBookSize:this.changeSettingsBookSize,bookSize:this.state.settings.bookSize,changeSettingsUseGenres:this.changeSettingsUseGenres,changeSettingsUseTags:this.changeSettingsUseTags,useGenres:this.state.settings.useGenres,useTags:this.state.settings.useTags,setBookRating:this.setBookRating,resetRatingToZero:this.resetRatingToZero,resetTimestampToZero:this.resetTimestampToZero,resetAllTags:this.resetAllTags,setBookGenre:this.setBookGenre,genres:this.state.settings.genres,tags:this.state.settings.tags,resetGenreToZero:this.resetGenreToZero,addNewGenre:this.addNewGenre,addNewTag:this.addNewTag,setBookTags:this.setBookTags,setBookTimestamp:this.setBookTimestamp,resetNotification:this.resetNotification,removedFromSuggestions:this.state.settings.removedFromSuggestions,removeBookFromSuggestions:this.removeBookFromSuggestions,newImprovedEditBook:this.newImprovedEditBook,defaultDate:this.state.settings.defaultDate,changeDefaultDate:this.changeDefaultDate}),s.a.createElement("footer",{className:"clb-bookshelf-footer color-"+a+" font-"+n},"Bookshelf \xb7 ",s.a.createElement("a",{href:"https://github.com/tomatillodesign/bookshelf",target:"_blank"},"Version 1.0")," \xb7 By Chris Liu-Beers, ",s.a.createElement("a",{href:"http://tomatillodesign.com",target:"_blank"},"Tomatillo Design")))}}]),t}(s.a.Component)),Pe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).sentEmailAddress=null,a.handleShow=function(){return a.setState({showModal:!0})},a.handleClose=function(){return a.setState({showModal:!1})},a.state={showModal:!1,email:"",sentEmail:!1},a.handleEmailChange=a.handleEmailChange.bind(Object(he.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(he.a)(a)),a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(e){console.log("Lost password, attempting to send email to: "+this.state.email),e.preventDefault();var t=Z.auth(),a=this.state.email;t.sendPasswordResetEmail(a).then((function(){console.log("Reset password email sent")})).catch((function(e){console.log("ERROR: could not send reset password email"),console.log(e)})),this.sentEmailAddress=this.emailAdress,this.setState({sentEmail:!0})}},{key:"render",value:function(){this.sentEmailAddress;return s.a.createElement("div",{className:"lost-password-area"},s.a.createElement("button",{onClick:this.handleShow},"Lost Password"),s.a.createElement(B.a,{show:this.state.showModal,onHide:this.handleClose,className:"clb-single-beer-notes"},s.a.createElement(B.a.Header,{closeButton:!0},s.a.createElement(B.a.Title,null,"Lost Your Password")),s.a.createElement(B.a.Body,null,!0!==this.state.sentEmail?s.a.createElement("form",{className:"lost-pw-area",onSubmit:this.handleSubmit},"Enter your email below to reset your password:",s.a.createElement("div",{className:"login-item"},s.a.createElement("input",{type:"text",id:"lost-pw-form-email",name:"email",label:"Email",required:!0,onChange:this.handleEmailChange})),s.a.createElement("button",{type:"submit",id:"lost-pw-submit"},"Submit")):s.a.createElement("p",{className:"sent-email-message"},"If an account exists for ",this.state.email,", we've sent an email that will allow you to reset your password. Thanks!"))))}}]),t}(s.a.Component),He=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleRegistrationSubmit=function(e){e.preventDefault(),console.log("Registration submitted");var t=a.state,o=t.email,s=t.password;console.log(a.state),Z.auth().createUserWithEmailAndPassword(o,s).then((function(e){a.props.registerNewUser(e)})).catch((function(e){a.setState({error:e})}))},a.state={showModal:!1,email:"",password:"",error:null},a.handleEmailChange=a.handleEmailChange.bind(Object(he.a)(a)),a.handlePWChange=a.handlePWChange.bind(Object(he.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(he.a)(a)),a.handleRegistrationSubmit=a.handleRegistrationSubmit.bind(Object(he.a)(a)),a.handleShowRegister=a.handleShowRegister.bind(Object(he.a)(a)),a.handleCloseRegister=a.handleCloseRegister.bind(Object(he.a)(a)),a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"handleShowRegister",value:function(e){e.preventDefault(),this.setState({showModal:!0})}},{key:"handleCloseRegister",value:function(e){this.setState({showModal:!1})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePWChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.authenticateUser(this.state.email,this.state.password)}},{key:"render",value:function(){var e=this.props.loginError,t=this.state;t.email,t.password,t.error;return s.a.createElement("div",{className:"login-form-area"},s.a.createElement("p",null,"Welcome! Bookshelf is an easy, free way to keep track of your reading.",s.a.createElement("br",null),"It's for personal use only and your information will never be shared with advertisers or social networks.",s.a.createElement("br",null),"If you're new here, ",s.a.createElement("a",{href:"/bookshelf/register",onClick:this.handleShowRegister},"click here to register for a new free account"),". Or if you've already registered, then simply login below."),!0===e?s.a.createElement("h2",null,"Incorrect email/password combination. Please try again:"):s.a.createElement("h2",null,"Login Below:"),s.a.createElement("form",{className:"login-area",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"login-item"},s.a.createElement("input",{type:"text",id:"login-form-email",name:"email",label:"Email",required:!0,onChange:this.handleEmailChange})),s.a.createElement("div",{className:"login-item"},s.a.createElement("input",{id:"login-form-password",name:"password",label:"Password",required:!0,type:"password",onChange:this.handlePWChange})),s.a.createElement("button",{type:"submit"},"Submit")),s.a.createElement(Pe,null),s.a.createElement(B.a,{show:this.state.showModal,onHide:this.handleCloseRegister,className:"clb-single-beer-notes"},s.a.createElement(B.a.Header,{closeButton:!0},s.a.createElement(B.a.Title,null,s.a.createElement("h3",null,"Register for a New Account"))),s.a.createElement(B.a.Body,null,s.a.createElement(xe,{registerNewUser:this.props.registerNewUser}))))}}]),t}(s.a.Component);function Ye(e){return s.a.createElement("div",{className:"landing-page-area single-page"},s.a.createElement("h1",null,"Login & New User Registration"),s.a.createElement("div",{className:"login-register-area"},s.a.createElement(He,{authenticateUser:e.authenticateUser,loginError:e.loginError,registerNewUser:e.registerNewUser})))}var We=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).registerNewUser=function(e){var t=e.user.uid,o=e.user.email;console.log(t),Z.database().ref().update(Object(c.a)({},t,{ownerID:t,ownerEmail:o,books:[],settings:{color:"default",font:"default",sortViewToRead:"alphabetical",sortViewAlreadyRead:"alphabetical",bookSize:"default",genres:["Fiction","Nonfiction","Memoir","Children","Cooking","Historical Fiction","Mystery","Science Fiction","Young Adult"],customFields:[]}})),a.setState({loggedInID:t,loggedInEmail:o}),localStorage.setItem("bookshelf.loggedInID",t),localStorage.setItem("bookshelf.loggedInEmail",o),console.log("REGISTERED AND Logged in: "+t)},a.authenticateUser=function(e,t){console.log("AuthenticateUser: "+e),Z.auth().signInWithEmailAndPassword(e,t).then((function(t){console.log("User successfully LOGGED IN"+t.user.uid),a.setState({loggedInID:t.user.uid,loggedInEmail:t.user.email,loginError:!1}),localStorage.setItem("bookshelf.loggedInID",t.user.uid),localStorage.setItem("bookshelf.loggedInEmail",e)})).catch((function(e){console.log("ERROR: User trying to log in"),a.setState({loginError:!0})}))},a.authHandler=function(e){var t,o;return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t=Z.auth().currentUser,console.log(t),null!==t?(o=t.uid,console.log("Current User ID: "+o),console.log("Current User Email: "+t.email),a.setState({loggedInID:o,loggedInEmail:t.email}),localStorage.setItem("bookshelf.loggedInID",o),localStorage.setItem("bookshelf.loggedInEmail",t.email)):console.log("authHandler == no user found");case 3:case"end":return e.stop()}}))},a.logOutUser=function(e){Z.auth().signOut().then((function(){console.log("Logged OUT successful")})).catch((function(e){console.log("ERROR: Trying to log out")})),a.setState({loggedInID:"",loggedInEmail:""}),localStorage.removeItem("bookshelf.loggedInID"),localStorage.removeItem("bookshelf.loggedInEmail"),x.reset()},a.permanentlyDeleteUserAndInfo=function(e){console.log(e);var t=e.uid;x.remove(t).then((function(){console.log("User "+t+" permanently deleted")})).catch((function(e){})),a.setState({loggedInID:"",loggedInEmail:""}),localStorage.removeItem("bookshelf.loggedInID"),localStorage.removeItem("bookshelf.loggedInEmail")},a.state={loggedInID:"",loggedInEmail:"",loginError:!1},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){console.log("App.js mounted newBookForm 10:41am")}},{key:"render",value:function(){var e=this.state.loggedInID,t=this.state.loggedInEmail,a=this.state.loginError,o=localStorage.getItem("bookshelf.loggedInID"),n=localStorage.getItem("bookshelf.loggedInEmail");return console.log("LOCAL STORAGE: "+o),null!==o&&(e=o),null!==n&&(t=n),s.a.createElement("div",{className:"App"},""!==e?s.a.createElement(s.a.Fragment,null,s.a.createElement(ze,{logOutUser:this.logOutUser,loggedInID:e,loggedInEmail:t,permanentlyDeleteUserAndInfo:this.permanentlyDeleteUserAndInfo})):s.a.createElement(s.a.Fragment,null,s.a.createElement(T,{logOutUser:this.logOutUser,permanentlyDeleteUserAndInfo:this.permanentlyDeleteUserAndInfo}),s.a.createElement("div",{className:"logged-out-area"},s.a.createElement(Ye,{registerNewUser:this.registerNewUser,authenticateUser:this.authenticateUser,loginError:a,logOutUser:this.logOutUser}))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[194,1,2]]]);
//# sourceMappingURL=main.6c1bfd39.chunk.js.map