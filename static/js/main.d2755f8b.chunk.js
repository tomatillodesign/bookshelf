(this.webpackJsonpbookshelf=this.webpackJsonpbookshelf||[]).push([[0],{140:function(e,a,t){"use strict";t.r(a);var o=t(0),n=t.n(o),l=t(16),s=t.n(l),r=(t(93),t(77)),i=t.n(r),c=t(3),m=t(8),d=t(7),u=t(9),h=t(10),g=t(11),p=(t(95),t(96),t(15)),b=t(20),f=t(41),k=function(e){return n.a.createElement(p.a,{icon:f.a})},v=t(39),E=function(e){return n.a.createElement(p.a,{icon:v.a})};var R=function(e){return n.a.createElement("header",{className:"header color-"+e.settingsColor+" font-"+e.settingsFont},n.a.createElement("h1",{className:"logo-area"},n.a.createElement("a",{href:"/bookshelf/"},"Bookshelf")),n.a.createElement("nav",Object(c.a)({className:"nav-primary","aria-label":"Main",id:"bookshelf-nav-primary"},"className","main-menu"),n.a.createElement("ul",{id:"menu-main-menu",className:"menu-main-menu"},n.a.createElement("li",{id:"menu-item-search",className:"menu-item search"},n.a.createElement("a",{href:"#search"},n.a.createElement(p.a,{icon:b.b})," New Books")),n.a.createElement("li",{id:"menu-item-saved",className:"menu-item saved"},n.a.createElement("a",{href:"#saved"},n.a.createElement(k,null)," To Read")),n.a.createElement("li",{id:"menu-item-read",className:"menu-item read"},n.a.createElement("a",{href:"#read"},n.a.createElement(E,null)," Already Read")),n.a.createElement("li",{id:"menu-item-settings",className:"menu-item settings"},n.a.createElement("a",{href:"#settings"},n.a.createElement(p.a,{icon:b.a})," Settings")))))},y=t(14),I=t(53),w=t(35),O=t(59),N=t(65),T=t(19),A=t(40),B=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).createNewBook=function(e){e.preventDefault(),console.log(t.props.book);var a=t.props.book;t.props.addBookToRead(a)},t.state={},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.a.createElement("button",{className:"read-action to-read",title:"Add to your To Read shelf",onClick:this.createNewBook},n.a.createElement(p.a,{icon:f.a}))}}]),a}(n.a.Component),S=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).createNewBook=function(e){e.preventDefault(),console.log(t.props.book);var a=t.props.book;t.props.addBookAlreadyRead(a)},t.state={},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.a.createElement("button",{className:"read-action already-read",title:"Add to your Already Read shelf",onClick:this.createNewBook},n.a.createElement(p.a,{icon:v.a}))}}]),a}(n.a.Component),j=t(22),C=function(e){function a(e){return Object(m.a)(this,a),Object(u.a)(this,Object(h.a)(a).call(this,e))}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props.defaultRating;console.log(e);var a=null;"5"===e&&(a="\u2b50\u2b50\u2b50\u2b50\u2b50 Life-Changing"),"4"===e&&(a="\u2b50\u2b50\u2b50\u2b50 Great"),"3"===e&&(a="\u2b50\u2b50\u2b50 Good"),"2"===e&&(a="\u2b50\u2b50 OK"),"1"===e&&(a="\u2b50 Bad / Didn't Finish");var t={value:e,label:a};null===e&&(t=null);var o=[{value:"5",label:"\u2b50\u2b50\u2b50\u2b50\u2b50 Life-Changing"},{value:"4",label:"\u2b50\u2b50\u2b50\u2b50 Great"},{value:"3",label:"\u2b50\u2b50\u2b50 Good"},{value:"2",label:"\u2b50\u2b50 OK"},{value:"1",label:"\u2b50 Bad / Didn't Finish"}];return e?n.a.createElement(j.a,{placeholder:"Rating",options:o,defaultValue:t,isClearable:!0,isSearchable:!0,onChange:this.props.setRating}):n.a.createElement(j.a,{placeholder:"Rating",options:o,isClearable:!0,isSearchable:!0,onChange:this.props.setRating})}}]),a}(n.a.Component),F=t(166),L=t(169),D=function(e){function a(){var e,t;Object(m.a)(this,a);for(var o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return(t=Object(u.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(n)))).useStyles=Object(F.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),marginLeft:0}}}})),t.classes=t.useStyles,t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){return this.props.edit?n.a.createElement(L.a,{id:"notes-basic-outline",defaultValue:this.props.defaultValue,label:this.props.placeholder,fullWidth:!0,multiline:!0,rows:"4",onChange:this.props.setNotes}):n.a.createElement(L.a,{id:"outlined-basic",defaultValue:this.props.defaultValue,label:this.props.placeholder,fullWidth:!0,multiline:!0,rows:"4",onChange:this.props.setNotes})}}]),a}(n.a.Component);function V(e){var a=n.a.useState(new Date),t=Object(O.a)(a,2),o=(t[0],t[1]),l=new Date(e.bookshelfTimestamp).toISOString().slice(0,10);return console.log(l),n.a.createElement(L.a,{id:"date",required:!0,label:"Date Completed",type:"date",defaultValue:l,className:"book-date-field",InputLabelProps:{shrink:!0},onChange:function(a){console.log(a.currentTarget.value),o(a.currentTarget.value),e.getCompletedDate(a.currentTarget.value)}})}var U=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).id=t.props.book.id,t.bookshelfRating=t.props.bookshelfRating,t.bookNotes=t.props.bookshelfNote,t.bookshelfTimestamp=t.props.bookshelfTimestamp,t.editThisBook=function(e){e.preventDefault();var a=t.state.book;console.log(a),console.log(t.state.book.bookshelfTimestamp),void 0===t.bookshelfTimestamp&&(t.bookshelfTimestamp=t.state.book.bookshelfTimestamp),void 0===t.bookshelfRating&&(t.bookshelfRating=t.state.book.bookshelfRating),void 0===t.bookNotes&&(t.bookNotes=t.state.book.bookshelfNote),a.bookshelfRating=t.bookshelfRating,a.bookshelfNote=t.bookNotes,a.bookshelfTimestamp=t.bookshelfTimestamp;var o=a;console.log(o),t.props.editBook(o)},t.setRating=function(e){e?(t.bookshelfRating=e.value,t.setState({bookshelfRating:e.value})):t.setState({bookshelfRating:505})},t.setNotes=function(e){t.bookNotes=e.target.value},t.getCompletedDate=function(e){console.log("Completed DATE: "+t.bookshelfTimestamp);var a=parseInt(new Date(e).getTime().toFixed(0));console.log(a),t.bookshelfTimestamp=a},t.state={currentlyEditing:!0,book:t.props.book,bookshelfNote:t.props.bookshelfNote,bookshelfRating:t.props.bookshelfRating},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){console.log("Current book: "+JSON.stringify(this.props.book)),console.log("Current book RATING: "+JSON.stringify(this.props.bookshelfRating));var e=this.props.bookshelfRating,a=this.props.bookshelfNote,t=this.props.bookshelfTimestamp;return console.log("NOTE: "+a),n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"edit-book",onSubmit:this.editThisBook},n.a.createElement("div",{className:"top-info-line"},!0!==this.props.hideRating&&n.a.createElement("div",{className:"book-rating-area"},n.a.createElement(C,{setRating:this.setRating,defaultRating:e})),!0!==this.props.hideDate&&n.a.createElement("div",{className:"book-date-area"},n.a.createElement(V,{bookshelfTimestamp:t,getCompletedDate:this.getCompletedDate}))),n.a.createElement(D,{placeholder:"Add a note...",defaultValue:a,setNotes:this.setNotes}),n.a.createElement("button",{type:"submit",className:"update-this-book"},"Save Changes")))}}]),a}(n.a.Component),x=t(78),M=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).removeThisBook=function(e){e.preventDefault();var a=t.props.book;"removeBookFromAlreadyRead"===t.props.context&&t.props.removeBookFromAlreadyRead(a),"removeBookFromToRead"===t.props.context&&t.props.removeBookFromToRead(a)},t.state={},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return n.a.createElement("button",{className:"read-action remove-book",title:"Permanently remove this book from your collection",onClick:function(a){return window.confirm("Are you sure you want to delete this book? All of your ratings and notes for this book will also be removed. You cannot undo this action.")&&e.removeThisBook(a)}},n.a.createElement(p.a,{icon:x.a}))}}]),a}(n.a.Component);function P(e){var a=n.a.useState(!1),t=Object(O.a)(a,2),o=t[0],l=t[1],s=function(){return l(!1)},r=function(){return l(!0)},i=e.book,c=e.bookCoverModal,m=e.bookTitleModal,d=null,u=null,h=null,g=!1,p=null,b=null,f=null,k=null,v=null;void 0!==i.volumeInfo&&(void 0!==i.volumeInfo.imageLinks&&(console.log(i.volumeInfo.imageLinks.thumbnail),d=i.volumeInfo.imageLinks.thumbnail,d=i.volumeInfo.imageLinks.large,void 0!==i.volumeInfo.imageLinks.large&&""!==i.volumeInfo.imageLinks.large||(d=i.volumeInfo.imageLinks.medium),void 0!==i.volumeInfo.imageLinks.medium&&""!==i.volumeInfo.imageLinks.medium||(d=i.volumeInfo.imageLinks.small),void 0!==i.volumeInfo.imageLinks.small&&""!==i.volumeInfo.imageLinks.small||(d=i.volumeInfo.imageLinks.smallThumbnail),void 0===i.volumeInfo.imageLinks.smallThumbnail&&(d=i.volumeInfo.imageLinks.thumbnail)),u=i.volumeInfo.title,void 0!==i.volumeInfo.subtitle&&(g=!0,f=" has-subtitle",h=n.a.createElement("h3",{className:"book-subtitle"},i.volumeInfo.subtitle)),void 0!==i.volumeInfo.authors&&(b=i.volumeInfo.authors),p=i.volumeInfo.description,i.volumeInfo.categories,v=i.volumeInfo.publishedDate,void 0!==i.volumeInfo.authors&&(1===b.length&&(k="By "+b),2===b.length&&(k="By "+b.join(" & ")),b.length>2&&(k="By "+b.join(", ")),k=g?n.a.createElement("div",{className:"authors"+f},k):n.a.createElement("div",{className:"authors"},k)),v&&v.toString());return m?n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:r,className:"card-book-title"},n.a.createElement("h2",{className:"book-title"},u)),n.a.createElement(T.a,{show:o,onHide:s,className:"single-book-modal"},n.a.createElement(T.a.Header,{closeButton:!0},n.a.createElement(T.a.Title,{className:"single-book-title"},u)),n.a.createElement(T.a.Body,null,n.a.createElement("div",{className:"small-thumbnail-area"},n.a.createElement("img",{src:d})),h,k,!0!==e.alreadyRead&&n.a.createElement(n.a.Fragment,null,n.a.createElement(U,{book:i,hideRating:!0,hideDate:!0,bookshelfRating:e.bookshelfRating,bookshelfNote:e.bookshelfNote,bookshelfTimestamp:e.bookshelfTimestamp,editBook:e.editBook}),n.a.createElement("div",{className:"book-description",dangerouslySetInnerHTML:{__html:p}})),e.alreadyRead&&n.a.createElement(n.a.Fragment,null,n.a.createElement(U,{book:i,bookshelfRating:e.bookshelfRating,bookshelfNote:e.bookshelfNote,bookshelfTimestamp:e.bookshelfTimestamp,editBook:e.editBook}),n.a.createElement(A.a,null,n.a.createElement(A.a.Toggle,{as:N.a,variant:"link",eventKey:"0",className:"already-read-description-toggle"},n.a.createElement("h3",null,"Description")),n.a.createElement(A.a.Collapse,{eventKey:"0"},n.a.createElement("div",{className:"book-description",dangerouslySetInnerHTML:{__html:p}}))))),n.a.createElement(T.a.Footer,null,n.a.createElement("div",{className:"book-meta button-area"},e.alreadyRead&&n.a.createElement(M,{book:i,context:"removeBookFromAlreadyRead",removeBookFromAlreadyRead:e.removeBookFromAlreadyRead}),e.savedForLater&&n.a.createElement(n.a.Fragment,null,n.a.createElement(M,{book:i,removeBook:e.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:e.removeBookFromToRead}),n.a.createElement(S,null)),e.searchResult&&n.a.createElement(n.a.Fragment,null,n.a.createElement(B,null),n.a.createElement(S,null)))))):c?(null!==d&&(console.log("1-26 Update 1025am - COVER IMG URL: "+d),d.startsWith("http://")&&(d=d.replace("http://","https://"),console.log("Updated COVER IMG URL: "+d))),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"cover-image-area"},n.a.createElement("button",{onClick:r,className:"card-book-cover"},n.a.createElement("img",{src:d,className:"cover-image"}))),n.a.createElement(T.a,{show:o,onHide:s,className:"single-book-modal"},n.a.createElement(T.a.Header,{closeButton:!0},n.a.createElement(T.a.Title,{className:"single-book-title"},u)),n.a.createElement(T.a.Body,null,n.a.createElement("div",{className:"small-thumbnail-area"},n.a.createElement("img",{src:d})),h,k,!0!==e.alreadyRead&&n.a.createElement(n.a.Fragment,null,n.a.createElement(U,{book:i,hideRating:!0,hideDate:!0,bookshelfRating:e.bookshelfRating,bookshelfNote:e.bookshelfNote,bookshelfTimestamp:e.bookshelfTimestamp,editBook:e.editBook}),n.a.createElement("div",{className:"book-description",dangerouslySetInnerHTML:{__html:p}})),e.alreadyRead&&n.a.createElement(n.a.Fragment,null,n.a.createElement(U,{book:i,bookshelfRating:e.bookshelfRating,bookshelfNote:e.bookshelfNote,bookshelfTimestamp:e.bookshelfTimestamp,editBook:e.editBook}),n.a.createElement(A.a,null,n.a.createElement(A.a.Toggle,{as:N.a,variant:"link",eventKey:"0",className:"already-read-description-toggle"},n.a.createElement("h3",null,"View Description +")),n.a.createElement(A.a.Collapse,{eventKey:"0"},n.a.createElement("div",{className:"book-description",dangerouslySetInnerHTML:{__html:p}}))))),n.a.createElement(T.a.Footer,null,n.a.createElement("div",{className:"book-meta button-area"},e.alreadyRead&&n.a.createElement(M,{book:i,context:"removeBookFromAlreadyRead",removeBookFromAlreadyRead:e.removeBookFromAlreadyRead}),e.savedForLater&&n.a.createElement(n.a.Fragment,null,n.a.createElement(M,{book:i,removeBook:e.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:e.removeBookFromToRead}),n.a.createElement(S,null)),e.searchResult&&n.a.createElement(n.a.Fragment,null,n.a.createElement(B,null),n.a.createElement(S,null))))))):void 0}var H=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).createNewBook=function(e){e.preventDefault(),console.log(t.props.book);var a=t.props.book;t.props.moveBooktoAlreadyRead(a)},t.state={},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.a.createElement("button",{className:"read-action already-read",title:"Move this book to your Already Read shelf",onClick:this.createNewBook},n.a.createElement(p.a,{icon:v.a}))}}]),a}(n.a.Component);var J=function(e){var a=parseInt(e.bookshelfRating);console.log(e.bookshelfRating);var t=null;return t=5===a?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):4===a?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):3===a?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):2===a?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):1===a?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):n.a.createElement("div",{className:"not-yet-rated"},"Not yet rated"),n.a.createElement("div",{className:"star-rating-area"},t)},G=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={originalBookJSON:null,connected:!1},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.book);var a=this.props.book.selfLink;console.log(a),!0!==this.props.alreadyRead&&!0!==this.props.toRead||void 0!==this.props.book.volumeInfo.imageLinks.large&&""!==this.props.book.volumeInfo.imageLinks.large||void 0!==this.props.book.volumeInfo.imageLinks.medium&&""!==this.props.book.volumeInfo.imageLinks.medium||void 0!==this.props.book.volumeInfo.imageLinks.small&&""!==this.props.book.volumeInfo.imageLinks.small||fetch(a).then((function(e){return e.json()})).then((function(a){console.log("Checkout this JSON! ",a),a.hasOwnProperty("error")?e.setState({connected:!1}):(!0===e.props.alreadyRead&&e.props.addNewImagesAlreadyRead(a),!0===e.props.toRead&&e.props.addNewImagesToRead(a),console.log("UPDATED: "+a.volumeInfo.title),e.setState({originalBookJSON:a,connected:!0}))})).catch((function(a){throw e.setState({connected:!1}),a}))}},{key:"render",value:function(){var e=this.state.originalBookJSON;JSON.stringify(e);if(!1===this.state.connected&&(e=this.props.book),null!==e){var a=null,t=null,o=null;if(void 0!==e.volumeInfo)if(void 0!==e.volumeInfo.imageLinks&&(console.log(e.volumeInfo.imageLinks.thumbnail),e.volumeInfo.imageLinks.thumbnail,e.volumeInfo.imageLinks.large,void 0!==e.volumeInfo.imageLinks.large&&""!==e.volumeInfo.imageLinks.large||e.volumeInfo.imageLinks.medium,void 0!==e.volumeInfo.imageLinks.medium&&""!==e.volumeInfo.imageLinks.medium||e.volumeInfo.imageLinks.small,void 0!==e.volumeInfo.imageLinks.small&&""!==e.volumeInfo.imageLinks.small||e.volumeInfo.imageLinks.smallThumbnail,void 0===e.volumeInfo.imageLinks.smallThumbnail&&e.volumeInfo.imageLinks.thumbnail),e.volumeInfo.title,void 0!==e.volumeInfo.subtitle&&e.volumeInfo.subtitle,void 0!==e.volumeInfo.authors&&(a=e.volumeInfo.authors),e.volumeInfo.categories,o=e.volumeInfo.publishedDate,void 0!==e.volumeInfo.authors&&(1===a.length&&(t="By "+a),2===a.length&&(t="By "+a.join(" & ")),a.length>2&&(t="By "+a.join(", "))),o)"Date: "+o.toString();var l=this.props.book.bookshelfRating,s=this.props.book.bookshelfNote,r=this.props.book.bookshelfTimestamp;return console.log(r),n.a.createElement("div",{className:"book-card"},n.a.createElement(P,{bookCoverModal:!0,book:e,alreadyRead:this.props.alreadyRead,savedForLater:this.props.savedForLater,editBook:this.props.editBook,bookshelfRating:l,bookshelfNote:s,bookshelfTimestamp:r,removeBookFromAlreadyRead:this.props.removeBookFromAlreadyRead,removeBookFromToRead:this.props.removeBookFromToRead}),n.a.createElement(P,{bookTitleModal:!0,book:e,alreadyRead:this.props.alreadyRead,savedForLater:this.props.savedForLater,editBook:this.props.editBook,bookshelfRating:l,bookshelfNote:s,bookshelfTimestamp:r,removeBookFromAlreadyRead:this.props.removeBookFromAlreadyRead,removeBookFromToRead:this.props.removeBookFromToRead}),n.a.createElement("div",{className:"book-meta-area"},n.a.createElement("div",{className:"book-meta author"},t),n.a.createElement("div",{className:"book-meta button-area"},!0===this.props.alreadyRead&&n.a.createElement(n.a.Fragment,null,n.a.createElement(J,{bookshelfRating:l})),!0===this.props.toRead&&n.a.createElement(n.a.Fragment,null,n.a.createElement(M,{book:this.props.book,removeBook:this.props.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:this.props.removeBookFromToRead}),n.a.createElement(H,{book:this.props.book,moveBooktoAlreadyRead:this.props.moveBooktoAlreadyRead})),!0===this.props.searchResult&&n.a.createElement(n.a.Fragment,null,n.a.createElement(B,{book:this.props.book,addBookToRead:this.props.addBookToRead}),n.a.createElement(S,{book:this.props.book,addBookAlreadyRead:this.props.addBookAlreadyRead})))))}return"NOT WORKING"}}]),a}(n.a.Component);var W=function(e){var a=e.booksToRead;if(0!==a.length&&void 0!==a){var t=Object(y.a)(a).sort((function(e,a){return e.bookshelfTimestamp>a.bookshelfTimestamp?-1:e.bookshelfTimestamp<a.bookshelfTimestamp?1:e.volumeInfo.title>a.volumeInfo.title?1:e.volumeInfo.title<a.volumeInfo.title?-1:void 0})).slice(0,4);return n.a.createElement("div",{className:"recently-added-to-read-area"},n.a.createElement("h2",{className:"section-title"},"Up Next"),n.a.createElement("div",{className:"results-grid four-col"},t.map((function(a,t){return n.a.createElement(G,{key:a.id,book:a,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromToRead:e.removeBookFromToRead,addNewImagesToRead:e.addNewImagesToRead,savedForLater:!0,toRead:!0})}))))}return n.a.createElement("div",{className:"recently-added-to-read-area nothing-yet"},n.a.createElement("p",null,"Time to ",n.a.createElement("a",{href:"/bookshelf/#search"},"add more books")," to your shelf!"))};var _=function(e){var a=e.booksAlreadyRead;if(0!==a.length&&void 0!==a){var t=Object(y.a)(a).sort((function(e,a){return e.bookshelfTimestamp>a.bookshelfTimestamp?-1:e.bookshelfTimestamp<a.bookshelfTimestamp?1:e.volumeInfo.title>a.volumeInfo.title?1:e.volumeInfo.title<a.volumeInfo.title?-1:void 0})).slice(0,4);return n.a.createElement("div",{className:"recently-added-already-read-area"},n.a.createElement("h2",{className:"section-title"},"Just Finished"),n.a.createElement("div",{className:"results-grid four-col"},t.map((function(a,t){return n.a.createElement(G,{key:a.id,book:a,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromAlreadyRead:e.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.addNewImagesAlreadyRead,alreadyRead:!0})}))))}return n.a.createElement("div",{className:"recently-added-already-read-area nothing-yet"})};var q=function(e){return n.a.createElement("div",{className:"landing-page-area single-page"},n.a.createElement(W,{booksToRead:e.booksToRead,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromToRead:e.removeBookFromToRead,addNewImagesToRead:e.addNewImagesToRead}),n.a.createElement(_,{booksAlreadyRead:e.booksAlreadyRead,editBook:e.editBook,removeBookFromAlreadyRead:e.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.addNewImagesAlreadyRead}))},K=function(e){return n.a.createElement("div",{className:"form-group"},n.a.createElement("input",Object.assign({className:"form-control"},e)))},Y=t(48),z=t.n(Y),Q=function(e){return z.a.get("https://www.googleapis.com/books/v1/volumes?q="+e+"&maxResults=36&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU")},$=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={books:[],noResults:!1},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.location);var e=this.props.location.data;console.log(e),e&&e.results.length>0?this.setState({books:e.results.filter((function(e,a){return a<40}))}):this.setState({noResults:!0})}},{key:"render",value:function(){var e=this;return console.log(this.state.books),console.log(this.props.addBookAlreadyRead),console.log(this.props.test),n.a.createElement("div",{className:"results-page-area single-page"},n.a.createElement("h1",null,"Search Results"),n.a.createElement("div",{className:"results-grid"},this.state.books.map((function(a,t){return n.a.createElement(G,{key:a.id,book:a,searchResult:!0,addBookAlreadyRead:e.props.addBookAlreadyRead,addBookToRead:e.props.addBookToRead})}))))}}]),a}(n.a.Component),X=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleInputChange=function(e){var a=e.target,o=a.name,n=a.value;t.setState(Object(c.a)({},o,n))},t.handleFormSubmit=function(e){if(e.preventDefault(),t.state.title){var a=t.state.title.trim();console.log(a),Q(a).then((function(e){console.log(e.data.items),t.setState({toResults:!0,results:e.data.items})})).catch((function(e){return console.log(e)}))}},t.state={title:"",toResults:!1,results:[]},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log("Search mounted")}},{key:"render",value:function(){return console.log(this.state.title),this.state.toResults?n.a.createElement(w.a,{to:{pathname:"/results",data:{results:this.state.results}}}):n.a.createElement("div",{className:"search-page-area single-page"},n.a.createElement("h1",null,"Search for Books"),n.a.createElement("form",{id:"book-title-search"},n.a.createElement(K,{value:this.state.title,onChange:this.handleInputChange,name:"title",label:"Book Title",placeholder:"Search for a book title or author..."}),n.a.createElement("button",{onClick:this.handleFormSubmit,className:"btn btn-info"},"Find It")))}}]),a}(n.a.Component),Z=function(e){return n.a.createElement("button",{type:"submit",onClick:e.logOutUser},"Log Out")},ee=function(e){return n.a.createElement("button",{type:"submit",onClick:e.resetPassword},"Change Password via Email Link")},ae=function(e){return n.a.createElement("button",{type:"submit",onClick:function(a){return window.confirm("Are you sure you want to permanelty delete your account? All of your information will be removed. You cannot undo this action.")&&void e.deleteAccount()}},"Delete My Account")},te=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).setColor=function(e){e&&t.props.changeSettingsColor(e)},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props.settingsColor;console.log(e);var a=null;"default"===e&&(a="Default (Dark Blue)"),"gray"===e&&(a="Gray"),"green"===e&&(a="Green"),"orange"===e&&(a="Orange"),"purple"===e&&(a="Purple");var t={value:e,label:a};null===e&&(t=null);var o=[{value:"default",label:"Default (Dark Blue)"},{value:"gray",label:"Gray"},{value:"green",label:"Green"},{value:"orange",label:"Orange"},{value:"purple",label:"Purple"}];return t?n.a.createElement(j.a,{placeholder:"Select Color Theme",options:o,defaultValue:t,isSearchable:!0,onChange:this.setColor}):n.a.createElement(j.a,{placeholder:"Select Color Theme",options:o,isSearchable:!0,onChange:this.setColor})}}]),a}(n.a.Component),oe=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).setFont=function(e){e&&t.props.changeSettingsFont(e)},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props.settingsFont;console.log(e);var a=null;"default"===e&&(a="Default"),"handwritten"===e&&(a="Handwritten"),"typewriter"===e&&(a="Typewriter"),"sans"===e&&(a="Sans Serif"),"serif"===e&&(a="Serif");var t={value:e,label:a};null===e&&(t=null);var o=[{value:"default",label:"Default"},{value:"handwritten",label:"Handwritten"},{value:"typewriter",label:"Typewriter"},{value:"sans",label:"Sans Serif"},{value:"serif",label:"Serif"}];return t?n.a.createElement(j.a,{placeholder:"Select Font",options:o,defaultValue:t,isSearchable:!0,onChange:this.setFont}):n.a.createElement(j.a,{placeholder:"Select Font",options:o,isSearchable:!0,onChange:this.setFont})}}]),a}(n.a.Component),ne=t(81),le=t.n(ne),se=t(82),re=t.n(se).a.initializeApp({apiKey:"AIzaSyDniUweenII-q4xtU2jywgLN_lVEcLNnlM",authDomain:"bookshelf-9d11e.firebaseapp.com",databaseURL:"https://bookshelf-9d11e.firebaseio.com",projectId:"bookshelf-9d11e",storageBucket:"bookshelf-9d11e.appspot.com",messagingSenderId:"16890829596",appId:"1:16890829596:web:44b99ad2e1677bca39f8d9"}),ie=le.a.createClass(re.database()),ce=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).resetPassword=function(){var e=re.auth(),a=t.props.loggedInEmail;e.sendPasswordResetEmail(a).then((function(){console.log("Reset password email sent")})).catch((function(e){console.log("ERROR: could not send reset password email")})),t.setState({emailedResetLink:!0})},t.deleteAccount=function(){var e=re.auth().currentUser;e.delete().then((function(){console.log("Current User PERMANENTLY DELETED")})).catch((function(e){console.log("ERROR: could not delete current user")})),t.props.permanentlyDeleteUserAndInfo(e)},t.state={emailedResetLink:!1},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){return console.log(this.props.settingsFont),n.a.createElement("div",{className:"settings-page-area single-page"},n.a.createElement("h1",null,"Settings"),n.a.createElement(te,{settingsColor:this.props.settingsColor,changeSettingsColor:this.props.changeSettingsColor}),n.a.createElement(oe,{settingsFont:this.props.settingsFont,changeSettingsFont:this.props.changeSettingsFont}),n.a.createElement("p",null,"Currently logged in as: ",this.props.loggedInEmail),n.a.createElement(Z,{logOutUser:this.props.logOutUser}),n.a.createElement(ee,{resetPassword:this.resetPassword}),n.a.createElement(ae,{deleteAccount:this.deleteAccount}))}}]),a}(n.a.Component);var me=function(){return n.a.createElement("div",{className:"settings-page-area"},n.a.createElement("h1",null,"Not Found - please go back to the homepage."))},de=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).setView=function(e){e&&t.props.changeToReadView(e)},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props.defaultView;console.log(e);var a=null;"date"===e&&(a="Date (Recently Added)"),"alphabetical"===e&&(a="Alphabetical");var t={value:e,label:a};null===e&&(t=null);var o=[{value:"alphabetical",label:"Alphabetical"},{value:"date",label:"Date (Recently Added)"}];return e?n.a.createElement(j.a,{placeholder:"Alphabetical",options:o,defaultValue:t,isClearable:!0,isSearchable:!0,onChange:this.setView}):n.a.createElement(j.a,{placeholder:"Alphabetical",options:o,isClearable:!0,isSearchable:!0,onChange:this.setView})}}]),a}(n.a.Component),ue=(t(60),function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={booksToRead:[],booksToReadView:""},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this,a=this.props.booksToRead;console.log(a),console.log(a.length);var t=a;return"alphabetical"===this.props.booksToReadView&&(t=Object(y.a)(a).sort((function(e,a){return e.volumeInfo.title>a.volumeInfo.title?1:-1}))),"date"===this.props.booksToReadView&&(t=Object(y.a)(a).sort((function(e,a){return e.bookshelfTimestamp>a.bookshelfTimestamp?-1:e.bookshelfTimestamp<a.bookshelfTimestamp?1:e.volumeInfo.title>a.volumeInfo.title?1:e.volumeInfo.title<a.volumeInfo.title?-1:void 0}))),"rating"===this.props.booksToReadView&&(t=Object(y.a)(a).sort((function(e,a){return e.bookshelfRating>a.bookshelfRating?-1:e.bookshelfRating<a.bookshelfRating?1:e.volumeInfo.title>a.volumeInfo.title?1:e.volumeInfo.title<a.volumeInfo.title?-1:void 0}))),0===a.length||void 0===a?n.a.createElement("div",{className:"saved-for-later-area single-page"},n.a.createElement("h1",null,"To Read"),n.a.createElement("p",{className:"no-books-yet-message"},"You don't have any books saved for later. But you can ",n.a.createElement("a",{href:"/search"},"run a search")," and start adding books!"),n.a.createElement("div",null,this.props.loggedInEmail)):n.a.createElement("div",{className:"saved-for-later-area single-page"},n.a.createElement("h1",null,"To Read"),n.a.createElement("div",{className:"view-type"},n.a.createElement("div",{className:"viewer-label"},"View Your Books by: "),n.a.createElement("div",{className:"viewer-selector-area"},n.a.createElement(de,{defaultView:this.props.booksToReadView,changeToReadView:this.props.changeToReadView}))),n.a.createElement("div",{className:"results-grid"},t.map((function(a,t){return n.a.createElement(G,{key:a.id,book:a,editBook:e.props.editBook,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,savedForLater:!0,toRead:!0,addNewImagesToRead:e.props.addNewImagesToRead})}))))}}]),a}(n.a.Component)),he=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).setView=function(e){e&&t.props.changeAlreadyReadView(e)},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props.defaultView;console.log(e);var a=null;"alphabetical"===e&&(a="Alphabetical"),"rating"===e&&(a="Rating (High to Low)"),"date"===e&&(a="Date (Recently Completed)");var t={value:e,label:a};null===e&&(t=null);var o=[{value:"alphabetical",label:"Alphabetical"},{value:"rating",label:"Rating (High to Low)"},{value:"date",label:"Date (Recently Completed)"}];return e?n.a.createElement(j.a,{placeholder:"Rating",options:o,defaultValue:t,isClearable:!0,isSearchable:!0,onChange:this.setView}):n.a.createElement(j.a,{placeholder:"Rating",options:o,isClearable:!0,isSearchable:!0,onChange:this.setView})}}]),a}(n.a.Component),ge=(t(60),function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this,a=this.props.booksAlreadyRead;console.log(a),console.log(this.props.booksAlreadyReadView);var t=null;return"alphabetical"===this.props.booksAlreadyReadView&&(t=Object(y.a)(a).sort((function(e,a){return e.volumeInfo.title>a.volumeInfo.title?1:-1}))),"date"===this.props.booksAlreadyReadView&&(t=Object(y.a)(a).sort((function(e,a){return e.bookshelfTimestamp>a.bookshelfTimestamp?-1:e.bookshelfTimestamp<a.bookshelfTimestamp?1:e.volumeInfo.title>a.volumeInfo.title?1:e.volumeInfo.title<a.volumeInfo.title?-1:void 0}))),"rating"===this.props.booksAlreadyReadView&&(t=Object(y.a)(a).sort((function(e,a){return e.bookshelfRating>a.bookshelfRating?-1:e.bookshelfRating<a.bookshelfRating?1:e.volumeInfo.title>a.volumeInfo.title?1:e.volumeInfo.title<a.volumeInfo.title?-1:void 0}))),0===a.length||void 0===a?n.a.createElement("div",{className:"previously-read-area single-page"},n.a.createElement("h1",null,"Already Read"),n.a.createElement("p",{className:"no-books-yet-message"},"You haven't recorded any books yet. But you can ",n.a.createElement("a",{href:"/search"},"run a search")," and start adding books!"),n.a.createElement("div",null,this.props.loggedInEmail)):n.a.createElement("div",{className:"previously-read-area single-page"},n.a.createElement("h1",null,"Already Read"),n.a.createElement("div",{className:"view-type"},n.a.createElement("div",{className:"viewer-label"},"View Your Books by: "),n.a.createElement("div",{className:"viewer-selector-area"},n.a.createElement(he,{defaultView:this.props.booksAlreadyReadView,changeAlreadyReadView:this.props.changeAlreadyReadView}))),n.a.createElement("div",{className:"results-grid"},t.map((function(a,t){return n.a.createElement(G,{key:a.id,book:a,editBook:e.props.editBook,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,alreadyRead:!0,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead})}))))}}]),a}(n.a.Component)),pe=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleInputChange=function(e){t.setState(Object(c.a)({},e.target.name,e.target.value)),console.log(e.target.value)},t.handleSubmit=function(e){e.preventDefault(),console.log("Registration submitted");var a=t.state,o=a.email,n=a.password;console.log(t.state),re.auth().createUserWithEmailAndPassword(o,n).then((function(e){t.props.registerNewUser(e)})).catch((function(e){t.setState({error:e})}))},t.state={email:"",password:"",error:null},console.log(t.props),t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.state,a=(e.email,e.password,e.error);return n.a.createElement("div",{className:"login-form-area"},n.a.createElement("p",null,"Enter your information below to register for your free Bookshelf:"),a?n.a.createElement("div",null,a.message):null,n.a.createElement("form",{id:"registration-form",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"registration-area"},n.a.createElement("input",{type:"text",id:"login-form-email",name:"email",label:"Email",required:!0,value:this.email,onChange:this.handleInputChange})),n.a.createElement("div",{className:"registration-area"},n.a.createElement("input",{type:"text",id:"login-form-password",name:"password",label:"Password",required:!0,placeholder:"Password",value:this.password,onChange:this.handleInputChange})),n.a.createElement("button",{type:"submit"},"Register Now")))}}]),a}(n.a.Component),be=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"clb-grail-body color-"+this.props.settingsColor+" font-"+this.props.settingsFont},n.a.createElement(I.a,{basename:"/"},n.a.createElement(w.d,null,n.a.createElement(w.b,{exact:!0,path:"/",component:function(){return n.a.createElement(q,{booksToRead:e.props.booksToRead,booksAlreadyRead:e.props.booksAlreadyRead,editBook:e.props.editBook,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,addNewImagesToRead:e.props.addNewImagesToRead,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead})}}),n.a.createElement(w.b,{exact:!0,path:"/search",component:X}),n.a.createElement(w.b,{exact:!0,path:"/results",render:function(a){return n.a.createElement($,Object.assign({},a,{test:!0,addBookAlreadyRead:e.props.addBookAlreadyRead,addBookToRead:e.props.addBookToRead}))}}),n.a.createElement(w.b,{exact:!0,path:"/saved",component:function(){return n.a.createElement(ue,{booksToRead:e.props.booksToRead,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,editBook:e.props.editBookToRead,booksToReadView:e.props.booksToReadView,changeToReadView:e.props.changeToReadView,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,addNewImagesToRead:e.props.addNewImagesToRead})}}),n.a.createElement(w.b,{exact:!0,path:"/read",component:function(){return n.a.createElement(ge,{booksAlreadyRead:e.props.booksAlreadyRead,booksAlreadyReadView:e.props.booksAlreadyReadView,changeAlreadyReadView:e.props.changeAlreadyReadView,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,editBook:e.props.editBook,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead})}}),n.a.createElement(w.b,{exact:!0,path:"/settings",component:function(){return n.a.createElement(ce,{logOutUser:e.props.logOutUser,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,resetPassword:e.props.resetPassword,permanentlyDeleteUserAndInfo:e.props.permanentlyDeleteUserAndInfo,settingsColor:e.props.settingsColor,changeSettingsColor:e.props.changeSettingsColor,settingsFont:e.props.settingsFont,changeSettingsFont:e.props.changeSettingsFont})}}),n.a.createElement(w.b,{exact:!0,path:"/register",component:function(){return n.a.createElement(pe,{logOutUser:e.props.logOutUser,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail})}}),n.a.createElement(w.b,{component:me}))))}}]),a}(n.a.Component),fe=(t(60),function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).addBookAlreadyRead=function(e){console.log(e),e.bookshelfTimestamp=Date.now(),e.bookshelfRating=0,e.bookshelfNote="",e.bookshelfCover=null,t.setState((function(a){return{booksAlreadyRead:[].concat(Object(y.a)(a.booksAlreadyRead),[e])}}))},t.addBookToRead=function(e){console.log(e),e.bookshelfTimestamp=Date.now(),e.bookshelfRating=0,e.bookshelfNote="",e.bookshelfCover=null,t.setState((function(a){return{booksToRead:[].concat(Object(y.a)(a.booksToRead),[e])}}))},t.moveBooktoAlreadyRead=function(e){console.log(e),e.bookshelfTimestamp=Date.now(),e.bookshelfRating=0,e.bookshelfCover=null,t.setState((function(a){return{booksAlreadyRead:[].concat(Object(y.a)(a.booksAlreadyRead),[e])}})),console.log("MOVED: "+JSON.stringify(e));var a=e.id,o=Object(y.a)(t.state.booksToRead),n=(o.filter((function(e){return e.id===a})),o.map((function(e){return e.id})).indexOf(a));o.splice(n,1),t.setState({booksToRead:o})},t.removeBookFromAlreadyRead=function(e){console.log("Removed: "+JSON.stringify(e));var a=e.id,o=Object(y.a)(t.state.booksAlreadyRead),n=(o.filter((function(e){return e.id===a})),o.map((function(e){return e.id})).indexOf(a));o.splice(n,1),t.setState({booksAlreadyRead:o})},t.removeBookFromToRead=function(e){console.log("Removed: "+JSON.stringify(e));var a=e.id,o=Object(y.a)(t.state.booksToRead),n=(o.filter((function(e){return e.id===a})),o.map((function(e){return e.id})).indexOf(a));o.splice(n,1),t.setState({booksToRead:o})},t.editBook=function(e){console.log("Editing this book: "+JSON.stringify(e));var a=e.id,o=Object(y.a)(t.state.booksAlreadyRead),n=(o.filter((function(e){return e.id===a})),o.map((function(e){return e.id})).indexOf(a)),l=Object(y.a)(t.state.booksAlreadyRead);l[n]=e,console.log(l[n]),t.setState({booksAlreadyRead:l})},t.editBookToRead=function(e){console.log("Editing this book: "+JSON.stringify(e));var a=e.id,o=Object(y.a)(t.state.booksToRead),n=(o.filter((function(e){return e.id===a})),o.map((function(e){return e.id})).indexOf(a)),l=Object(y.a)(t.state.booksToRead);l[n]=e,console.log(l[n]),t.setState({booksToRead:l})},t.addNewImagesAlreadyRead=function(e){console.log("Editing this book: "+JSON.stringify(e));var a=e.id,o=Object(y.a)(t.state.booksAlreadyRead),n=(o.filter((function(e){return e.id===a})),o.map((function(e){return e.id})).indexOf(a)),l=Object(y.a)(t.state.booksAlreadyRead);e.volumeInfo.imageLinks.large?l[n].volumeInfo.imageLinks.large=e.volumeInfo.imageLinks.large:l[n].volumeInfo.imageLinks.large="",e.volumeInfo.imageLinks.medium?l[n].volumeInfo.imageLinks.medium=e.volumeInfo.imageLinks.medium:l[n].volumeInfo.imageLinks.medium="",e.volumeInfo.imageLinks.small?l[n].volumeInfo.imageLinks.small=e.volumeInfo.imageLinks.small:l[n].volumeInfo.imageLinks.small="",e.volumeInfo.imageLinks.smallThumbnail?l[n].volumeInfo.imageLinks.smallThumbnail=e.volumeInfo.imageLinks.smallThumbnail:l[n].volumeInfo.imageLinks.smallThumbnail="",e.volumeInfo.imageLinks.thumbnail?l[n].volumeInfo.imageLinks.thumbnail=e.volumeInfo.imageLinks.thumbnail:l[n].volumeInfo.imageLinks.thumbnail="",console.log(l[n]),t.setState({booksAlreadyRead:l})},t.addNewImagesToRead=function(e){console.log("Editing this book: "+JSON.stringify(e));var a=e.id,o=Object(y.a)(t.state.booksToRead),n=(o.filter((function(e){return e.id===a})),o.map((function(e){return e.id})).indexOf(a)),l=Object(y.a)(t.state.booksToRead);e.volumeInfo.imageLinks.large?l[n].volumeInfo.imageLinks.large=e.volumeInfo.imageLinks.large:l[n].volumeInfo.imageLinks.large="",e.volumeInfo.imageLinks.medium?l[n].volumeInfo.imageLinks.medium=e.volumeInfo.imageLinks.medium:l[n].volumeInfo.imageLinks.medium="",e.volumeInfo.imageLinks.small?l[n].volumeInfo.imageLinks.small=e.volumeInfo.imageLinks.small:l[n].volumeInfo.imageLinks.small="",e.volumeInfo.imageLinks.smallThumbnail?l[n].volumeInfo.imageLinks.smallThumbnail=e.volumeInfo.imageLinks.smallThumbnail:l[n].volumeInfo.imageLinks.smallThumbnail="",e.volumeInfo.imageLinks.thumbnail?l[n].volumeInfo.imageLinks.thumbnail=e.volumeInfo.imageLinks.thumbnail:l[n].volumeInfo.imageLinks.thumbnail="",console.log(l[n]),t.setState({booksToRead:l})},t.changeAlreadyReadView=function(e){var a="alphabetical";e&&("rating"===e.value&&(a="rating"),"date"===e.value&&(a="date")),t.setState({booksAlreadyReadView:a})},t.changeToReadView=function(e){var a="alphabetical";e&&"date"===e.value&&(a="date"),t.setState({booksToReadView:a})},t.changeSettingsColor=function(e){var a="default";e&&(a=e.value),t.setState({settingsColor:a}),localStorage.setItem("bookshelf.settingsColor",a)},t.changeSettingsFont=function(e){var a="default";e&&(a=e.value),t.setState({settingsFont:a}),localStorage.setItem("bookshelf.settingsFont",a)},console.log(t.props.settingsColor),t.state={booksToRead:[],booksAlreadyRead:[],booksToReadView:"alphabetical",booksAlreadyReadView:"alphabetical",settingsColor:"default",settingsFont:"default",settingsTightness:"default"},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount");var e=this.props.loggedInID;console.log("loggedInID:"+e),ie.syncState("".concat(e,"/booksToRead"),{context:this,state:"booksToRead",asArray:!0}),ie.syncState("".concat(e,"/booksAlreadyRead"),{context:this,state:"booksAlreadyRead",asArray:!0}),ie.syncState("".concat(e,"/booksToReadView"),{context:this,state:"booksToReadView",defaultValue:"Alphabetical",asArray:!1}),ie.syncState("".concat(e,"/booksAlreadyReadView"),{context:this,state:"booksAlreadyReadView",defaultValue:"Alphabetical",asArray:!1}),ie.syncState("".concat(e,"/settingsColor"),{context:this,state:"settingsColor",defaultValue:"default",asArray:!1}),ie.syncState("".concat(e,"/settingsFont"),{context:this,state:"settingsFont",defaultValue:"default",asArray:!1}),ie.syncState("".concat(e,"/settingsTightness"),{context:this,state:"settingsTightness",defaultValue:"default",asArray:!1})}},{key:"render",value:function(){JSON.stringify(this.state.booksAlreadyRead);var e=localStorage.getItem("bookshelf.settingsColor"),a=this.state.settingsColor;null!==e&&(a=e);var t=localStorage.getItem("bookshelf.settingsFont"),o=this.state.settingsFont;return null!==t&&(o=t),n.a.createElement(n.a.Fragment,null,n.a.createElement(R,{settingsColor:a,settingsFont:o}),n.a.createElement(be,{logOutUser:this.props.logOutUser,loggedInID:this.props.loggedInID,loggedInEmail:this.props.loggedInEmail,permanentlyDeleteUserAndInfo:this.props.permanentlyDeleteUserAndInfo,booksAlreadyRead:this.state.booksAlreadyRead,booksAlreadyReadView:this.state.booksAlreadyReadView,booksToReadView:this.state.booksToReadView,changeAlreadyReadView:this.changeAlreadyReadView,changeToReadView:this.changeToReadView,settingsColor:a,changeSettingsColor:this.changeSettingsColor,settingsFont:o,changeSettingsFont:this.changeSettingsFont,booksToRead:this.state.booksToRead,editBook:this.editBook,editBookToRead:this.editBookToRead,addBookAlreadyRead:this.addBookAlreadyRead,addBookToRead:this.addBookToRead,moveBooktoAlreadyRead:this.moveBooktoAlreadyRead,removeBookFromAlreadyRead:this.removeBookFromAlreadyRead,removeBookFromToRead:this.removeBookFromToRead,addNewImagesAlreadyRead:this.addNewImagesAlreadyRead,addNewImagesToRead:this.addNewImagesToRead}),n.a.createElement("footer",{className:"clb-bookshelf-footer color-"+a+" font-"+o},"Bookshelf \xb7 ",n.a.createElement("a",{href:"https://github.com/tomatillodesign/bookshelf",target:"_blank"},"Version 1.0")," \xb7 By Chris Liu-Beers, ",n.a.createElement("a",{href:"http://tomatillodesign.com",target:"_blank"},"Tomatillo Design")))}}]),a}(n.a.Component)),ke=t(2),ve=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).sentEmailAddress=null,t.handleShow=function(){return t.setState({showModal:!0})},t.handleClose=function(){return t.setState({showModal:!1})},t.state={showModal:!1,email:"",sentEmail:!1},t.handleEmailChange=t.handleEmailChange.bind(Object(ke.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(ke.a)(t)),t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(e){console.log("Lost password, attempting to send email to: "+this.state.email),e.preventDefault();var a=re.auth(),t=this.state.email;a.sendPasswordResetEmail(t).then((function(){console.log("Reset password email sent")})).catch((function(e){console.log("ERROR: could not send reset password email"),console.log(e)})),this.sentEmailAddress=this.emailAdress,this.setState({sentEmail:!0})}},{key:"render",value:function(){this.sentEmailAddress;return n.a.createElement("div",{className:"lost-password-area"},n.a.createElement("button",{onClick:this.handleShow},"Lost Password"),n.a.createElement(T.a,{show:this.state.showModal,onHide:this.handleClose,className:"clb-single-beer-notes"},n.a.createElement(T.a.Header,{closeButton:!0},n.a.createElement(T.a.Title,null,"Lost Your Password")),n.a.createElement(T.a.Body,null,!0!==this.state.sentEmail?n.a.createElement("form",{className:"lost-pw-area",onSubmit:this.handleSubmit},"Enter your email below to reset your password:",n.a.createElement("div",{className:"login-item"},n.a.createElement("input",{type:"text",id:"lost-pw-form-email",name:"email",label:"Email",required:!0,onChange:this.handleEmailChange})),n.a.createElement("button",{type:"submit",id:"lost-pw-submit"},"Submit")):n.a.createElement("p",{className:"sent-email-message"},"If an account exists for ",this.state.email,", we've sent an email that will allow you to reset your password. Thanks!"))))}}]),a}(n.a.Component),Ee=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleRegistrationSubmit=function(e){e.preventDefault(),console.log("Registration submitted");var a=t.state,o=a.email,n=a.password;console.log(t.state),re.auth().createUserWithEmailAndPassword(o,n).then((function(e){t.props.registerNewUser(e)})).catch((function(e){t.setState({error:e})}))},t.state={showModal:!1,email:"",password:"",error:null},t.handleEmailChange=t.handleEmailChange.bind(Object(ke.a)(t)),t.handlePWChange=t.handlePWChange.bind(Object(ke.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(ke.a)(t)),t.handleRegistrationSubmit=t.handleRegistrationSubmit.bind(Object(ke.a)(t)),t.handleShowRegister=t.handleShowRegister.bind(Object(ke.a)(t)),t.handleCloseRegister=t.handleCloseRegister.bind(Object(ke.a)(t)),t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"handleShowRegister",value:function(e){e.preventDefault(),this.setState({showModal:!0})}},{key:"handleCloseRegister",value:function(e){this.setState({showModal:!1})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePWChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.authenticateUser(this.state.email,this.state.password)}},{key:"render",value:function(){var e,a=this.props.loginError,t=this.state;t.email,t.password,t.error;return n.a.createElement("div",{className:"login-form-area"},n.a.createElement("p",null,"Welcome! Bookshelf is an easy, free way to keep track of your reading.",n.a.createElement("br",null),"It's for personal use only and your information will never be shared with advertisers or social networks.",n.a.createElement("br",null),"If you're new here, ",n.a.createElement("a",{href:"/bookshelf/register",onClick:this.handleShowRegister},"click here to register for a new free account"),". Or if you've already registered, then simply login below."),!0===a?n.a.createElement("h2",null,"Incorrect email/password combination. Please try again:"):n.a.createElement("h2",null,"Login Below:"),n.a.createElement("form",{className:"login-area",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"login-item"},n.a.createElement("input",{type:"text",id:"login-form-email",name:"email",label:"Email",required:!0,onChange:this.handleEmailChange})),n.a.createElement("div",{className:"login-item"},n.a.createElement("input",(e={type:"text",id:"login-form-password",name:"password",label:"Password",required:!0},Object(c.a)(e,"type","password"),Object(c.a)(e,"onChange",this.handlePWChange),e))),n.a.createElement("button",{type:"submit"},"Submit")),n.a.createElement(ve,null),n.a.createElement(T.a,{show:this.state.showModal,onHide:this.handleCloseRegister,className:"clb-single-beer-notes"},n.a.createElement(T.a.Header,{closeButton:!0},n.a.createElement(T.a.Title,null,n.a.createElement("h3",null,"Register for a New Account"))),n.a.createElement(T.a.Body,null,n.a.createElement(pe,{registerNewUser:this.props.registerNewUser}))))}}]),a}(n.a.Component);function Re(e){return n.a.createElement("div",{className:"landing-page-area single-page"},n.a.createElement("h1",null,"Login & New User Registration"),n.a.createElement("div",{className:"login-register-area"},n.a.createElement(Ee,{authenticateUser:e.authenticateUser,loginError:e.loginError,registerNewUser:e.registerNewUser})))}var ye=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).registerNewUser=function(e){var a=e.user.uid,o=e.user.email;console.log(a),re.database().ref().update(Object(c.a)({},a,{ownerID:a,ownerEmail:o,booksToRead:[],booksAlreadyRead:[],booksToReadView:"Alphabetical",booksAlreadyReadView:"Alphabetical",settingsColor:"default",settingsFont:"default",settingsTightness:"default"})),t.setState({loggedInID:a,loggedInEmail:o}),localStorage.setItem("bookshelf.loggedInID",a),localStorage.setItem("bookshelf.loggedInEmail",o),console.log("REGISTERED AND Logged in: "+a)},t.authenticateUser=function(e,a){console.log("AuthenticateUser: "+e),re.auth().signInWithEmailAndPassword(e,a).then((function(a){console.log("User successfully LOGGED IN"+a.user.uid),t.setState({loggedInID:a.user.uid,loggedInEmail:a.user.email,loginError:!1}),localStorage.setItem("bookshelf.loggedInID",a.user.uid),localStorage.setItem("bookshelf.loggedInEmail",e)})).catch((function(e){console.log("ERROR: User trying to log in"),t.setState({loginError:!0})}))},t.authHandler=function(e){var a,o;return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a=re.auth().currentUser,console.log(a),null!==a?(o=a.uid,console.log("Current User ID: "+o),console.log("Current User Email: "+a.email),t.setState({loggedInID:o,loggedInEmail:a.email}),localStorage.setItem("bookshelf.loggedInID",o),localStorage.setItem("bookshelf.loggedInEmail",a.email)):console.log("authHandler == no user found");case 3:case"end":return e.stop()}}))},t.logOutUser=function(e){re.auth().signOut().then((function(){console.log("Logged OUT successful")})).catch((function(e){console.log("ERROR: Trying to log out")})),t.setState({loggedInID:"",loggedInEmail:""}),localStorage.removeItem("bookshelf.loggedInID"),localStorage.removeItem("bookshelf.loggedInEmail"),ie.reset()},t.permanentlyDeleteUserAndInfo=function(e){console.log(e);var a=e.uid;ie.remove(a).then((function(){console.log("User "+a+" permanently deleted")})).catch((function(e){})),t.setState({loggedInID:"",loggedInEmail:""}),localStorage.removeItem("bookshelf.loggedInID"),localStorage.removeItem("bookshelf.loggedInEmail")},t.state={loggedInID:"",loggedInEmail:"",loginError:!1},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log("App.js mounted")}},{key:"render",value:function(){var e=this.state.loggedInID,a=this.state.loggedInEmail,t=this.state.loginError,o=localStorage.getItem("bookshelf.loggedInID"),l=localStorage.getItem("bookshelf.loggedInEmail");return console.log("LOCAL STORAGE: "+o),null!==o&&(e=o),null!==l&&(a=l),n.a.createElement("div",{className:"App"},""!==e?n.a.createElement(n.a.Fragment,null,n.a.createElement(fe,{logOutUser:this.logOutUser,loggedInID:e,loggedInEmail:a,permanentlyDeleteUserAndInfo:this.permanentlyDeleteUserAndInfo,settingsColor:this.state.settingsColor,changeSettingsColor:this.changeSettingsColor})):n.a.createElement(n.a.Fragment,null,n.a.createElement(R,{logOutUser:this.logOutUser,permanentlyDeleteUserAndInfo:this.permanentlyDeleteUserAndInfo}),n.a.createElement("div",{className:"logged-out-area"},n.a.createElement(Re,{registerNewUser:this.registerNewUser,authenticateUser:this.authenticateUser,loginError:t,logOutUser:this.logOutUser}))))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,a,t){e.exports=t(140)},93:function(e,a,t){},95:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},96:function(e,a,t){}},[[88,1,2]]]);
//# sourceMappingURL=main.d2755f8b.chunk.js.map