(this.webpackJsonpbookshelf=this.webpackJsonpbookshelf||[]).push([[0],{130:function(e,t,o){e.exports=o(252)},135:function(e,t,o){},137:function(e,t,o){e.exports=o.p+"static/media/logo.5d5d9eef.svg"},138:function(e,t,o){},199:function(e,t){},201:function(e,t){},209:function(e,t){},211:function(e,t){},245:function(e,t){},246:function(e,t){},248:function(e,t){function o(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id=248},252:function(e,t,o){"use strict";o.r(t);var a=o(0),n=o.n(a),l=o(16),r=o.n(l),s=(o(135),o(118)),i=o.n(s),c=o(4),m=o(8),d=o(7),u=o(9),g=o(10),h=o(11),p=(o(137),o(138),o(15)),b=o(21),f=o(50),v=function(e){return n.a.createElement(p.a,{icon:f.a})},k=o(45),E=function(e){return n.a.createElement(p.a,{icon:k.a})};var R=function(e){return n.a.createElement("header",{className:"header color-"+e.settingsColor+" font-"+e.settingsFont},n.a.createElement("h1",{className:"logo-area"},n.a.createElement("a",{href:"/bookshelf/"},"Bookshelf")),n.a.createElement("nav",Object(c.a)({className:"nav-primary","aria-label":"Main",id:"bookshelf-nav-primary"},"className","main-menu"),n.a.createElement("ul",{id:"menu-main-menu",className:"menu-main-menu"},n.a.createElement("li",{id:"menu-item-search",className:"menu-item search"},n.a.createElement("a",{href:"#search"},n.a.createElement(p.a,{icon:b.b})," New Books")),n.a.createElement("li",{id:"menu-item-saved",className:"menu-item saved"},n.a.createElement("a",{href:"#saved"},n.a.createElement(v,null)," To Read")),n.a.createElement("li",{id:"menu-item-read",className:"menu-item read"},n.a.createElement("a",{href:"#read"},n.a.createElement(E,null)," Already Read")),n.a.createElement("li",{id:"menu-item-settings",className:"menu-item settings"},n.a.createElement("a",{href:"#settings"},n.a.createElement(p.a,{icon:b.a})," Settings")))))},y=o(14),I=o(66),N=o(41),w=o(72),C=o(87),O=o(20),B=o(46),S=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).createNewBook=function(e){e.preventDefault(),console.log(o.props.book);var t=o.props.book;o.props.addBookToRead(t)},o.state={},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.a.createElement("button",{className:"read-action to-read",title:"Add to your To Read shelf",onClick:this.createNewBook},n.a.createElement(p.a,{icon:f.a}))}}]),t}(n.a.Component),T=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).createNewBook=function(e){e.preventDefault(),console.log(o.props.book);var t=o.props.book;o.props.addBookAlreadyRead(t)},o.state={},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.addBookAlreadyRead)}},{key:"render",value:function(){return n.a.createElement("button",{className:"read-action already-read",title:"Add to your Already Read shelf",onClick:this.createNewBook},n.a.createElement(p.a,{icon:k.a}))}}]),t}(n.a.Component),A=o(24),j=function(e){function t(e){return Object(m.a)(this,t),Object(u.a)(this,Object(g.a)(t).call(this,e))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.defaultRating;console.log(e);var t=null;"5"===e&&(t="\u2b50\u2b50\u2b50\u2b50\u2b50 Life-Changing"),"4"===e&&(t="\u2b50\u2b50\u2b50\u2b50 Great"),"3"===e&&(t="\u2b50\u2b50\u2b50 Good"),"2"===e&&(t="\u2b50\u2b50 OK"),"1"===e&&(t="\u2b50 Bad / Didn't Finish");var o={value:e,label:t};null===e&&(o=null);var a=[{value:"5",label:"\u2b50\u2b50\u2b50\u2b50\u2b50 Life-Changing"},{value:"4",label:"\u2b50\u2b50\u2b50\u2b50 Great"},{value:"3",label:"\u2b50\u2b50\u2b50 Good"},{value:"2",label:"\u2b50\u2b50 OK"},{value:"1",label:"\u2b50 Bad / Didn't Finish"}];return e?n.a.createElement(A.a,{placeholder:"Rating",options:a,defaultValue:o,isClearable:!0,isSearchable:!0,onChange:this.props.setRating}):n.a.createElement(A.a,{placeholder:"Rating",options:a,isClearable:!0,isSearchable:!0,onChange:this.props.setRating})}}]),t}(n.a.Component),F=o(278),D=o(281);n.a.Component;function L(e){var t=n.a.useState(new Date),o=Object(w.a)(t,2),a=(o[0],o[1]),l=new Date(e.bookshelfTimestamp).toISOString().slice(0,10);return console.log(l),n.a.createElement(D.a,{id:"date",required:!0,label:"Date Completed",type:"date",defaultValue:l,className:"book-date-field",InputLabelProps:{shrink:!0},onChange:function(t){console.log(t.currentTarget.value),a(t.currentTarget.value),e.getCompletedDate(t.currentTarget.value)}})}var U=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).id=o.props.book.id,o.bookshelfRating=o.props.bookshelfRating,o.bookNotes=o.props.bookshelfNote,o.bookshelfTimestamp=o.props.bookshelfTimestamp,o.editThisBook=function(e){e.preventDefault();var t=o.state.book;console.log(t),console.log(o.state.book.bookshelfTimestamp),void 0===o.bookshelfTimestamp&&(o.bookshelfTimestamp=o.state.book.bookshelfTimestamp),void 0===o.bookshelfRating&&(o.bookshelfRating=o.state.book.bookshelfRating),void 0===o.bookNotes&&(o.bookNotes=[]),t.bookshelfRating=o.bookshelfRating,t.bookshelfNote=o.bookNotes,t.bookshelfTimestamp=o.bookshelfTimestamp;var a=t;console.log(a),o.props.editBook(a)},o.setRating=function(e){e?(o.bookshelfRating=e.value,o.setState({bookshelfRating:e.value})):o.setState({bookshelfRating:505})},o.getCompletedDate=function(e){console.log("Completed DATE: "+o.bookshelfTimestamp);var t=parseInt(new Date(e).getTime().toFixed(0));console.log(t),o.bookshelfTimestamp=t},o.state={currentlyEditing:!0,book:o.props.book,bookshelfNote:o.props.bookshelfNote,bookshelfRating:o.props.bookshelfRating},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){console.log("Current book: "+JSON.stringify(this.props.book)),console.log("Current book RATING: "+JSON.stringify(this.props.bookshelfRating));var e=this.props.bookshelfRating,t=this.props.bookshelfTimestamp;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"edit-book",onSubmit:this.editThisBook},n.a.createElement("div",{className:"top-info-line"},!0!==this.props.hideRating&&n.a.createElement("div",{className:"book-rating-area"},n.a.createElement(j,{setRating:this.setRating,defaultRating:e})),!0!==this.props.hideDate&&n.a.createElement("div",{className:"book-date-area"},n.a.createElement(L,{bookshelfTimestamp:t,getCompletedDate:this.getCompletedDate}))),n.a.createElement("button",{type:"submit",className:"update-this-book"},"Save Changes")))}}]),t}(n.a.Component),V=o(119),M=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).removeThisBook=function(e){e.preventDefault();var t=o.props.book;"removeBookFromAlreadyRead"===o.props.context&&o.props.removeBookFromAlreadyRead(t),"removeBookFromToRead"===o.props.context&&o.props.removeBookFromToRead(t)},o.state={},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return n.a.createElement("button",{className:"read-action remove-book",title:"Permanently remove this book from your collection",onClick:function(t){return window.confirm("Are you sure you want to delete this book? All of your ratings and notes for this book will also be removed. You cannot undo this action.")&&e.removeThisBook(t)}},n.a.createElement(p.a,{icon:V.a}))}}]),t}(n.a.Component),x=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).createNewBook=function(e){e.preventDefault(),console.log(o.props.book);var t=o.props.book;o.props.moveBooktoAlreadyRead(t)},o.state={},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.a.createElement("button",{className:"read-action already-read",title:"Move this book to your Already Read shelf",onClick:this.createNewBook},n.a.createElement(p.a,{icon:k.a}))}}]),t}(n.a.Component),P=o(120),z=o.n(P),_=o(121),q=o.n(_).a.initializeApp({apiKey:"AIzaSyDniUweenII-q4xtU2jywgLN_lVEcLNnlM",authDomain:"bookshelf-9d11e.firebaseapp.com",databaseURL:"https://bookshelf-9d11e.firebaseio.com",projectId:"bookshelf-9d11e",storageBucket:"bookshelf-9d11e.appspot.com",messagingSenderId:"16890829596",appId:"1:16890829596:web:44b99ad2e1677bca39f8d9"}),H=z.a.createClass(q.database()),W=o(122),G=o.n(W),J=(o(63),function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).handleChangeUsername=function(e){return o.setState({username:e.target.value})},o.handleUploadStart=function(){return o.setState({isUploading:!0,progress:0})},o.handleProgress=function(e){return o.setState({progress:e})},o.handleUploadError=function(e){o.setState({isUploading:!1}),console.error(e)},o.handleUploadSuccess=function(e){o.setState({bookCover:e,progress:100,isUploading:!1}),q.storage().ref("images").child(e).getDownloadURL().then((function(e){return o.setState({bookCoverURL:e},o.props.updateCoverImg(o.props.bookObj,e))}))},o.state={bookCover:"",isUploading:!1,progress:0,bookCoverURL:"",isEditing:!0},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("h3",null,"Current URL: ",this.state.bookCoverURL),this.state.isUploading&&n.a.createElement("p",null,"Progress: ",this.state.progress),this.state.bookCoverURL&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,"Updated cover:"),n.a.createElement("div",{className:"updated-cover-thumbnail"},n.a.createElement("img",{src:this.state.bookCoverURL}))),n.a.createElement("label",{className:"button replace-cover",style:{}},"Replace Cover",n.a.createElement(G.a,{hidden:!0,accept:"image/*",randomizeFilename:!0,storageRef:q.storage().ref("images"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress}))))}}]),t}(a.Component));function Y(e){var t=n.a.useState(!1),o=Object(w.a)(t,2),a=o[0],l=o[1],r=function(){return l(!1)},s=function(){return l(!0)},i=e.book;console.log(i);var c=e.bookCoverModal,m=e.bookTitleModal,d=null,u=null,g=null,h=!1,p=null,b=null,f=null,v=null,k=null,E=null;!0!==e.searchResult?(u=i.title,console.log(u),void 0!==i.subtitle&&(h=!0,f=" has-subtitle",g=n.a.createElement("h3",{className:"book-subtitle"},i.subtitle)),void 0!==i.authors&&(b=i.authors),p=i.description,i.categories,k=i.publishedDate,E=i.pageCount,d=void 0==i.coverImg||null==i.coverImg?"https://firebasestorage.googleapis.com/v0/b/bookshelf-9d11e.appspot.com/o/images%2Foverstory-cover.jpg?alt=media&token=52aa3fae-7968-459b-abab-c71daa39d547":i.coverImg,void 0!==i.authors&&(1===b.length&&(v="By "+b),2===b.length&&(v="By "+b.join(" & ")),b.length>2&&(v="By "+b.join(", ")),v=h?n.a.createElement("div",{className:"authors"+f},v,", ",E," pages"):n.a.createElement("div",{className:"authors"},v,", ",E," pages")),k&&k.toString()):void 0!==i.volumeInfo&&(void 0!==i.volumeInfo.imageLinks&&(console.log(i.volumeInfo.imageLinks.thumbnail),d=i.volumeInfo.imageLinks.thumbnail,d=i.volumeInfo.imageLinks.large,void 0!==i.volumeInfo.imageLinks.large&&""!==i.volumeInfo.imageLinks.large||(d=i.volumeInfo.imageLinks.medium),void 0!==i.volumeInfo.imageLinks.medium&&""!==i.volumeInfo.imageLinks.medium||(d=i.volumeInfo.imageLinks.small),void 0!==i.volumeInfo.imageLinks.small&&""!==i.volumeInfo.imageLinks.small||(d=i.volumeInfo.imageLinks.smallThumbnail),void 0===i.volumeInfo.imageLinks.smallThumbnail&&(d=i.volumeInfo.imageLinks.thumbnail)),u=i.volumeInfo.title,void 0!==i.volumeInfo.subtitle&&(h=!0,f=" has-subtitle",g=n.a.createElement("h3",{className:"book-subtitle"},i.volumeInfo.subtitle)),void 0!==i.volumeInfo.authors&&(b=i.volumeInfo.authors),p=i.volumeInfo.description,i.volumeInfo.categories,k=i.volumeInfo.publishedDate,E=i.volumeInfo.pageCount,void 0!==i.volumeInfo.authors&&(1===b.length&&(v="By "+b),2===b.length&&(v="By "+b.join(" & ")),b.length>2&&(v="By "+b.join(", ")),v=h?n.a.createElement("div",{className:"authors"+f},v,", ",E," pages"):n.a.createElement("div",{className:"authors"},v,", ",E," pages")),k&&k.toString());var R=null;return!0!==e.searchResult&&(!0!==e.alreadyRead?R=n.a.createElement(U,{book:i,hideRating:!0,hideDate:!0,bookshelfRating:e.bookshelfRating,bookshelfNote:e.bookshelfNote,bookshelfTimestamp:e.bookshelfTimestamp,editBook:e.editBook}):e.alreadyRead&&(R=n.a.createElement(U,{book:i,bookshelfRating:e.bookshelfRating,bookshelfNote:e.bookshelfNote,bookshelfTimestamp:e.bookshelfTimestamp,editBook:e.editBook}))),m?n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:s,className:"card-book-title"},n.a.createElement("h2",{className:"book-title"},u)),n.a.createElement(O.a,{show:a,onHide:r,className:"single-book-modal font-"+e.settingsFont+" color-"+e.settingsColor},n.a.createElement(O.a.Header,{closeButton:!0},n.a.createElement(O.a.Title,{className:"single-book-title"},u)),n.a.createElement(O.a.Body,null,n.a.createElement("div",{className:"small-thumbnail-area"},n.a.createElement("img",{src:d}),!0!==e.searchResult&&n.a.createElement(J,{bookObj:i,updateCoverImg:e.updateCoverImg})),g,v,n.a.createElement(n.a.Fragment,null,R,n.a.createElement(B.a,null,n.a.createElement(B.a.Toggle,{as:C.a,variant:"link",eventKey:"0",className:"already-read-description-toggle"},n.a.createElement("h3",null,"Description +")),n.a.createElement(B.a.Collapse,{eventKey:"0"},n.a.createElement("div",{className:"book-description",dangerouslySetInnerHTML:{__html:p}}))))),n.a.createElement(O.a.Footer,null,n.a.createElement("div",{className:"book-meta button-area"},e.alreadyRead&&n.a.createElement(M,{book:i,context:"removeBookFromAlreadyRead",removeBookFromAlreadyRead:e.removeBookFromAlreadyRead}),e.savedForLater&&n.a.createElement(n.a.Fragment,null,n.a.createElement(M,{book:i,removeBook:e.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:e.removeBookFromToRead}),n.a.createElement(x,{book:e.book,coverImageURL:d,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead})),e.searchResult&&n.a.createElement(n.a.Fragment,null,n.a.createElement(S,null),n.a.createElement(T,{coverImageURL:d,addBookAlreadyRead:e.addBookAlreadyRead})))))):c?(null!==d&&d.startsWith("http://")&&(d=d.replace("http://","https://")),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"cover-image-area"},n.a.createElement("button",{onClick:s,className:"card-book-cover"},n.a.createElement("img",{src:d,className:"cover-image"}))),n.a.createElement(O.a,{show:a,onHide:r,className:"single-book-modal font-"+e.settingsFont+" color-"+e.settingsColor},n.a.createElement(O.a.Header,{closeButton:!0},n.a.createElement(O.a.Title,{className:"single-book-title"},u)),n.a.createElement(O.a.Body,null,n.a.createElement("div",{className:"small-thumbnail-area"},n.a.createElement("img",{src:d}),!0!==e.searchResult&&n.a.createElement(J,{bookObj:i,updateCoverImg:e.updateCoverImg})),g,v,R,n.a.createElement(B.a,null,n.a.createElement(B.a.Toggle,{as:C.a,variant:"link",eventKey:"0",className:"already-read-description-toggle"},n.a.createElement("h3",null,"View Description +")),n.a.createElement(B.a.Collapse,{eventKey:"0"},n.a.createElement("div",{className:"book-description",dangerouslySetInnerHTML:{__html:p}})))),n.a.createElement(O.a.Footer,null,n.a.createElement("div",{className:"book-meta button-area"},e.alreadyRead&&n.a.createElement(M,{book:i,context:"removeBookFromAlreadyRead",removeBookFromAlreadyRead:e.removeBookFromAlreadyRead}),e.savedForLater&&n.a.createElement(n.a.Fragment,null,n.a.createElement(M,{book:i,removeBook:e.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:e.removeBookFromToRead}),n.a.createElement(x,{book:e.book,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead})),e.searchResult&&n.a.createElement(n.a.Fragment,null,n.a.createElement(S,null),n.a.createElement(T,null))))))):void 0}var K=function(e){var t=parseInt(e.bookshelfRating);console.log(e.bookshelfRating);var o=null;return o=5===t?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):4===t?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):3===t?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):2===t?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c})),n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):1===t?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"star-icon"},n.a.createElement(p.a,{icon:b.c}))):n.a.createElement("div",{className:"not-yet-rated"},"Not yet rated"),n.a.createElement("div",{className:"star-rating-area"},o)},Q=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).state={originalBookJSON:null,connected:!1},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.book)}},{key:"render",value:function(){var e=this.state.originalBookJSON;JSON.stringify(e);if(!1===this.state.connected&&(e=this.props.book),null!==e){var t=null,o=null,a=null;if(e.title,void 0!==e.subtitle&&e.subtitle,void 0!==e.authors&&(t=e.authors),e.categories,a=e.publishedDate,void 0!==e.authors&&(1===t.length&&(o="By "+t),2===t.length&&(o="By "+t.join(" & ")),t.length>2&&(o="By "+t.join(", "))),a)"Date: "+a.toString();var l=this.props.book.bookshelfRating,r=this.props.book.bookshelfNote,s=this.props.book.bookshelfTimestamp;return console.log(s),n.a.createElement("div",{className:"book-card"},n.a.createElement(Y,{settingsFont:this.props.settingsFont,settingsColor:this.props.settingsColor,bookCoverModal:!0,book:e,alreadyRead:this.props.alreadyRead,savedForLater:this.props.savedForLater,editBook:this.props.editBook,bookshelfRating:l,bookshelfNote:r,bookshelfTimestamp:s,removeBookFromAlreadyRead:this.props.removeBookFromAlreadyRead,removeBookFromToRead:this.props.removeBookFromToRead,searchResult:this.props.searchResult,moveBooktoAlreadyRead:this.props.moveBooktoAlreadyRead,updateCoverImg:this.props.updateCoverImg}),n.a.createElement(Y,{settingsFont:this.props.settingsFont,settingsColor:this.props.settingsColor,bookTitleModal:!0,book:e,alreadyRead:this.props.alreadyRead,savedForLater:this.props.savedForLater,editBook:this.props.editBook,bookshelfRating:l,bookshelfNote:r,bookshelfTimestamp:s,removeBookFromAlreadyRead:this.props.removeBookFromAlreadyRead,removeBookFromToRead:this.props.removeBookFromToRead,searchResult:this.props.searchResult,moveBooktoAlreadyRead:this.props.moveBooktoAlreadyRead,updateCoverImg:this.props.updateCoverImg}),n.a.createElement("div",{className:"book-meta-area"},n.a.createElement("div",{className:"book-meta author"},o),n.a.createElement("div",{className:"book-meta button-area"},!0===this.props.alreadyRead&&n.a.createElement(n.a.Fragment,null,n.a.createElement(K,{bookshelfRating:l})),!0===this.props.toRead&&n.a.createElement(n.a.Fragment,null,n.a.createElement(M,{book:this.props.book,removeBook:this.props.removeBookFromToRead,context:"removeBookFromToRead",removeBookFromToRead:this.props.removeBookFromToRead}),n.a.createElement(x,{book:this.props.book,moveBooktoAlreadyRead:this.props.moveBooktoAlreadyRead})),!0===this.props.searchResult&&n.a.createElement(n.a.Fragment,null,n.a.createElement(S,{book:this.props.book,addBookToRead:this.props.addBookToRead}),n.a.createElement(T,{book:this.props.book,addBookAlreadyRead:this.props.addBookAlreadyRead})))))}return"NOT WORKING"}}]),t}(n.a.Component);var $=function(e){var t=e.booksToRead;if(void 0!==t&&0!==t.length){var o=Object(y.a)(t).sort((function(e,t){return e.bookshelfTimestamp>t.bookshelfTimestamp?-1:e.bookshelfTimestamp<t.bookshelfTimestamp?1:e.title>t.title?1:e.title<t.title?-1:void 0})).slice(0,4);return n.a.createElement("div",{className:"recently-added-to-read-area"},n.a.createElement("h2",{className:"section-title"},"Up Next"),n.a.createElement("div",{className:"results-grid four-col"},o.map((function(t,o){return n.a.createElement(Q,{key:t.id,book:t,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromToRead:e.removeBookFromToRead,addNewImagesToRead:e.addNewImagesToRead,savedForLater:!0,toRead:!0,settingsFont:e.settingsFont,settingsColor:e.settingsColor,updateCoverImg:e.updateCoverImg})}))))}return n.a.createElement("div",{className:"recently-added-to-read-area nothing-yet"},n.a.createElement("p",null,"Time to ",n.a.createElement("a",{href:"/bookshelf/#search"},"add more books")," to your shelf!"))};var X=function(e){var t=e.booksAlreadyRead;if(void 0!==t&&0!==t.length){var o=Object(y.a)(t).sort((function(e,t){return e.bookshelfTimestamp>t.bookshelfTimestamp?-1:e.bookshelfTimestamp<t.bookshelfTimestamp?1:e.volumeInfo.title>t.volumeInfo.title?1:e.volumeInfo.title<t.volumeInfo.title?-1:void 0})).slice(0,4);return n.a.createElement("div",{className:"recently-added-already-read-area"},n.a.createElement("h2",{className:"section-title"},"Just Finished"),n.a.createElement("div",{className:"results-grid four-col"},o.map((function(t,o){return n.a.createElement(Q,{key:t.id,book:t,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromAlreadyRead:e.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.addNewImagesAlreadyRead,alreadyRead:!0,settingsFont:e.settingsFont,settingsColor:e.settingsColor,updateCoverImg:e.updateCoverImg})}))))}return n.a.createElement("div",{className:"recently-added-already-read-area nothing-yet"})};var Z=function(e){return n.a.createElement("div",{className:"landing-page-area single-page"},e.notification&&n.a.createElement("div",{className:"notification-area"},e.notification),n.a.createElement($,{booksToRead:e.booksToRead,editBook:e.editBook,moveBooktoAlreadyRead:e.moveBooktoAlreadyRead,removeBookFromToRead:e.removeBookFromToRead,addNewImagesToRead:e.addNewImagesToRead,settingsFont:e.settingsFont,settingsColor:e.settingsColor,updateCoverImg:e.updateCoverImg}),n.a.createElement(X,{booksAlreadyRead:e.booksAlreadyRead,editBook:e.editBook,removeBookFromAlreadyRead:e.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.addNewImagesAlreadyRead,settingsFont:e.settingsFont,settingsColor:e.settingsColor,updateCoverImg:e.updateCoverImg}))},ee=function(e){return n.a.createElement("div",{className:"form-group"},n.a.createElement("input",Object.assign({className:"form-control"},e)))},te=o(60),oe=o.n(te),ae=function(e){return oe.a.get("https://www.googleapis.com/books/v1/volumes?q="+e+"&maxResults=36&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU")},ne=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).state={books:[],noResults:!1},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.location);var e=this.props.location.data;console.log(e),e&&e.results.length>0?this.setState({books:e.results.filter((function(e,t){return t<40}))}):this.setState({noResults:!0})}},{key:"render",value:function(){var e=this;return console.log(this.state.books),console.log(this.props.addBookAlreadyRead),console.log(this.props.test),n.a.createElement("div",{className:"results-page-area single-page"},this.props.notification&&n.a.createElement("div",{className:"notification-area"},this.props.notification),n.a.createElement("h1",null,"Search Results"),n.a.createElement("div",{className:"results-grid"},this.state.books.map((function(t,o){return n.a.createElement(Q,{key:t.id,book:t,searchResult:!0,addBookAlreadyRead:e.props.addBookAlreadyRead,addBookToRead:e.props.addBookToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor})}))))}}]),t}(n.a.Component),le=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,a=t.name,n=t.value;o.setState(Object(c.a)({},a,n))},o.handleFormSubmit=function(e){if(e.preventDefault(),o.state.title){var t=o.state.title.trim();console.log(t),ae(t).then((function(e){console.log(e.data.items),o.setState({toResults:!0,results:e.data.items})})).catch((function(e){return console.log(e)}))}},o.state={title:"",toResults:!1,results:[]},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log("Search mounted")}},{key:"render",value:function(){return console.log(this.state.title),this.state.toResults?n.a.createElement(N.a,{to:{pathname:"/results",data:{results:this.state.results}}}):n.a.createElement("div",{className:"search-page-area single-page"},n.a.createElement("h1",null,"Search for Books"),n.a.createElement("form",{id:"book-title-search"},n.a.createElement(ee,{value:this.state.title,onChange:this.handleInputChange,name:"title",label:"Book Title",placeholder:"Search for a book title or author..."}),n.a.createElement("button",{onClick:this.handleFormSubmit,className:"btn btn-info"},"Find It")))}}]),t}(n.a.Component),re=function(e){return n.a.createElement("button",{type:"submit",onClick:e.logOutUser,className:"settings-button"},"Log Out")},se=function(e){return n.a.createElement("button",{type:"submit",onClick:e.resetPassword,className:"settings-button"},"Change Password via Email Link")},ie=function(e){return n.a.createElement("button",{className:"settings-button delete-account",type:"submit",onClick:function(t){return window.confirm("Are you sure you want to permanelty delete your account? All of your information will be removed. You cannot undo this action.")&&void e.deleteAccount()}},"Delete My Account")},ce=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).setColor=function(e){e&&o.props.changeSettingsColor(e)},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.settingsColor;console.log(e);var t=null;"default"===e&&(t="Default (Dark Blue)"),"gray"===e&&(t="Gray"),"green"===e&&(t="Green"),"orange"===e&&(t="Orange"),"purple"===e&&(t="Purple");var o={value:e,label:t};null===e&&(o=null);var a=[{value:"default",label:"Default (Dark Blue)"},{value:"gray",label:"Gray"},{value:"green",label:"Green"},{value:"orange",label:"Orange"},{value:"purple",label:"Purple"}];return o?n.a.createElement(A.a,{placeholder:"Select Color Theme",options:a,defaultValue:o,isSearchable:!0,onChange:this.setColor}):n.a.createElement(A.a,{placeholder:"Select Color Theme",options:a,isSearchable:!0,onChange:this.setColor})}}]),t}(n.a.Component),me=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).setFont=function(e){e&&o.props.changeSettingsFont(e)},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.settingsFont;console.log(e);var t=null;"default"===e&&(t="Default"),"handwritten"===e&&(t="Handwritten"),"typewriter"===e&&(t="Typewriter"),"sans"===e&&(t="Sans Serif"),"serif"===e&&(t="Serif");var o={value:e,label:t};null===e&&(o=null);var a=[{value:"default",label:"Default"},{value:"handwritten",label:"Handwritten"},{value:"typewriter",label:"Typewriter"},{value:"sans",label:"Sans Serif"},{value:"serif",label:"Serif"}];return o?n.a.createElement(A.a,{placeholder:"Select Font",options:a,defaultValue:o,isSearchable:!0,onChange:this.setFont}):n.a.createElement(A.a,{placeholder:"Select Font",options:a,isSearchable:!0,onChange:this.setFont})}}]),t}(n.a.Component),de=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).resetPassword=function(){var e=q.auth(),t=o.props.loggedInEmail;e.sendPasswordResetEmail(t).then((function(){console.log("Reset password email sent")})).catch((function(e){console.log("ERROR: could not send reset password email")})),o.setState({emailedResetLink:!0})},o.deleteAccount=function(){var e=q.auth().currentUser;e.delete().then((function(){console.log("Current User PERMANENTLY DELETED")})).catch((function(e){console.log("ERROR: could not delete current user")})),o.props.permanentlyDeleteUserAndInfo(e)},o.state={emailedResetLink:!1},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return console.log(this.props.settingsFont),n.a.createElement("div",{className:"settings-page-area single-page"},n.a.createElement("h1",null,"Settings"),n.a.createElement("div",{className:"color-font-area"},n.a.createElement("div",{className:"select-color-area"},n.a.createElement("h4",null,"Select Color"),n.a.createElement(ce,{settingsColor:this.props.settingsColor,changeSettingsColor:this.props.changeSettingsColor})),n.a.createElement("div",{className:"select-font-area"},n.a.createElement("h4",null,"Select Font"),n.a.createElement(me,{settingsFont:this.props.settingsFont,changeSettingsFont:this.props.changeSettingsFont}))),n.a.createElement("p",null,"Currently logged in as: ",this.props.loggedInEmail),n.a.createElement("div",{className:"settings-action-buttons-area"},n.a.createElement(re,{logOutUser:this.props.logOutUser}),n.a.createElement(se,{resetPassword:this.resetPassword}),n.a.createElement(ie,{deleteAccount:this.deleteAccount})))}}]),t}(n.a.Component);var ue=function(){return n.a.createElement("div",{className:"settings-page-area"},n.a.createElement("h1",null,"Not Found - please go back to the homepage."))},ge=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).setView=function(e){e&&o.props.changeToReadView(e)},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.defaultView;console.log(e);var t=null;"date"===e&&(t="Date (Recently Added)"),"alphabetical"===e&&(t="Alphabetical");var o={value:e,label:t};null===e&&(o=null);var a=[{value:"alphabetical",label:"Alphabetical"},{value:"date",label:"Date (Recently Added)"}];return e?n.a.createElement(A.a,{placeholder:"Alphabetical",options:a,defaultValue:o,isClearable:!0,isSearchable:!0,onChange:this.setView}):n.a.createElement(A.a,{placeholder:"Alphabetical",options:a,isClearable:!0,isSearchable:!0,onChange:this.setView})}}]),t}(n.a.Component),he=(o(63),function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).state={booksToRead:[],booksToReadView:""},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.booksToRead;console.log(this.props),console.log(t);var o=t;return"alphabetical"===this.props.booksToReadView&&(o=Object(y.a)(t).sort((function(e,t){return e.title>t.title?1:-1}))),"date"===this.props.booksToReadView&&(o=Object(y.a)(t).sort((function(e,t){return e.bookshelfTimestamp>t.bookshelfTimestamp?-1:e.bookshelfTimestamp<t.bookshelfTimestamp?1:e.title>t.title?1:e.title<t.title?-1:void 0}))),"rating"===this.props.booksToReadView&&(o=Object(y.a)(t).sort((function(e,t){return e.bookshelfRating>t.bookshelfRating?-1:e.bookshelfRating<t.bookshelfRating?1:e.title>t.title?1:e.title<t.title?-1:void 0}))),void 0===t||0===t.length?n.a.createElement("div",{className:"saved-for-later-area single-page"},n.a.createElement("h1",null,"To Read"),n.a.createElement("p",{className:"no-books-yet-message"},"You don't have any books saved for later. But you can ",n.a.createElement("a",{href:"/search"},"run a search")," and start adding books!"),n.a.createElement("div",null,this.props.loggedInEmail)):n.a.createElement("div",{className:"saved-for-later-area single-page"},n.a.createElement("h1",null,"To Read"),this.props.notification&&n.a.createElement("div",{className:"notification-area"},this.props.notification),n.a.createElement("div",{className:"view-type"},n.a.createElement("div",{className:"viewer-label"},"View Your Books by: "),n.a.createElement("div",{className:"viewer-selector-area"},n.a.createElement(ge,{defaultView:this.props.booksToReadView,changeToReadView:this.props.changeToReadView}))),n.a.createElement("div",{className:"results-grid"},o.map((function(t,o){return n.a.createElement(Q,{key:t.id,book:t,editBook:e.props.editBook,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,savedForLater:!0,toRead:!0,addNewImagesToRead:e.props.addNewImagesToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor})}))))}}]),t}(n.a.Component)),pe=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).setView=function(e){e&&o.props.changeAlreadyReadView(e)},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.defaultView;console.log(e);var t=null;"alphabetical"===e&&(t="Alphabetical"),"rating"===e&&(t="Rating (High to Low)"),"date"===e&&(t="Date (Recently Completed)");var o={value:e,label:t};null===e&&(o=null);var a=[{value:"alphabetical",label:"Alphabetical"},{value:"rating",label:"Rating (High to Low)"},{value:"date",label:"Date (Recently Completed)"}];return e?n.a.createElement(A.a,{placeholder:"Rating",options:a,defaultValue:o,isClearable:!0,isSearchable:!0,onChange:this.setView}):n.a.createElement(A.a,{placeholder:"Rating",options:a,isClearable:!0,isSearchable:!0,onChange:this.setView})}}]),t}(n.a.Component),be=(o(63),function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).state={},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.booksAlreadyRead;console.log(t),console.log(this.props.booksAlreadyReadView);var o=null;return"alphabetical"===this.props.booksAlreadyReadView&&(o=Object(y.a)(t).sort((function(e,t){return e.title>t.title?1:-1}))),"date"===this.props.booksAlreadyReadView&&(o=Object(y.a)(t).sort((function(e,t){return e.bookshelfTimestamp>t.bookshelfTimestamp?-1:e.bookshelfTimestamp<t.bookshelfTimestamp?1:e.title>t.title?1:e.title<t.title?-1:void 0}))),"rating"===this.props.booksAlreadyReadView&&(o=Object(y.a)(t).sort((function(e,t){return e.bookshelfRating>t.bookshelfRating?-1:e.bookshelfRating<t.bookshelfRating?1:e.title>t.title?1:e.title<t.title?-1:void 0}))),void 0===t||0===t.length?n.a.createElement("div",{className:"previously-read-area single-page"},n.a.createElement("h1",null,"Already Read"),n.a.createElement("p",{className:"no-books-yet-message"},"You haven't recorded any books yet. But you can ",n.a.createElement("a",{href:"/search"},"run a search")," and start adding books!"),n.a.createElement("div",null,this.props.loggedInEmail)):n.a.createElement("div",{className:"previously-read-area single-page"},n.a.createElement("h1",null,"Already Read"),n.a.createElement("div",{className:"view-type"},n.a.createElement("div",{className:"viewer-label"},"View Your Books by: "),n.a.createElement("div",{className:"viewer-selector-area"},n.a.createElement(pe,{defaultView:this.props.booksAlreadyReadView,changeAlreadyReadView:this.props.changeAlreadyReadView}))),n.a.createElement("div",{className:"results-grid"},o.map((function(t,o){return n.a.createElement(Q,{key:t.id,book:t,editBook:e.props.editBook,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,alreadyRead:!0,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor})}))))}}]),t}(n.a.Component)),fe=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).handleInputChange=function(e){o.setState(Object(c.a)({},e.target.name,e.target.value)),console.log(e.target.value)},o.handleSubmit=function(e){e.preventDefault(),console.log("Registration submitted");var t=o.state,a=t.email,n=t.password;console.log(o.state),q.auth().createUserWithEmailAndPassword(a,n).then((function(e){o.props.registerNewUser(e)})).catch((function(e){o.setState({error:e})}))},o.state={email:"",password:"",error:null},console.log(o.props),o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=(e.email,e.password,e.error);return n.a.createElement("div",{className:"login-form-area"},n.a.createElement("p",null,"Enter your information below to register for your free Bookshelf:"),t?n.a.createElement("div",null,t.message):null,n.a.createElement("form",{id:"registration-form",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"registration-area"},n.a.createElement("input",{type:"text",id:"login-form-email",name:"email",label:"Email",required:!0,value:this.email,onChange:this.handleInputChange})),n.a.createElement("div",{className:"registration-area"},n.a.createElement("input",{type:"text",id:"login-form-password",name:"password",label:"Password",required:!0,placeholder:"Password",value:this.password,onChange:this.handleInputChange})),n.a.createElement("button",{type:"submit"},"Register Now")))}}]),t}(n.a.Component),ve=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).state={},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props),console.log(this.props.books),n.a.createElement("div",{className:"clb-grail-body color-"+this.props.settingsColor+" font-"+this.props.settingsFont},n.a.createElement(I.a,{basename:"/"},n.a.createElement(N.d,null,n.a.createElement(N.b,{exact:!0,path:"/",component:function(){return n.a.createElement(Z,{booksToRead:e.props.booksToRead,booksAlreadyRead:e.props.booksAlreadyRead,editBook:e.props.editBook,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,addNewImagesToRead:e.props.addNewImagesToRead,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,notification:e.props.notification,updateCoverImg:e.props.updateCoverImg})}}),n.a.createElement(N.b,{exact:!0,path:"/search",component:le}),n.a.createElement(N.b,{exact:!0,path:"/results",render:function(t){return n.a.createElement(ne,Object.assign({},t,{test:!0,addBookAlreadyRead:e.props.addBookAlreadyRead,addBookToRead:e.props.addBookToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,notification:e.props.notification}))}}),n.a.createElement(N.b,{exact:!0,path:"/saved",component:function(){return n.a.createElement(he,{booksToRead:e.props.booksToRead,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,editBook:e.props.editBookToRead,booksToReadView:e.props.booksToReadView,changeToReadView:e.props.changeToReadView,moveBooktoAlreadyRead:e.props.moveBooktoAlreadyRead,removeBookFromToRead:e.props.removeBookFromToRead,addNewImagesToRead:e.props.addNewImagesToRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,notification:e.props.notification,updateCoverImg:e.props.updateCoverImg})}}),n.a.createElement(N.b,{exact:!0,path:"/read",component:function(){return n.a.createElement(be,{booksAlreadyRead:e.props.booksAlreadyRead,booksAlreadyReadView:e.props.booksAlreadyReadView,changeAlreadyReadView:e.props.changeAlreadyReadView,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,editBook:e.props.editBook,removeBookFromAlreadyRead:e.props.removeBookFromAlreadyRead,addNewImagesAlreadyRead:e.props.addNewImagesAlreadyRead,settingsFont:e.props.settingsFont,settingsColor:e.props.settingsColor,updateCoverImg:e.props.updateCoverImg})}}),n.a.createElement(N.b,{exact:!0,path:"/settings",component:function(){return n.a.createElement(de,{logOutUser:e.props.logOutUser,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail,resetPassword:e.props.resetPassword,permanentlyDeleteUserAndInfo:e.props.permanentlyDeleteUserAndInfo,settingsColor:e.props.settingsColor,changeSettingsColor:e.props.changeSettingsColor,settingsFont:e.props.settingsFont,changeSettingsFont:e.props.changeSettingsFont})}}),n.a.createElement(N.b,{exact:!0,path:"/register",component:function(){return n.a.createElement(fe,{logOutUser:e.props.logOutUser,loggedInID:e.props.loggedInID,loggedInEmail:e.props.loggedInEmail})}}),n.a.createElement(N.b,{component:ue}))))}}]),t}(n.a.Component),ke=(o(63),o(186),function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).addBookAlreadyRead=function(e){var t={};o.fetchCoverImage(e);var a=e.volumeInfo.subtitle;void 0===a&&(a=null),t.id=e.id,t.title=e.volumeInfo.title,t.subtitle=a,t.authors=e.volumeInfo.authors,t.bookshelfTimestamp=Date.now(),t.bookshelfRating=0,t.notes=[],t.coverImg=null,t.alreadyRead=!0,t.googleLink=e.selfLink,t.description=e.volumeInfo.description,t.publisher=e.volumeInfo.publisher,t.publishedDate=e.volumeInfo.publishedDate,t.pageCount=e.volumeInfo.pageCount,t.genre=null,console.log(t);var n=e.volumeInfo.title;o.setState((function(e){return{books:[].concat(Object(y.a)(e.books),[t]),notification:"You added "+n+" to your ALREADY READ shelf"}})),o.startNotificationTimer()},o.fetchCoverImage=function(e){console.log("FETCH COVER IMAGE"),console.log(e);var t=e.selfLink,a=e.volumeInfo.imageLinks.smallThumbnail;fetch(t).then((function(e){return e.json()})).then((function(n){console.log("fetchCoverImage CONNECTED"),console.log(n),console.log(n.volumeInfo.imageLinks),void 0!==n.volumeInfo.imageLinks.thumbnail&&(a=n.volumeInfo.imageLinks.thumbnail+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),void 0!==n.volumeInfo.imageLinks.small&&(a=n.volumeInfo.imageLinks.small+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),void 0!==n.volumeInfo.imageLinks.medium&&(a=n.volumeInfo.imageLinks.medium+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),void 0!==n.volumeInfo.imageLinks.large&&(a=n.volumeInfo.imageLinks.large+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),void 0!==n.volumeInfo.imageLinks.extraLarge&&(a=n.volumeInfo.imageLinks.extraLarge+"&key=AIzaSyDq8sjhqCfhczp_tMSh1pv_WzDQo0eirNU"),console.log(t),console.log("FINAL IMAGE: "+a);var l=e.id,r=Object(y.a)(o.state.books),s=r.filter((function(e){return e.id===l}))[0];console.log(s),s.coverImg=a,console.log(s);var i=r.map((function(e){return e.id})).indexOf(l);r.splice(i,1),o.setState({books:r}),o.setState((function(e){return{books:[].concat(Object(y.a)(e.books),[s])}}))}))},o.addBookToRead=function(e){var t={};o.fetchCoverImage(e);var a=e.volumeInfo.subtitle;void 0===a&&(a=null),t.id=e.id,t.title=e.volumeInfo.title,t.subtitle=a,t.authors=e.volumeInfo.authors,t.bookshelfTimestamp=Date.now(),t.bookshelfRating=0,t.notes=[],t.coverImg=null,t.alreadyRead=!1,t.googleLink=e.selfLink,t.description=e.volumeInfo.description,t.publisher=e.volumeInfo.publisher,t.publishedDate=e.volumeInfo.publishedDate,t.pageCount=e.volumeInfo.pageCount,t.genre=null,console.log(t),o.setState((function(e){return{books:[].concat(Object(y.a)(e.books),[t]),notification:"You added "+t.title+" to your TO READ shelf"}})),o.startNotificationTimer()},o.moveBooktoAlreadyRead=function(e){console.log(e);var t=e.id,a=(e.title,Object(y.a)(o.state.books)),n=a.filter((function(e){return e.id===t}));console.log(n);var l=a.findIndex((function(e){return e.id===t}));console.log(l),a[l].alreadyRead=!0,o.setState({books:o.state.books})},o.removeBookFromAlreadyRead=function(e){console.log("Removed: "+JSON.stringify(e));var t=e.id,a=Object(y.a)(o.state.books),n=(a.filter((function(e){return e.id===t})),a.map((function(e){return e.id})).indexOf(t));a.splice(n,1),o.setState({books:a})},o.removeBookFromToRead=function(e){console.log("Removed: "+JSON.stringify(e));var t=e.id,a=Object(y.a)(o.state.books),n=(a.filter((function(e){return e.id===t})),a.map((function(e){return e.id})).indexOf(t));a.splice(n,1),o.setState({books:a})},o.editBook=function(e){console.log("Editing this book: "+JSON.stringify(e));var t=e.id,a=Object(y.a)(o.state.books),n=(a.filter((function(e){return e.id===t})),a.map((function(e){return e.id})).indexOf(t)),l=Object(y.a)(o.state.books);l[n]=e,console.log(l[n]),o.setState({books:l})},o.updateCoverImg=function(e,t){console.log(e),console.log(t),console.log(e);var a=e.id,n=(e.title,Object(y.a)(o.state.books).filter((function(e){return e.id===a})));console.log(n),n.coverImg=t},o.editBookToRead=function(e){console.log("Editing this book: "+JSON.stringify(e));var t=e.id,a=Object(y.a)(o.state.booksToRead),n=(a.filter((function(e){return e.id===t})),a.map((function(e){return e.id})).indexOf(t)),l=Object(y.a)(o.state.booksToRead);l[n]=e,console.log(l[n]),o.setState({booksToRead:l})},o.addNewImagesAlreadyRead=function(e){console.log("Editing this book: "+JSON.stringify(e));var t=e.id,a=Object(y.a)(o.state.books),n=(a.filter((function(e){return e.id===t})),a.map((function(e){return e.id})).indexOf(t)),l=Object(y.a)(o.state.books);e.volumeInfo.imageLinks.large?l[n].volumeInfo.imageLinks.large=e.volumeInfo.imageLinks.large:l[n].volumeInfo.imageLinks.large="",e.volumeInfo.imageLinks.medium?l[n].volumeInfo.imageLinks.medium=e.volumeInfo.imageLinks.medium:l[n].volumeInfo.imageLinks.medium="",e.volumeInfo.imageLinks.small?l[n].volumeInfo.imageLinks.small=e.volumeInfo.imageLinks.small:l[n].volumeInfo.imageLinks.small="",e.volumeInfo.imageLinks.smallThumbnail?l[n].volumeInfo.imageLinks.smallThumbnail=e.volumeInfo.imageLinks.smallThumbnail:l[n].volumeInfo.imageLinks.smallThumbnail="",e.volumeInfo.imageLinks.thumbnail?l[n].volumeInfo.imageLinks.thumbnail=e.volumeInfo.imageLinks.thumbnail:l[n].volumeInfo.imageLinks.thumbnail="",console.log(l[n]),o.setState({booksAlreadyRead:l})},o.addNewImagesToRead=function(e){},o.changeAlreadyReadView=function(e){console.log("CHANGE sortViewAlreadyRead"),console.log(e);var t="alphabetical";e&&("rating"===e.value&&(t="rating"),"date"===e.value&&(t="date")),o.setState({settings:{sortViewAlreadyRead:t}})},o.changeToReadView=function(e){var t="alphabetical";e&&"date"===e.value&&(t="date"),o.setState({settings:{sortViewToRead:t}})},o.changeSettingsColor=function(e){var t="default";e&&(t=e.value),o.setState({settings:{color:t}});var a="bookshelf."+o.props.loggedInID+".settings.color";localStorage.setItem(a,t)},o.changeSettingsFont=function(e){var t="default";e&&(t=e.value),o.setState({settings:{font:t}});var a="bookshelf."+o.props.loggedInID+".settings.font";localStorage.setItem(a,t)},o.resetNotification=function(){o.setState({notification:null})},o.startNotificationTimer=function(){o.timerId||(o.timerId=setTimeout((function(){o.resetNotification(),console.log("startNotificationTimer - tick"),console.log(o.timerId)}),6e3))},o.state={books:[],settings:{color:"default",font:"default",sortViewToRead:"alphabetical",sortViewAlreadyRead:"alphabetical",bookSize:"default",genres:["Fiction","Nonfiction","Memoir","Children","Cooking","Historical Fiction","Mystery","Science Fiction","Young Adult"],customFields:[]},notification:null},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log("componentDidMount");var e=this.props.loggedInID;console.log("loggedInID:"+e),H.syncState("".concat(e,"/books"),{context:this,state:"books",asArray:!0}),H.syncState("".concat(e,"/settings"),{context:this,state:"settings",asArray:!1});var t="bookshelf."+this.props.loggedInID+".settings.color",o=localStorage.getItem(t);H.fetch("".concat(e,"/settings/color"),{context:this,asArray:!1,then:function(e){o!==e&&(console.log("Setting updated color into localStorage: "+e),localStorage.setItem(t,e))}});var a="bookshelf."+this.props.loggedInID+".settings.font",n=localStorage.getItem(a);H.fetch("".concat(e,"/settings/font"),{context:this,asArray:!1,then:function(e){n!==e&&(console.log("Setting updated font into localStorage: "+e),localStorage.setItem(a,e))}})}},{key:"render",value:function(){var e=this.state.books,t="bookshelf."+this.props.loggedInID+".settings.color",o=localStorage.getItem(t),a="bookshelf."+this.props.loggedInID+".settings.font",l=localStorage.getItem(a),r=e.filter((function(e){return!1===e.alreadyRead})),s=e.filter((function(e){return!0===e.alreadyRead}));return console.log(r),console.log(s),n.a.createElement(n.a.Fragment,null,n.a.createElement(R,{settingsColor:o,settingsFont:l}),n.a.createElement(ve,{logOutUser:this.props.logOutUser,loggedInID:this.props.loggedInID,loggedInEmail:this.props.loggedInEmail,permanentlyDeleteUserAndInfo:this.props.permanentlyDeleteUserAndInfo,booksAlreadyRead:s,booksAlreadyReadView:this.state.settings.sortViewAlreadyRead,booksToReadView:this.state.settings.sortViewToRead,changeAlreadyReadView:this.changeAlreadyReadView,changeToReadView:this.changeToReadView,settingsColor:o,changeSettingsColor:this.changeSettingsColor,settingsFont:l,changeSettingsFont:this.changeSettingsFont,booksToRead:r,editBook:this.editBook,editBookToRead:this.editBookToRead,addBookAlreadyRead:this.addBookAlreadyRead,addBookToRead:this.addBookToRead,moveBooktoAlreadyRead:this.moveBooktoAlreadyRead,removeBookFromAlreadyRead:this.removeBookFromAlreadyRead,removeBookFromToRead:this.removeBookFromToRead,addNewImagesAlreadyRead:this.addNewImagesAlreadyRead,addNewImagesToRead:this.addNewImagesToRead,notification:this.state.notification,updateCoverImg:this.updateCoverImg}),n.a.createElement("footer",{className:"clb-bookshelf-footer color-"+o+" font-"+l},"Bookshelf \xb7 ",n.a.createElement("a",{href:"https://github.com/tomatillodesign/bookshelf",target:"_blank"},"Version 1.0")," \xb7 By Chris Liu-Beers, ",n.a.createElement("a",{href:"http://tomatillodesign.com",target:"_blank"},"Tomatillo Design")))}}]),t}(n.a.Component)),Ee=o(2),Re=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).sentEmailAddress=null,o.handleShow=function(){return o.setState({showModal:!0})},o.handleClose=function(){return o.setState({showModal:!1})},o.state={showModal:!1,email:"",sentEmail:!1},o.handleEmailChange=o.handleEmailChange.bind(Object(Ee.a)(o)),o.handleSubmit=o.handleSubmit.bind(Object(Ee.a)(o)),o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(e){console.log("Lost password, attempting to send email to: "+this.state.email),e.preventDefault();var t=q.auth(),o=this.state.email;t.sendPasswordResetEmail(o).then((function(){console.log("Reset password email sent")})).catch((function(e){console.log("ERROR: could not send reset password email"),console.log(e)})),this.sentEmailAddress=this.emailAdress,this.setState({sentEmail:!0})}},{key:"render",value:function(){this.sentEmailAddress;return n.a.createElement("div",{className:"lost-password-area"},n.a.createElement("button",{onClick:this.handleShow},"Lost Password"),n.a.createElement(O.a,{show:this.state.showModal,onHide:this.handleClose,className:"clb-single-beer-notes"},n.a.createElement(O.a.Header,{closeButton:!0},n.a.createElement(O.a.Title,null,"Lost Your Password")),n.a.createElement(O.a.Body,null,!0!==this.state.sentEmail?n.a.createElement("form",{className:"lost-pw-area",onSubmit:this.handleSubmit},"Enter your email below to reset your password:",n.a.createElement("div",{className:"login-item"},n.a.createElement("input",{type:"text",id:"lost-pw-form-email",name:"email",label:"Email",required:!0,onChange:this.handleEmailChange})),n.a.createElement("button",{type:"submit",id:"lost-pw-submit"},"Submit")):n.a.createElement("p",{className:"sent-email-message"},"If an account exists for ",this.state.email,", we've sent an email that will allow you to reset your password. Thanks!"))))}}]),t}(n.a.Component),ye=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).handleRegistrationSubmit=function(e){e.preventDefault(),console.log("Registration submitted");var t=o.state,a=t.email,n=t.password;console.log(o.state),q.auth().createUserWithEmailAndPassword(a,n).then((function(e){o.props.registerNewUser(e)})).catch((function(e){o.setState({error:e})}))},o.state={showModal:!1,email:"",password:"",error:null},o.handleEmailChange=o.handleEmailChange.bind(Object(Ee.a)(o)),o.handlePWChange=o.handlePWChange.bind(Object(Ee.a)(o)),o.handleSubmit=o.handleSubmit.bind(Object(Ee.a)(o)),o.handleRegistrationSubmit=o.handleRegistrationSubmit.bind(Object(Ee.a)(o)),o.handleShowRegister=o.handleShowRegister.bind(Object(Ee.a)(o)),o.handleCloseRegister=o.handleCloseRegister.bind(Object(Ee.a)(o)),o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleShowRegister",value:function(e){e.preventDefault(),this.setState({showModal:!0})}},{key:"handleCloseRegister",value:function(e){this.setState({showModal:!1})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePWChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.authenticateUser(this.state.email,this.state.password)}},{key:"render",value:function(){var e=this.props.loginError,t=this.state;t.email,t.password,t.error;return n.a.createElement("div",{className:"login-form-area"},n.a.createElement("p",null,"Welcome! Bookshelf is an easy, free way to keep track of your reading.",n.a.createElement("br",null),"It's for personal use only and your information will never be shared with advertisers or social networks.",n.a.createElement("br",null),"If you're new here, ",n.a.createElement("a",{href:"/bookshelf/register",onClick:this.handleShowRegister},"click here to register for a new free account"),". Or if you've already registered, then simply login below."),!0===e?n.a.createElement("h2",null,"Incorrect email/password combination. Please try again:"):n.a.createElement("h2",null,"Login Below:"),n.a.createElement("form",{className:"login-area",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"login-item"},n.a.createElement("input",{type:"text",id:"login-form-email",name:"email",label:"Email",required:!0,onChange:this.handleEmailChange})),n.a.createElement("div",{className:"login-item"},n.a.createElement("input",{id:"login-form-password",name:"password",label:"Password",required:!0,type:"password",onChange:this.handlePWChange})),n.a.createElement("button",{type:"submit"},"Submit")),n.a.createElement(Re,null),n.a.createElement(O.a,{show:this.state.showModal,onHide:this.handleCloseRegister,className:"clb-single-beer-notes"},n.a.createElement(O.a.Header,{closeButton:!0},n.a.createElement(O.a.Title,null,n.a.createElement("h3",null,"Register for a New Account"))),n.a.createElement(O.a.Body,null,n.a.createElement(fe,{registerNewUser:this.props.registerNewUser}))))}}]),t}(n.a.Component);function Ie(e){return n.a.createElement("div",{className:"landing-page-area single-page"},n.a.createElement("h1",null,"Login & New User Registration"),n.a.createElement("div",{className:"login-register-area"},n.a.createElement(ye,{authenticateUser:e.authenticateUser,loginError:e.loginError,registerNewUser:e.registerNewUser})))}var Ne=function(e){function t(e){var o;return Object(m.a)(this,t),(o=Object(u.a)(this,Object(g.a)(t).call(this,e))).registerNewUser=function(e){var t=e.user.uid,a=e.user.email;console.log(t),q.database().ref().update(Object(c.a)({},t,{ownerID:t,ownerEmail:a,books:[],settings:{color:"default",font:"default",sortViewToRead:"alphabetical",sortViewAlreadyRead:"alphabetical",bookSize:"default",genres:["Fiction","Nonfiction","Memoir","Children","Cooking","Historical Fiction","Mystery","Science Fiction","Young Adult"],customFields:[]}})),o.setState({loggedInID:t,loggedInEmail:a}),localStorage.setItem("bookshelf.loggedInID",t),localStorage.setItem("bookshelf.loggedInEmail",a),console.log("REGISTERED AND Logged in: "+t)},o.authenticateUser=function(e,t){console.log("AuthenticateUser: "+e),q.auth().signInWithEmailAndPassword(e,t).then((function(t){console.log("User successfully LOGGED IN"+t.user.uid),o.setState({loggedInID:t.user.uid,loggedInEmail:t.user.email,loginError:!1}),localStorage.setItem("bookshelf.loggedInID",t.user.uid),localStorage.setItem("bookshelf.loggedInEmail",e)})).catch((function(e){console.log("ERROR: User trying to log in"),o.setState({loginError:!0})}))},o.authHandler=function(e){var t,a;return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t=q.auth().currentUser,console.log(t),null!==t?(a=t.uid,console.log("Current User ID: "+a),console.log("Current User Email: "+t.email),o.setState({loggedInID:a,loggedInEmail:t.email}),localStorage.setItem("bookshelf.loggedInID",a),localStorage.setItem("bookshelf.loggedInEmail",t.email)):console.log("authHandler == no user found");case 3:case"end":return e.stop()}}))},o.logOutUser=function(e){q.auth().signOut().then((function(){console.log("Logged OUT successful")})).catch((function(e){console.log("ERROR: Trying to log out")})),o.setState({loggedInID:"",loggedInEmail:""}),localStorage.removeItem("bookshelf.loggedInID"),localStorage.removeItem("bookshelf.loggedInEmail"),H.reset()},o.permanentlyDeleteUserAndInfo=function(e){console.log(e);var t=e.uid;H.remove(t).then((function(){console.log("User "+t+" permanently deleted")})).catch((function(e){})),o.setState({loggedInID:"",loggedInEmail:""}),localStorage.removeItem("bookshelf.loggedInID"),localStorage.removeItem("bookshelf.loggedInEmail")},o.state={loggedInID:"",loggedInEmail:"",loginError:!1},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log("App.js mounted")}},{key:"render",value:function(){var e=this.state.loggedInID,t=this.state.loggedInEmail,o=this.state.loginError,a=localStorage.getItem("bookshelf.loggedInID"),l=localStorage.getItem("bookshelf.loggedInEmail");return console.log("LOCAL STORAGE: "+a),null!==a&&(e=a),null!==l&&(t=l),n.a.createElement("div",{className:"App"},""!==e?n.a.createElement(n.a.Fragment,null,n.a.createElement(ke,{logOutUser:this.logOutUser,loggedInID:e,loggedInEmail:t,permanentlyDeleteUserAndInfo:this.permanentlyDeleteUserAndInfo})):n.a.createElement(n.a.Fragment,null,n.a.createElement(R,{logOutUser:this.logOutUser,permanentlyDeleteUserAndInfo:this.permanentlyDeleteUserAndInfo}),n.a.createElement("div",{className:"logged-out-area"},n.a.createElement(Ie,{registerNewUser:this.registerNewUser,authenticateUser:this.authenticateUser,loginError:o,logOutUser:this.logOutUser}))))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[130,1,2]]]);
//# sourceMappingURL=main.748fe9f7.chunk.js.map